{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/components/ui/button.tsx"],"sourcesContent":["'use client'\n\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\nimport { motion, type HTMLMotionProps } from 'framer-motion'\nimport * as React from 'react'\n\nimport { cn } from '@/lib/utils'\nimport { transitions } from '@/lib/animations'\n\nconst buttonVariants = cva(\n  \"focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive inline-flex shrink-0 items-center justify-center gap-2 rounded-md text-sm font-medium whitespace-nowrap transition-colors outline-none focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n  {\n    variants: {\n      variant: {\n        default:\n          'bg-primary text-primary-foreground hover:bg-primary/90 shadow-xs',\n        destructive:\n          'bg-destructive hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60 text-white shadow-xs',\n        outline:\n          'bg-background hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50 border shadow-xs',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-xs',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 gap-1.5 rounded-md px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  }\n)\n\ninterface ButtonProps\n  extends Omit<HTMLMotionProps<'button'>, 'children'>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n  children?: React.ReactNode\n  /** Disable hover/tap animations */\n  disableAnimation?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  (\n    {\n      className,\n      variant,\n      size,\n      asChild = false,\n      disableAnimation = false,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    // For asChild, use Slot without motion\n    if (asChild) {\n      return (\n        <Slot\n          data-slot=\"button\"\n          className={cn(buttonVariants({ variant, size, className }))}\n          ref={ref as React.Ref<HTMLElement>}\n          {...(props as React.HTMLAttributes<HTMLElement>)}\n        >\n          {children}\n        </Slot>\n      )\n    }\n\n    // Standard button with motion\n    return (\n      <motion.button\n        ref={ref}\n        data-slot=\"button\"\n        className={cn(buttonVariants({ variant, size, className }))}\n        whileHover={disableAnimation ? undefined : { scale: 1.02 }}\n        whileTap={disableAnimation ? undefined : { scale: 0.97 }}\n        transition={transitions.spring}\n        {...props}\n      >\n        {children}\n      </motion.button>\n    )\n  }\n)\nButton.displayName = 'Button'\n\nexport { Button, buttonVariants }\nexport type { ButtonProps }\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AACA;AAEA;AACA;AARA;;;;;;;;AAUA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,kcACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAYF,MAAM,uBAAS,mNAAgB,CAC7B,CACE,EACE,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,mBAAmB,KAAK,EACxB,QAAQ,EACR,GAAG,OACJ,EACD;IAEA,uCAAuC;IACvC,IAAI,SAAS;QACX,qBACE,8OAAC,wKAAI;YACH,aAAU;YACV,WAAW,IAAA,kHAAE,EAAC,eAAe;gBAAE;gBAAS;gBAAM;YAAU;YACxD,KAAK;YACJ,GAAI,KAAK;sBAET;;;;;;IAGP;IAEA,8BAA8B;IAC9B,qBACE,8OAAC,oMAAM,CAAC,MAAM;QACZ,KAAK;QACL,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,YAAY,mBAAmB,YAAY;YAAE,OAAO;QAAK;QACzD,UAAU,mBAAmB,YAAY;YAAE,OAAO;QAAK;QACvD,YAAY,gIAAW,CAAC,MAAM;QAC7B,GAAG,KAAK;kBAER;;;;;;AAGP;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/components/dashboard/dashboard-card-header.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { Button } from '@/components/ui/button'\r\nimport { ChevronRight, RefreshCw } from 'lucide-react'\r\nimport Link from 'next/link'\r\n\r\nexport interface DashboardCardHeaderProps {\r\n  /** Icon element (e.g. <Cloud className=\"size-5 text-sky-500\" />) */\r\n  icon: React.ReactNode\r\n  /** Container class for the icon wrapper, e.g. \"bg-sky-500/10\" */\r\n  iconContainerClassName?: string\r\n  /** Card title */\r\n  title: string\r\n  /** Optional badge after title (e.g. CTA pill, count) */\r\n  badge?: React.ReactNode\r\n  /** If set, shows \"View\" / viewLabel link */\r\n  viewHref?: string\r\n  viewLabel?: string\r\n  /** Refresh button */\r\n  onRefresh?: () => void\r\n  refreshing?: boolean\r\n  /** Extra actions before View/Refresh (e.g. Rideshare button) */\r\n  rightExtra?: React.ReactNode\r\n}\r\n\r\nconst defaultIconContainer = 'bg-muted'\r\n\r\n/**\r\n * Shared header for dashboard cards: left icon + title + optional badge,\r\n * right View link + optional extra actions + refresh.\r\n */\r\nexport function DashboardCardHeader({\r\n  icon,\r\n  iconContainerClassName = defaultIconContainer,\r\n  title,\r\n  badge,\r\n  viewHref,\r\n  viewLabel = 'View',\r\n  onRefresh,\r\n  refreshing = false,\r\n  rightExtra,\r\n}: DashboardCardHeaderProps) {\r\n  return (\r\n    <div className=\"flex items-center justify-between\">\r\n      <div className=\"flex items-center gap-2\">\r\n        <div\r\n          className={`flex size-9 shrink-0 items-center justify-center rounded-lg ${iconContainerClassName}`}\r\n        >\r\n          {icon}\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <h3 className=\"text-foreground text-sm font-semibold\">{title}</h3>\r\n          {badge}\r\n        </div>\r\n      </div>\r\n      <div className=\"flex items-center gap-2\">\r\n        {rightExtra}\r\n        {viewHref && (\r\n          <Link href={viewHref}>\r\n            <Button\r\n              variant=\"ghost\"\r\n              size=\"sm\"\r\n              className=\"h-7 gap-1.5 px-2 text-xs\"\r\n            >\r\n              {viewLabel}\r\n              <ChevronRight className=\"size-3.5 opacity-70\" />\r\n            </Button>\r\n          </Link>\r\n        )}\r\n        {onRefresh != null && (\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"sm\"\r\n            onClick={onRefresh}\r\n            disabled={refreshing}\r\n            className=\"h-7 min-h-[44px] w-7 min-w-[44px] touch-manipulation p-0\"\r\n          >\r\n            <RefreshCw\r\n              className={`size-4 ${refreshing ? 'animate-spin' : ''}`}\r\n            />\r\n          </Button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AAJA;;;;;AAyBA,MAAM,uBAAuB;AAMtB,SAAS,oBAAoB,EAClC,IAAI,EACJ,yBAAyB,oBAAoB,EAC7C,KAAK,EACL,KAAK,EACL,QAAQ,EACR,YAAY,MAAM,EAClB,SAAS,EACT,aAAa,KAAK,EAClB,UAAU,EACe;IACzB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,WAAW,CAAC,4DAA4D,EAAE,wBAAwB;kCAEjG;;;;;;kCAEH,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAAyC;;;;;;4BACtD;;;;;;;;;;;;;0BAGL,8OAAC;gBAAI,WAAU;;oBACZ;oBACA,0BACC,8OAAC,uKAAI;wBAAC,MAAM;kCACV,cAAA,8OAAC,qIAAM;4BACL,SAAQ;4BACR,MAAK;4BACL,WAAU;;gCAET;8CACD,8OAAC,sOAAY;oCAAC,WAAU;;;;;;;;;;;;;;;;;oBAI7B,aAAa,sBACZ,8OAAC,qIAAM;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS;wBACT,UAAU;wBACV,WAAU;kCAEV,cAAA,8OAAC,6NAAS;4BACR,WAAW,CAAC,OAAO,EAAE,aAAa,iBAAiB,IAAI;;;;;;;;;;;;;;;;;;;;;;;AAOrE"}},
    {"offset": {"line": 215, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/components/ui/tooltip.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction TooltipProvider({\r\n  delayDuration = 0,\r\n  ...props\r\n}: React.ComponentProps<typeof TooltipPrimitive.Provider>) {\r\n  return (\r\n    <TooltipPrimitive.Provider\r\n      data-slot=\"tooltip-provider\"\r\n      delayDuration={delayDuration}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction Tooltip({\r\n  ...props\r\n}: React.ComponentProps<typeof TooltipPrimitive.Root>) {\r\n  return (\r\n    <TooltipProvider>\r\n      <TooltipPrimitive.Root data-slot=\"tooltip\" {...props} />\r\n    </TooltipProvider>\r\n  )\r\n}\r\n\r\nfunction TooltipTrigger({\r\n  ...props\r\n}: React.ComponentProps<typeof TooltipPrimitive.Trigger>) {\r\n  return <TooltipPrimitive.Trigger data-slot=\"tooltip-trigger\" {...props} />\r\n}\r\n\r\nfunction TooltipContent({\r\n  className,\r\n  sideOffset = 0,\r\n  children,\r\n  ...props\r\n}: React.ComponentProps<typeof TooltipPrimitive.Content>) {\r\n  return (\r\n    <TooltipPrimitive.Portal>\r\n      <TooltipPrimitive.Content\r\n        data-slot=\"tooltip-content\"\r\n        sideOffset={sideOffset}\r\n        className={cn(\r\n          \"bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance\",\r\n          className\r\n        )}\r\n        {...props}\r\n      >\r\n        {children}\r\n        <TooltipPrimitive.Arrow className=\"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]\" />\r\n      </TooltipPrimitive.Content>\r\n    </TooltipPrimitive.Portal>\r\n  )\r\n}\r\n\r\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,gBAAgB,EACvB,gBAAgB,CAAC,EACjB,GAAG,OACoD;IACvD,qBACE,8OAAC,+KAAyB;QACxB,aAAU;QACV,eAAe;QACd,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,QAAQ,EACf,GAAG,OACgD;IACnD,qBACE,8OAAC;kBACC,cAAA,8OAAC,2KAAqB;YAAC,aAAU;YAAW,GAAG,KAAK;;;;;;;;;;;AAG1D;AAEA,SAAS,eAAe,EACtB,GAAG,OACmD;IACtD,qBAAO,8OAAC,8KAAwB;QAAC,aAAU;QAAmB,GAAG,KAAK;;;;;;AACxE;AAEA,SAAS,eAAe,EACtB,SAAS,EACT,aAAa,CAAC,EACd,QAAQ,EACR,GAAG,OACmD;IACtD,qBACE,8OAAC,6KAAuB;kBACtB,cAAA,8OAAC,8KAAwB;YACvB,aAAU;YACV,YAAY;YACZ,WAAW,IAAA,kHAAE,EACX,0aACA;YAED,GAAG,KAAK;;gBAER;8BACD,8OAAC,4KAAsB;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI1C"}},
    {"offset": {"line": 302, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/components/dashboard/calendar-card.tsx"],"sourcesContent":["'use client'\n\nimport { DashboardCardHeader } from '@/components/dashboard/dashboard-card-header'\nimport { Button } from '@/components/ui/button'\nimport { TooltipProvider } from '@/components/ui/tooltip'\nimport { apiGet } from '@/lib/api/client'\nimport type { CalendarEvent } from '@/lib/types/calendar.types'\nimport * as TooltipPrimitive from '@radix-ui/react-tooltip'\nimport {\n  differenceInMinutes,\n  format,\n  isToday,\n  isTomorrow,\n  parseISO,\n} from 'date-fns'\nimport {\n  AlertCircle,\n  Calendar,\n  CalendarDays,\n  Clock,\n  Database,\n  MapPin,\n  RefreshCw,\n} from 'lucide-react'\nimport { useEffect, useState } from 'react'\n\ninterface CalendarResponse {\n  events: CalendarEvent[]\n  source: 'live' | 'cache' | 'none'\n  authenticated: boolean\n  authAvailable: boolean\n  authUrl?: string\n  message?: string\n}\n\nexport function CalendarCard() {\n  const [events, setEvents] = useState<CalendarEvent[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [source, setSource] = useState<'live' | 'cache' | 'none'>('none')\n  const [authAvailable, setAuthAvailable] = useState(false)\n  const [authUrl, setAuthUrl] = useState<string | null>(null)\n\n  const fetchEvents = async () => {\n    try {\n      setLoading(true)\n      setError(null)\n      const response = await apiGet<CalendarResponse>(\n        '/api/calendar/upcoming?maxResults=10'\n      )\n\n      if (!response.success) {\n        console.error('[CalendarCard] Error response:', response)\n        throw new Error(response.error || 'Failed to fetch events')\n      }\n\n      if (response.data) {\n        // Handle new response format with metadata\n        setEvents(response.data.events || [])\n        setSource(response.data.source || 'none')\n        setAuthAvailable(response.data.authAvailable || false)\n        setAuthUrl(response.data.authUrl || null)\n      } else {\n        setEvents([])\n        setSource('none')\n      }\n    } catch (err) {\n      console.error('[CalendarCard] Fetch error:', err)\n      setError(err instanceof Error ? err.message : 'Failed to load events')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchEvents()\n    const interval = setInterval(fetchEvents, 300000) // 5 min\n    return () => clearInterval(interval)\n  }, [])\n\n  const isAllDayEvent = (event: CalendarEvent) => {\n    // All-day events have a date but no dateTime\n    return !event.start.dateTime && !!event.start.date\n  }\n\n  const getEventStartTime = (event: CalendarEvent): Date | null => {\n    // For all-day events, parse the date string (YYYY-MM-DD)\n    if (event.start.date) {\n      // Parse as UTC to avoid timezone issues with all-day events\n      const dateStr = event.start.date\n      const parts = dateStr.split('-').map(Number)\n      const year = parts[0]\n      const month = parts[1]\n      const day = parts[2]\n      if (\n        year === undefined ||\n        month === undefined ||\n        day === undefined ||\n        isNaN(year) ||\n        isNaN(month) ||\n        isNaN(day)\n      ) {\n        return null\n      }\n      return new Date(Date.UTC(year, month - 1, day))\n    }\n    // For timed events, parse the ISO dateTime string\n    if (event.start.dateTime) {\n      return parseISO(event.start.dateTime)\n    }\n    return null\n  }\n\n  const formatEventTime = (event: CalendarEvent) => {\n    const isAllDay = isAllDayEvent(event)\n    const startTime = getEventStartTime(event)\n\n    if (!startTime) return { display: 'All day', full: 'All day event' }\n\n    const now = new Date()\n    const currentYear = now.getFullYear()\n    const eventYear = startTime.getFullYear()\n    const showYear = eventYear !== currentYear\n\n    // For all-day events, ALWAYS show month and day clearly\n    if (isAllDay) {\n      if (isToday(startTime)) {\n        return {\n          display: `Today, ${format(startTime, 'MMMM d')}${showYear ? `, ${eventYear}` : ''}`,\n          full: format(startTime, 'EEEE, MMMM d, yyyy'),\n        }\n      } else if (isTomorrow(startTime)) {\n        return {\n          display: `Tomorrow, ${format(startTime, 'MMMM d')}${showYear ? `, ${eventYear}` : ''}`,\n          full: format(startTime, 'EEEE, MMMM d, yyyy'),\n        }\n      } else {\n        // ALWAYS show month and day number clearly: \"Mon, Jan 13\" or \"Mon, Jan 13, 2025\"\n        return {\n          display: showYear\n            ? format(startTime, 'EEE, MMM d, yyyy')\n            : format(startTime, 'EEE, MMM d'),\n          full: format(startTime, 'EEEE, MMMM d, yyyy'),\n        }\n      }\n    }\n\n    // For timed events\n    const minutesUntil = differenceInMinutes(startTime, now)\n\n    if (minutesUntil > 0 && minutesUntil <= 60) {\n      return {\n        display: `in ${minutesUntil} min`,\n        full: format(startTime, \"EEEE, MMMM d, yyyy 'at' h:mm a\"),\n      }\n    }\n\n    // For timed events, show day, month, day number, and time\n    if (isToday(startTime)) {\n      return {\n        display: `Today, ${format(startTime, 'h:mm a')}`,\n        full: format(startTime, \"EEEE, MMMM d, yyyy 'at' h:mm a\"),\n      }\n    } else if (isTomorrow(startTime)) {\n      return {\n        display: `Tomorrow, ${format(startTime, 'h:mm a')}`,\n        full: format(startTime, \"EEEE, MMMM d, yyyy 'at' h:mm a\"),\n      }\n    } else {\n      // Show: \"Mon, Jan 13, 7:30 PM\" or \"Mon, Jan 13, 2025, 7:30 PM\" if different year\n      return {\n        display: showYear\n          ? `${format(startTime, 'EEE, MMM d, yyyy')}, ${format(startTime, 'h:mm a')}`\n          : `${format(startTime, 'EEE, MMM d')}, ${format(startTime, 'h:mm a')}`,\n        full: format(startTime, \"EEEE, MMMM d, yyyy 'at' h:mm a\"),\n      }\n    }\n  }\n\n  const isEventSoon = (event: CalendarEvent) => {\n    // Only timed events can be \"soon\"\n    if (isAllDayEvent(event)) return false\n    const startTime = getEventStartTime(event)\n    if (!startTime) return false\n    const minutesUntil = differenceInMinutes(startTime, new Date())\n    return minutesUntil > 0 && minutesUntil <= 30\n  }\n\n  // Show error state\n  if (error) {\n    return (\n      <div className=\"space-y-4\">\n        <DashboardCardHeader\n          icon={<Calendar className=\"text-brand size-5\" />}\n          iconContainerClassName=\"bg-brand/10\"\n          title=\"Calendar\"\n        />\n        <div className=\"bg-muted/30 rounded-lg border p-4\">\n          <div className=\"text-muted-foreground flex items-center gap-2\">\n            <AlertCircle className=\"size-4\" />\n            <p className=\"text-sm\">{error}</p>\n          </div>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={fetchEvents}\n            className=\"mt-3\"\n          >\n            Retry\n          </Button>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <DashboardCardHeader\n        icon={<Calendar className=\"text-brand size-5\" />}\n        iconContainerClassName=\"bg-brand/10\"\n        title=\"Calendar\"\n        badge={\n          source === 'cache' ? (\n            <span\n              className=\"bg-muted text-muted-foreground flex items-center gap-1 rounded-full px-1.5 py-0.5 text-[10px]\"\n              title=\"Showing cached data\"\n            >\n              <Database className=\"size-2.5\" />\n              cached\n            </span>\n          ) : undefined\n        }\n        viewHref=\"/calendar\"\n        viewLabel=\"View All\"\n        onRefresh={fetchEvents}\n        refreshing={loading}\n        rightExtra={\n          authAvailable &&\n          (source === 'cache' || source === 'none') &&\n          authUrl ? (\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => (window.location.href = authUrl)}\n              className=\"h-7 gap-1.5 px-2 text-xs\"\n            >\n              Connect\n            </Button>\n          ) : undefined\n        }\n      />\n\n      {loading && events.length === 0 ? (\n        <div className=\"bg-muted/30 text-muted-foreground flex items-center gap-2 rounded-lg p-4 text-sm\">\n          <RefreshCw className=\"size-4 animate-spin\" />\n          Loading events...\n        </div>\n      ) : events.length === 0 ? (\n        <div className=\"bg-muted/20 flex flex-col items-center justify-center rounded-xl p-8 text-center\">\n          <div className=\"bg-muted/50 flex size-12 items-center justify-center rounded-full\">\n            <Calendar className=\"text-muted-foreground size-6\" />\n          </div>\n          <p className=\"text-muted-foreground mt-3 text-sm font-medium\">\n            No upcoming events\n          </p>\n          <p className=\"text-muted-foreground/70 mt-1 text-xs\">\n            {authAvailable && !source.includes('live')\n              ? 'Connect Google Calendar to see your schedule'\n              : 'Your schedule is clear'}\n          </p>\n          {authAvailable &&\n            authUrl &&\n            (source === 'cache' || source === 'none') && (\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => (window.location.href = authUrl)}\n                className=\"mt-3 gap-1.5\"\n              >\n                <Calendar className=\"size-3.5\" />\n                Connect Google Calendar\n              </Button>\n            )}\n        </div>\n      ) : (\n        <TooltipProvider delayDuration={300}>\n          <div className=\"space-y-2\">\n            {events.slice(0, 4).map(event => {\n              const isSoon = isEventSoon(event)\n              const isAllDay = isAllDayEvent(event)\n              const timeInfo = formatEventTime(event)\n\n              return (\n                <div\n                  key={event.id}\n                  className={`group hover:border-border/80 flex items-start gap-3 rounded-lg border p-3.5 transition-all hover:shadow-sm ${\n                    isSoon\n                      ? 'border-brand/50 bg-brand/5 ring-brand/20 ring-1'\n                      : isAllDay\n                        ? 'border-border/60 bg-card/40'\n                        : 'border-border bg-card/50'\n                  }`}\n                >\n                  <div\n                    className={`flex size-10 shrink-0 items-center justify-center rounded-lg ${\n                      isSoon\n                        ? 'bg-brand/20'\n                        : isAllDay\n                          ? 'bg-muted/60'\n                          : 'bg-muted'\n                    }`}\n                  >\n                    {isAllDay ? (\n                      <CalendarDays\n                        className={`size-4.5 ${\n                          isSoon ? 'text-brand' : 'text-muted-foreground'\n                        }`}\n                      />\n                    ) : (\n                      <Calendar\n                        className={`size-4.5 ${\n                          isSoon ? 'text-brand' : 'text-muted-foreground'\n                        }`}\n                      />\n                    )}\n                  </div>\n                  <div className=\"min-w-0 flex-1 space-y-1.5\">\n                    <div className=\"flex items-start justify-between gap-2\">\n                      <TooltipPrimitive.Root>\n                        <TooltipPrimitive.Trigger asChild>\n                          <h4 className=\"text-foreground cursor-help truncate text-sm leading-tight font-semibold\">\n                            {event.summary}\n                          </h4>\n                        </TooltipPrimitive.Trigger>\n                        <TooltipPrimitive.Portal>\n                          <TooltipPrimitive.Content\n                            side=\"top\"\n                            className=\"bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 z-50 max-w-xs rounded-md px-3 py-1.5 text-xs shadow-md\"\n                          >\n                            <p className=\"font-medium\">{event.summary}</p>\n                            {event.description && (\n                              <p className=\"mt-1 text-xs opacity-80\">\n                                {event.description}\n                              </p>\n                            )}\n                          </TooltipPrimitive.Content>\n                        </TooltipPrimitive.Portal>\n                      </TooltipPrimitive.Root>\n                      <div className=\"flex shrink-0 items-center gap-1.5\">\n                        {isSoon && (\n                          <span className=\"bg-brand rounded-full px-2 py-0.5 text-[10px] font-medium text-white\">\n                            Soon\n                          </span>\n                        )}\n                        {isAllDay && !isSoon && (\n                          <span className=\"bg-muted text-muted-foreground rounded-full px-2 py-0.5 text-[10px] font-medium\">\n                            All day\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"flex flex-wrap items-center gap-x-4 gap-y-1 text-xs\">\n                      <TooltipPrimitive.Root>\n                        <TooltipPrimitive.Trigger asChild>\n                          <span className=\"text-muted-foreground flex cursor-help items-center gap-1.5 font-medium\">\n                            {isAllDay ? (\n                              <CalendarDays className=\"size-3.5 shrink-0\" />\n                            ) : (\n                              <Clock className=\"size-3.5 shrink-0\" />\n                            )}\n                            <span>{timeInfo.display}</span>\n                          </span>\n                        </TooltipPrimitive.Trigger>\n                        <TooltipPrimitive.Portal>\n                          <TooltipPrimitive.Content className=\"bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 z-50 rounded-md px-3 py-1.5 text-xs shadow-md\">\n                            <p>{timeInfo.full}</p>\n                          </TooltipPrimitive.Content>\n                        </TooltipPrimitive.Portal>\n                      </TooltipPrimitive.Root>\n                      {event.location && (\n                        <TooltipPrimitive.Root>\n                          <TooltipPrimitive.Trigger asChild>\n                            <span className=\"text-muted-foreground flex max-w-[200px] cursor-help items-center gap-1.5 truncate\">\n                              <MapPin className=\"size-3.5 shrink-0\" />\n                              <span className=\"truncate\">\n                                {event.location.split(',')[0]}\n                              </span>\n                            </span>\n                          </TooltipPrimitive.Trigger>\n                          <TooltipPrimitive.Portal>\n                            <TooltipPrimitive.Content className=\"bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 z-50 max-w-xs rounded-md px-3 py-1.5 text-xs shadow-md\">\n                              <p>{event.location}</p>\n                            </TooltipPrimitive.Content>\n                          </TooltipPrimitive.Portal>\n                        </TooltipPrimitive.Root>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        </TooltipProvider>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 949, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\r\n\r\nfunction Skeleton({ className, ...props }: React.ComponentProps<\"div\">) {\r\n  return (\r\n    <div\r\n      data-slot=\"skeleton\"\r\n      className={cn(\"bg-accent animate-pulse rounded-md\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Skeleton }\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAoC;IACpE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 973, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/lib/services/coffee.service.ts"],"sourcesContent":["/**\n * Coffee Service\n * Based on coffee-v2.md - The Chicago Studio Coffee Guide (2026)\n *\n * Equipment:\n * - Machine: Technivorm Moccamaster KBGV Select (Matte Black)\n * - Batch Grinder: Fellow Ode Gen 2\n * - Solo Grinder: Timemore S3\n * - Brewer: Hario Switch (Size 03)\n * - Server: Hario V60 Glass Server (1000ml)\n * - Scale: Acaia Pearl\n * - Kettle: Fellow Stagg EKG\n *\n * Note: This service provides default/fallback data. For database-backed\n * configuration management, use the CoffeeConfigService instead.\n */\n\nimport type {\n  BrewMethod,\n  CoffeeGuideData,\n  CoffeeRecipe,\n  CupSize,\n  GoldenRule,\n  QuickDose,\n  RoastLevel,\n  RoastStrategy,\n} from '@/lib/types/coffee.types'\n\nexport class CoffeeService {\n  /**\n   * Roast Strategy Key - general rules for each roast type\n   */\n  getRoastStrategies(): RoastStrategy[] {\n    return [\n      {\n        roast: 'light',\n        goal: 'Acidity & Complexity',\n        temp: '212°F (Boiling)',\n        technique: 'High Agitation. Pour aggressively. Stir blooms.',\n        ratio: '1:16 or 1:17',\n      },\n      {\n        roast: 'medium',\n        goal: 'Sweetness & Body',\n        temp: '200°F – 205°F',\n        technique: 'Gentle Agitation. Pour steadily. Minimal stirring.',\n        ratio: '1:16 or 1:17',\n      },\n      {\n        roast: 'dark',\n        goal: 'Light & Sweet (No Bitterness)',\n        temp: '195°F (Manual) or Default (Machine)',\n        technique: 'Zero Agitation. Do not stir. Let gravity do the work.',\n        ratio: '1:18 (less coffee)',\n      },\n    ]\n  }\n\n  /**\n   * Hario Switch recipes by cup size and roast\n   */\n  getSwitchRecipes(): CoffeeRecipe[] {\n    return [\n      // 1 CUP (300ml) - \"The Hybrid\" method\n      {\n        id: 'switch-1-light',\n        method: 'switch',\n        cupSize: '1-cup',\n        cupSizeLabel: '1 Cup (300ml)',\n        waterMl: 300,\n        roast: 'light',\n        ratio: '1:16',\n        coffee: 18.8,\n        temp: '212°F',\n        technique: 'Aggressive Flush. Brisk swirl during steep.',\n        switchSetting: 'hybrid',\n        timingCues: [\n          { time: 0, label: 'Flush', action: 'Pour 60g fast with switch DOWN' },\n          {\n            time: 45,\n            label: 'Steep',\n            action: 'Switch UP, pour to 300g, swirl',\n          },\n          { time: 150, label: 'Release', action: 'Switch DOWN, let drain' },\n        ],\n      },\n      {\n        id: 'switch-1-medium',\n        method: 'switch',\n        cupSize: '1-cup',\n        cupSizeLabel: '1 Cup (300ml)',\n        waterMl: 300,\n        roast: 'medium',\n        ratio: '1:16',\n        coffee: 18.8,\n        temp: '200°F',\n        technique: 'Gentle Flush. One soft swirl during steep.',\n        switchSetting: 'hybrid',\n        timingCues: [\n          {\n            time: 0,\n            label: 'Flush',\n            action: 'Pour 60g gently with switch DOWN',\n          },\n          {\n            time: 45,\n            label: 'Steep',\n            action: 'Switch UP, pour to 300g, one soft swirl',\n          },\n          { time: 150, label: 'Release', action: 'Switch DOWN, let drain' },\n        ],\n      },\n      {\n        id: 'switch-1-dark',\n        method: 'switch',\n        cupSize: '1-cup',\n        cupSizeLabel: '1 Cup (300ml)',\n        waterMl: 300,\n        roast: 'dark',\n        ratio: '1:18',\n        coffee: 16.5,\n        temp: '195°F',\n        technique:\n          'V60 Mode Only. Switch OPEN. Pour slowly center. No immersion.',\n        switchSetting: 'open',\n      },\n      // 2 CUPS (600ml) - Standard V60 Pour-Over\n      {\n        id: 'switch-2-light',\n        method: 'switch',\n        cupSize: '2-cup',\n        cupSizeLabel: '2 Cups (600ml)',\n        waterMl: 600,\n        roast: 'light',\n        ratio: '1:16',\n        coffee: 37.5,\n        temp: '212°F',\n        technique: '5 Pours. Bloom + 4 aggressive pulses. Keep heat high.',\n        switchSetting: 'open',\n        timingCues: [\n          { time: 0, label: 'Bloom', action: 'Pour ~100g, stir' },\n          { time: 45, label: 'Pour 1', action: 'Pour to ~200g' },\n          { time: 75, label: 'Pour 2', action: 'Pour to ~350g' },\n          { time: 105, label: 'Pour 3', action: 'Pour to ~500g' },\n          { time: 135, label: 'Pour 4', action: 'Pour to 600g' },\n        ],\n      },\n      {\n        id: 'switch-2-medium',\n        method: 'switch',\n        cupSize: '2-cup',\n        cupSizeLabel: '2 Cups (600ml)',\n        waterMl: 600,\n        roast: 'medium',\n        ratio: '1:16',\n        coffee: 37.5,\n        temp: '205°F',\n        technique: '3 Pours. Bloom → to 350g → to 600g. Pour in center at end.',\n        switchSetting: 'open',\n        timingCues: [\n          { time: 0, label: 'Bloom', action: 'Pour ~100g' },\n          { time: 45, label: 'Pour 1', action: 'Pour to 350g' },\n          { time: 90, label: 'Pour 2', action: 'Pour to 600g, center pour' },\n        ],\n      },\n      {\n        id: 'switch-2-dark',\n        method: 'switch',\n        cupSize: '2-cup',\n        cupSizeLabel: '2 Cups (600ml)',\n        waterMl: 600,\n        roast: 'dark',\n        ratio: '1:18',\n        coffee: 33,\n        temp: '195°F',\n        technique:\n          'Center Pour Only. Steady in center (quarter size). No stir.',\n        switchSetting: 'open',\n      },\n      // 3-4 CUPS (1000ml) - \"The Sunday Theater\"\n      {\n        id: 'switch-3-4-light',\n        method: 'switch',\n        cupSize: '3-4-cup',\n        cupSizeLabel: '3–4 Cups (1000ml)',\n        waterMl: 1000,\n        roast: 'light',\n        ratio: '1:16',\n        coffee: 62.5,\n        temp: '212°F',\n        technique: 'Excavate Bloom. Stir bottom vigorously. High pour height.',\n        switchSetting: 'open',\n        timingCues: [\n          { time: 0, label: 'Bloom', action: 'Pour 180g, dig to bottom' },\n          { time: 45, label: 'Pour 1', action: 'Pour to 500g' },\n          { time: 105, label: 'Pour 2', action: 'Pour to 800g' },\n          { time: 150, label: 'Pour 3', action: 'Pour to 1000g' },\n        ],\n      },\n      {\n        id: 'switch-3-4-medium',\n        method: 'switch',\n        cupSize: '3-4-cup',\n        cupSizeLabel: '3–4 Cups (1000ml)',\n        waterMl: 1000,\n        roast: 'medium',\n        ratio: '1:16',\n        coffee: 62.5,\n        temp: '212°F',\n        technique: 'Dig Bloom Only. Gentle spiral pours after bloom.',\n        switchSetting: 'open',\n        timingCues: [\n          { time: 0, label: 'Bloom', action: 'Pour 180g, dig bloom' },\n          { time: 45, label: 'Pour 1', action: 'Gentle spiral to 500g' },\n          { time: 105, label: 'Pour 2', action: 'Gentle spiral to 800g' },\n          { time: 150, label: 'Pour 3', action: 'Gentle spiral to 1000g' },\n        ],\n      },\n      {\n        id: 'switch-3-4-dark',\n        method: 'switch',\n        cupSize: '3-4-cup',\n        cupSizeLabel: '3–4 Cups (1000ml)',\n        waterMl: 1000,\n        roast: 'dark',\n        ratio: '1:18',\n        coffee: 56,\n        temp: '195°F',\n        technique:\n          'No Stir. Gentle bloom. Pour very slowly center to avoid overflow.',\n        switchSetting: 'open',\n      },\n    ]\n  }\n\n  /**\n   * Moccamaster recipes by cup size and roast\n   */\n  getMoccamasterRecipes(): CoffeeRecipe[] {\n    return [\n      // 2 CUPS (600ml) - Half Jug / Pulse Flow\n      {\n        id: 'mocca-2-light',\n        method: 'moccamaster',\n        cupSize: '2-cup',\n        cupSizeLabel: '2 Cups (600ml)',\n        waterMl: 600,\n        roast: 'light',\n        ratio: '1:17',\n        coffee: 35,\n        temp: 'Default',\n        technique: 'Stir at 0:30. Pulse flow is slow, so help it get wet.',\n        moccaSetting: 'half',\n        timingCues: [{ time: 30, label: 'Stir', action: 'Stir wet grounds' }],\n      },\n      {\n        id: 'mocca-2-medium',\n        method: 'moccamaster',\n        cupSize: '2-cup',\n        cupSizeLabel: '2 Cups (600ml)',\n        waterMl: 600,\n        roast: 'medium',\n        ratio: '1:17',\n        coffee: 35,\n        temp: 'Default',\n        technique: 'No Stir. Agitation makes medium roast bitter.',\n        moccaSetting: 'half',\n      },\n      {\n        id: 'mocca-2-dark',\n        method: 'moccamaster',\n        cupSize: '2-cup',\n        cupSizeLabel: '2 Cups (600ml)',\n        waterMl: 600,\n        roast: 'dark',\n        ratio: '1:18',\n        coffee: 33,\n        temp: 'Default',\n        technique: 'NO STIR. Use 1:18 ratio. Let pulse flow handle it.',\n        moccaSetting: 'half',\n      },\n      // 8 CUPS / 1L - Standard Batch (Full Jug / Open Flow)\n      {\n        id: 'mocca-8-light',\n        method: 'moccamaster',\n        cupSize: '8-cup',\n        cupSizeLabel: '8 Cups (1 Liter)',\n        waterMl: 1000,\n        roast: 'light',\n        ratio: '1:17',\n        coffee: 59,\n        temp: 'Default',\n        technique: 'Stir at 0:45. Break the crust thoroughly.',\n        moccaSetting: 'full',\n        timingCues: [\n          { time: 45, label: 'Stir', action: 'Break the crust (3 circles)' },\n        ],\n      },\n      {\n        id: 'mocca-8-medium',\n        method: 'moccamaster',\n        cupSize: '8-cup',\n        cupSizeLabel: '8 Cups (1 Liter)',\n        waterMl: 1000,\n        roast: 'medium',\n        ratio: '1:17',\n        coffee: 59,\n        temp: 'Default',\n        technique: 'Gentle Stir at 0:45. Just 3 circles to mix.',\n        moccaSetting: 'full',\n        timingCues: [\n          { time: 45, label: 'Stir', action: 'Gentle stir (3 circles)' },\n        ],\n      },\n      {\n        id: 'mocca-8-dark',\n        method: 'moccamaster',\n        cupSize: '8-cup',\n        cupSizeLabel: '8 Cups (1 Liter)',\n        waterMl: 1000,\n        roast: 'dark',\n        ratio: '1:18',\n        coffee: 56,\n        temp: 'Default',\n        technique:\n          'NO STIR. Use 1:18. Stirring will cause clogging and ashiness.',\n        moccaSetting: 'full',\n      },\n      // 10 CUPS / 1.25L - Max Batch\n      {\n        id: 'mocca-10-light',\n        method: 'moccamaster',\n        cupSize: '10-cup',\n        cupSizeLabel: '10 Cups (1.25 Liters)',\n        waterMl: 1250,\n        roast: 'light',\n        ratio: '1:17',\n        coffee: 73.5,\n        temp: 'Default',\n        technique:\n          'Safety Stir at 1:00. Watch for overflow. Fold filter edges HARD.',\n        moccaSetting: 'full',\n        timingCues: [\n          { time: 60, label: 'Stir', action: 'Safety stir, watch overflow' },\n        ],\n      },\n      {\n        id: 'mocca-10-medium',\n        method: 'moccamaster',\n        cupSize: '10-cup',\n        cupSizeLabel: '10 Cups (1.25 Liters)',\n        waterMl: 1250,\n        roast: 'medium',\n        ratio: '1:17',\n        coffee: 73.5,\n        temp: 'Default',\n        technique: 'Safety Stir at 1:00. Be careful if beans are fresh/bloomy.',\n        moccaSetting: 'full',\n        timingCues: [\n          { time: 60, label: 'Stir', action: 'Safety stir if needed' },\n        ],\n      },\n      {\n        id: 'mocca-10-dark',\n        method: 'moccamaster',\n        cupSize: '10-cup',\n        cupSizeLabel: '10 Cups (1.25 Liters)',\n        waterMl: 1250,\n        roast: 'dark',\n        ratio: '1:18',\n        coffee: 69,\n        temp: 'Default',\n        technique:\n          'ABSOLUTELY NO STIR. Basket full of foam. Stirring causes overflow.',\n        moccaSetting: 'full',\n      },\n    ]\n  }\n\n  /**\n   * Quick reference dose numbers for Hario Switch\n   */\n  getSwitchDoses(): QuickDose[] {\n    return [\n      { label: '1 Cup (Standard)', grams: 18.8 },\n      { label: '2 Cups (Standard)', grams: 37.5 },\n      { label: '2 Cups (Dark)', grams: 33 },\n      { label: '3 Cups (Standard)', grams: 56 },\n      { label: '4 Cups (Standard)', grams: 62.5 },\n    ]\n  }\n\n  /**\n   * Quick reference dose numbers for Moccamaster\n   */\n  getMoccamasterDoses(): QuickDose[] {\n    return [\n      { label: '2 Cups (Standard)', grams: 35 },\n      { label: '2 Cups (Dark)', grams: 33 },\n      { label: '4 Cups (Standard)', grams: 47 },\n      { label: '6 Cups (Standard)', grams: 59 },\n      { label: '8 Cups (Standard)', grams: 65 },\n      { label: '8 Cups (Dark)', grams: 56 },\n      { label: '10 Cups (Standard)', grams: 73.5 },\n      { label: '10 Cups (Dark)', grams: 69 },\n    ]\n  }\n\n  /**\n   * Golden Rules that apply to every cup\n   */\n  getGoldenRules(): GoldenRule[] {\n    return [\n      {\n        title: 'RDT Spray',\n        description:\n          'Spray beans with one spritz of water before grinding. Shake to coat. Prevents static.',\n      },\n      {\n        title: 'Filter Rinse',\n        description:\n          'ALWAYS rinse paper filters with hot water before adding coffee. Removes cardboard taste.',\n      },\n      {\n        title: 'Water Quality',\n        description:\n          'Moccamaster: Filtered tap is fine. Switch: Use Third Wave Water for fruit clarity.',\n      },\n      {\n        title: 'Bean Storage',\n        description:\n          'Keep in original bag, squeezed tight, in cupboard. Freeze if not finishing in 3 weeks.',\n      },\n    ]\n  }\n\n  /**\n   * Get all recipes for a specific method\n   */\n  getRecipesByMethod(method: BrewMethod): CoffeeRecipe[] {\n    return method === 'switch'\n      ? this.getSwitchRecipes()\n      : this.getMoccamasterRecipes()\n  }\n\n  /**\n   * Get a recipe by method, cup size, and roast\n   */\n  getRecipe(\n    method: BrewMethod,\n    cupSize: CupSize,\n    roast: RoastLevel\n  ): CoffeeRecipe | null {\n    const recipes = this.getRecipesByMethod(method)\n    return recipes.find(r => r.cupSize === cupSize && r.roast === roast) || null\n  }\n\n  /**\n   * Get available cup sizes for a method\n   */\n  getCupSizes(method: BrewMethod): { value: CupSize; label: string }[] {\n    if (method === 'switch') {\n      return [\n        { value: '1-cup', label: '1 Cup (300ml)' },\n        { value: '2-cup', label: '2 Cups (600ml)' },\n        { value: '3-4-cup', label: '3–4 Cups (1L)' },\n      ]\n    }\n    return [\n      { value: '2-cup', label: '2 Cups (600ml)' },\n      { value: '8-cup', label: '8 Cups (1L)' },\n      { value: '10-cup', label: '10 Cups (1.25L)' },\n    ]\n  }\n\n  /**\n   * Get recommended recipe based on time of day\n   */\n  getRecommendedRecipe(): {\n    method: BrewMethod\n    cupSize: CupSize\n    roast: RoastLevel\n  } {\n    const hour = new Date().getHours()\n    const day = new Date().getDay()\n\n    // Sunday brunch - big batch\n    if (day === 0 && hour >= 8 && hour < 14) {\n      return { method: 'switch', cupSize: '3-4-cup', roast: 'light' }\n    }\n\n    // Morning - Moccamaster batch\n    if (hour >= 5 && hour < 12) {\n      return { method: 'moccamaster', cupSize: '8-cup', roast: 'medium' }\n    }\n\n    // Afternoon - single cup pour-over\n    if (hour >= 12 && hour < 18) {\n      return { method: 'switch', cupSize: '1-cup', roast: 'medium' }\n    }\n\n    // Default\n    return { method: 'moccamaster', cupSize: '8-cup', roast: 'medium' }\n  }\n\n  /**\n   * Get all guide data\n   */\n  getGuideData(): CoffeeGuideData {\n    return {\n      roastStrategies: this.getRoastStrategies(),\n      switchRecipes: this.getSwitchRecipes(),\n      moccamasterRecipes: this.getMoccamasterRecipes(),\n      switchDoses: this.getSwitchDoses(),\n      moccamasterDoses: this.getMoccamasterDoses(),\n    }\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1612, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/components/dashboard/coffee-card.tsx"],"sourcesContent":["'use client'\n\nimport { DashboardCardHeader } from '@/components/dashboard/dashboard-card-header'\nimport { Button } from '@/components/ui/button'\nimport { Skeleton } from '@/components/ui/skeleton'\nimport { apiGet } from '@/lib/api/client'\nimport { CoffeeService } from '@/lib/services/coffee.service'\nimport type { CoffeeConfig, CoffeeRecipe } from '@/lib/types/coffee.types'\nimport { ArrowRight, Coffee, Droplets, Flame, Scale } from 'lucide-react'\nimport Link from 'next/link'\nimport { useCallback, useEffect, useState } from 'react'\n\n// Fallback service for when database is unavailable\nconst fallbackService = new CoffeeService()\n\nexport function CoffeeCard() {\n  const [recipe, setRecipe] = useState<CoffeeRecipe | null>(null)\n  const [timeLabel, setTimeLabel] = useState('')\n  const [quickDoses, setQuickDoses] = useState<\n    { label: string; grams: number }[]\n  >([])\n  const [isLoading, setIsLoading] = useState(true)\n\n  const loadData = useCallback(async () => {\n    const hour = new Date().getHours()\n    const day = new Date().getDay()\n\n    try {\n      const response = await apiGet<CoffeeConfig>('/api/coffee/config')\n\n      if (response.success && response.data) {\n        const config = response.data\n\n        // Find matching recommendation\n        const recommendations = config.recommendations\n          .filter(r => r.isActive !== false)\n          .sort((a, b) => (b.priority || 0) - (a.priority || 0))\n\n        let matched = recommendations.find(r => {\n          const dayMatch = r.dayOfWeek === null || r.dayOfWeek === day\n          const hourMatch = hour >= r.hourStart && hour < r.hourEnd\n          return dayMatch && hourMatch\n        })\n\n        if (!matched && recommendations.length > 0) {\n          matched = recommendations[recommendations.length - 1]\n        }\n\n        // Find the recipe\n        if (matched) {\n          const recipeData = config.recipes.find(\n            r =>\n              r.method === matched!.method &&\n              r.cupSize === matched!.cupSize &&\n              r.roast === matched!.roast\n          )\n          if (recipeData) {\n            setRecipe(recipeData)\n          }\n          // Use the recommendation name as the time label\n          setTimeLabel(matched.name)\n        }\n\n        // Build quick doses from config (pick 4 representative ones)\n        const doses: { label: string; grams: number }[] = []\n        const switchDoses = config.quickDoses.filter(d => d.method === 'switch')\n        const moccaDoses = config.quickDoses.filter(\n          d => d.method === 'moccamaster'\n        )\n\n        // Pick 2 from each method\n        if (switchDoses[0])\n          doses.push({ label: '1c', grams: switchDoses[0].grams })\n        if (switchDoses[1])\n          doses.push({ label: '2c', grams: switchDoses[1].grams })\n\n        // Find 8-cup and 10-cup moccamaster doses\n        const mocca8 = moccaDoses.find(d => d.label.includes('8'))\n        const mocca10 = moccaDoses.find(d => d.label.includes('10'))\n        if (mocca8) doses.push({ label: '8c', grams: mocca8.grams })\n        if (mocca10) doses.push({ label: '10c', grams: mocca10.grams })\n\n        setQuickDoses(doses)\n      } else {\n        throw new Error('Failed to load config')\n      }\n    } catch (error) {\n      console.error('Failed to load coffee config, using fallback:', error)\n\n      // Use fallback service\n      const recommended = fallbackService.getRecommendedRecipe()\n      const recipeData = fallbackService.getRecipe(\n        recommended.method,\n        recommended.cupSize,\n        recommended.roast\n      )\n      if (recipeData) {\n        setRecipe(recipeData)\n      }\n\n      // Set time-based label from fallback logic\n      if (day === 0 && hour >= 8 && hour < 14) {\n        setTimeLabel('Sunday Brunch')\n      } else if (hour >= 5 && hour < 12) {\n        setTimeLabel('Morning Batch')\n      } else if (hour >= 12 && hour < 18) {\n        setTimeLabel('Afternoon Cup')\n      } else {\n        setTimeLabel('Evening')\n      }\n\n      // Fallback quick doses\n      setQuickDoses([\n        { label: '1c', grams: 18.8 },\n        { label: '2c', grams: 37.5 },\n        { label: '8c', grams: 59 },\n        { label: '10c', grams: 73.5 },\n      ])\n    } finally {\n      setIsLoading(false)\n    }\n  }, [])\n\n  useEffect(() => {\n    loadData()\n  }, [loadData])\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-4\">\n        <DashboardCardHeader\n          icon={\n            <Coffee className=\"size-5 text-amber-600 dark:text-amber-400\" />\n          }\n          iconContainerClassName=\"bg-amber-500/10\"\n          title=\"Coffee Guide\"\n          viewHref=\"/coffee\"\n          viewLabel=\"View\"\n        />\n        <Skeleton className=\"h-32 w-full\" />\n        <Skeleton className=\"h-16 w-full\" />\n      </div>\n    )\n  }\n\n  if (!recipe) {\n    return (\n      <div className=\"space-y-4\">\n        <DashboardCardHeader\n          icon={\n            <Coffee className=\"size-5 text-amber-600 dark:text-amber-400\" />\n          }\n          iconContainerClassName=\"bg-amber-500/10\"\n          title=\"Coffee Guide\"\n          viewHref=\"/coffee\"\n          viewLabel=\"View\"\n        />\n        <div className=\"text-muted-foreground flex items-center gap-2\">\n          <Coffee className=\"size-5\" />\n          <span className=\"text-sm\">No recipe available</span>\n        </div>\n      </div>\n    )\n  }\n\n  const MethodIcon = recipe.method === 'switch' ? Droplets : Coffee\n\n  return (\n    <div className=\"space-y-4\">\n      <DashboardCardHeader\n        icon={<Coffee className=\"size-5 text-amber-600 dark:text-amber-400\" />}\n        iconContainerClassName=\"bg-amber-500/10\"\n        title=\"Coffee Guide\"\n        viewHref=\"/coffee\"\n        viewLabel=\"View\"\n      />\n      <p className=\"text-muted-foreground -mt-2 text-xs\">\n        {timeLabel} recommendation\n      </p>\n\n      {/* Recommended Recipe - Hero Display */}\n      <div className=\"rounded-xl border border-amber-500/30 bg-gradient-to-br from-amber-50/50 to-orange-50/30 p-4 dark:from-amber-950/30 dark:to-orange-950/20\">\n        <div className=\"mb-3 flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <MethodIcon className=\"size-4 text-amber-600 dark:text-amber-400\" />\n            <span className=\"text-sm font-medium\">\n              {recipe.method === 'switch' ? 'Hario Switch' : 'Moccamaster'}\n            </span>\n          </div>\n          <div className=\"flex items-center gap-1.5\">\n            <Flame className=\"size-3 text-amber-600\" />\n            <span className=\"text-muted-foreground text-xs capitalize\">\n              {recipe.roast}\n            </span>\n          </div>\n        </div>\n\n        {/* Big Dose Number */}\n        <div className=\"mb-2 flex items-baseline gap-3\">\n          <div className=\"flex items-center gap-2\">\n            <Scale className=\"size-5 text-amber-600\" />\n            <span className=\"text-3xl font-bold tabular-nums\">\n              {recipe.coffee}g\n            </span>\n          </div>\n          <span className=\"text-muted-foreground text-sm\">\n            : {recipe.waterMl}g water\n          </span>\n        </div>\n\n        <div className=\"text-muted-foreground flex items-center gap-2 text-xs\">\n          <span className=\"text-foreground font-medium\">\n            {recipe.cupSizeLabel}\n          </span>\n          <span>•</span>\n          <span>{recipe.ratio}</span>\n          <span>•</span>\n          <span>{recipe.temp}</span>\n        </div>\n      </div>\n\n      {/* Quick Dose Reference */}\n      <div>\n        <div className=\"text-muted-foreground mb-2 text-[10px] font-medium tracking-wide uppercase\">\n          Quick Doses\n        </div>\n        <div className=\"grid grid-cols-4 gap-1.5\">\n          {quickDoses.map((dose, idx) => (\n            <div\n              key={idx}\n              className=\"bg-muted/30 rounded-lg border px-2 py-1.5 text-center\"\n            >\n              <div className=\"font-mono text-sm font-bold\">{dose.grams}g</div>\n              <div className=\"text-muted-foreground text-[10px]\">\n                {dose.label}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* CTA */}\n      <Link href=\"/coffee\">\n        <Button\n          size=\"sm\"\n          className=\"w-full gap-2 bg-amber-600 text-white hover:bg-amber-700\"\n        >\n          <Coffee className=\"size-4\" />\n          Open Full Guide\n          <ArrowRight className=\"size-3.5\" />\n        </Button>\n      </Link>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAVA;;;;;;;;;;AAYA,oDAAoD;AACpD,MAAM,kBAAkB,IAAI,qJAAa;AAElC,SAAS;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAsB;IAC1D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAE1C,EAAE;IACJ,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,MAAM,WAAW,IAAA,oNAAW,EAAC;QAC3B,MAAM,OAAO,IAAI,OAAO,QAAQ;QAChC,MAAM,MAAM,IAAI,OAAO,MAAM;QAE7B,IAAI;YACF,MAAM,WAAW,MAAM,IAAA,8HAAM,EAAe;YAE5C,IAAI,SAAS,OAAO,IAAI,SAAS,IAAI,EAAE;gBACrC,MAAM,SAAS,SAAS,IAAI;gBAE5B,+BAA+B;gBAC/B,MAAM,kBAAkB,OAAO,eAAe,CAC3C,MAAM,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,OAC3B,IAAI,CAAC,CAAC,GAAG,IAAM,CAAC,EAAE,QAAQ,IAAI,CAAC,IAAI,CAAC,EAAE,QAAQ,IAAI,CAAC;gBAEtD,IAAI,UAAU,gBAAgB,IAAI,CAAC,CAAA;oBACjC,MAAM,WAAW,EAAE,SAAS,KAAK,QAAQ,EAAE,SAAS,KAAK;oBACzD,MAAM,YAAY,QAAQ,EAAE,SAAS,IAAI,OAAO,EAAE,OAAO;oBACzD,OAAO,YAAY;gBACrB;gBAEA,IAAI,CAAC,WAAW,gBAAgB,MAAM,GAAG,GAAG;oBAC1C,UAAU,eAAe,CAAC,gBAAgB,MAAM,GAAG,EAAE;gBACvD;gBAEA,kBAAkB;gBAClB,IAAI,SAAS;oBACX,MAAM,aAAa,OAAO,OAAO,CAAC,IAAI,CACpC,CAAA,IACE,EAAE,MAAM,KAAK,QAAS,MAAM,IAC5B,EAAE,OAAO,KAAK,QAAS,OAAO,IAC9B,EAAE,KAAK,KAAK,QAAS,KAAK;oBAE9B,IAAI,YAAY;wBACd,UAAU;oBACZ;oBACA,gDAAgD;oBAChD,aAAa,QAAQ,IAAI;gBAC3B;gBAEA,6DAA6D;gBAC7D,MAAM,QAA4C,EAAE;gBACpD,MAAM,cAAc,OAAO,UAAU,CAAC,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,KAAK;gBAC/D,MAAM,aAAa,OAAO,UAAU,CAAC,MAAM,CACzC,CAAA,IAAK,EAAE,MAAM,KAAK;gBAGpB,0BAA0B;gBAC1B,IAAI,WAAW,CAAC,EAAE,EAChB,MAAM,IAAI,CAAC;oBAAE,OAAO;oBAAM,OAAO,WAAW,CAAC,EAAE,CAAC,KAAK;gBAAC;gBACxD,IAAI,WAAW,CAAC,EAAE,EAChB,MAAM,IAAI,CAAC;oBAAE,OAAO;oBAAM,OAAO,WAAW,CAAC,EAAE,CAAC,KAAK;gBAAC;gBAExD,0CAA0C;gBAC1C,MAAM,SAAS,WAAW,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,CAAC,QAAQ,CAAC;gBACrD,MAAM,UAAU,WAAW,IAAI,CAAC,CAAA,IAAK,EAAE,KAAK,CAAC,QAAQ,CAAC;gBACtD,IAAI,QAAQ,MAAM,IAAI,CAAC;oBAAE,OAAO;oBAAM,OAAO,OAAO,KAAK;gBAAC;gBAC1D,IAAI,SAAS,MAAM,IAAI,CAAC;oBAAE,OAAO;oBAAO,OAAO,QAAQ,KAAK;gBAAC;gBAE7D,cAAc;YAChB,OAAO;gBACL,MAAM,IAAI,MAAM;YAClB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,iDAAiD;YAE/D,uBAAuB;YACvB,MAAM,cAAc,gBAAgB,oBAAoB;YACxD,MAAM,aAAa,gBAAgB,SAAS,CAC1C,YAAY,MAAM,EAClB,YAAY,OAAO,EACnB,YAAY,KAAK;YAEnB,IAAI,YAAY;gBACd,UAAU;YACZ;YAEA,2CAA2C;YAC3C,IAAI,QAAQ,KAAK,QAAQ,KAAK,OAAO,IAAI;gBACvC,aAAa;YACf,OAAO,IAAI,QAAQ,KAAK,OAAO,IAAI;gBACjC,aAAa;YACf,OAAO,IAAI,QAAQ,MAAM,OAAO,IAAI;gBAClC,aAAa;YACf,OAAO;gBACL,aAAa;YACf;YAEA,uBAAuB;YACvB,cAAc;gBACZ;oBAAE,OAAO;oBAAM,OAAO;gBAAK;gBAC3B;oBAAE,OAAO;oBAAM,OAAO;gBAAK;gBAC3B;oBAAE,OAAO;oBAAM,OAAO;gBAAG;gBACzB;oBAAE,OAAO;oBAAO,OAAO;gBAAK;aAC7B;QACH,SAAU;YACR,aAAa;QACf;IACF,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR;IACF,GAAG;QAAC;KAAS;IAEb,IAAI,WAAW;QACb,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC,8KAAmB;oBAClB,oBACE,8OAAC,gNAAM;wBAAC,WAAU;;;;;;oBAEpB,wBAAuB;oBACvB,OAAM;oBACN,UAAS;oBACT,WAAU;;;;;;8BAEZ,8OAAC,yIAAQ;oBAAC,WAAU;;;;;;8BACpB,8OAAC,yIAAQ;oBAAC,WAAU;;;;;;;;;;;;IAG1B;IAEA,IAAI,CAAC,QAAQ;QACX,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC,8KAAmB;oBAClB,oBACE,8OAAC,gNAAM;wBAAC,WAAU;;;;;;oBAEpB,wBAAuB;oBACvB,OAAM;oBACN,UAAS;oBACT,WAAU;;;;;;8BAEZ,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,gNAAM;4BAAC,WAAU;;;;;;sCAClB,8OAAC;4BAAK,WAAU;sCAAU;;;;;;;;;;;;;;;;;;IAIlC;IAEA,MAAM,aAAa,OAAO,MAAM,KAAK,WAAW,sNAAQ,GAAG,gNAAM;IAEjE,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,8KAAmB;gBAClB,oBAAM,8OAAC,gNAAM;oBAAC,WAAU;;;;;;gBACxB,wBAAuB;gBACvB,OAAM;gBACN,UAAS;gBACT,WAAU;;;;;;0BAEZ,8OAAC;gBAAE,WAAU;;oBACV;oBAAU;;;;;;;0BAIb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAW,WAAU;;;;;;kDACtB,8OAAC;wCAAK,WAAU;kDACb,OAAO,MAAM,KAAK,WAAW,iBAAiB;;;;;;;;;;;;0CAGnD,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,6MAAK;wCAAC,WAAU;;;;;;kDACjB,8OAAC;wCAAK,WAAU;kDACb,OAAO,KAAK;;;;;;;;;;;;;;;;;;kCAMnB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,6MAAK;wCAAC,WAAU;;;;;;kDACjB,8OAAC;wCAAK,WAAU;;4CACb,OAAO,MAAM;4CAAC;;;;;;;;;;;;;0CAGnB,8OAAC;gCAAK,WAAU;;oCAAgC;oCAC3C,OAAO,OAAO;oCAAC;;;;;;;;;;;;;kCAItB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAK,WAAU;0CACb,OAAO,YAAY;;;;;;0CAEtB,8OAAC;0CAAK;;;;;;0CACN,8OAAC;0CAAM,OAAO,KAAK;;;;;;0CACnB,8OAAC;0CAAK;;;;;;0CACN,8OAAC;0CAAM,OAAO,IAAI;;;;;;;;;;;;;;;;;;0BAKtB,8OAAC;;kCACC,8OAAC;wBAAI,WAAU;kCAA6E;;;;;;kCAG5F,8OAAC;wBAAI,WAAU;kCACZ,WAAW,GAAG,CAAC,CAAC,MAAM,oBACrB,8OAAC;gCAEC,WAAU;;kDAEV,8OAAC;wCAAI,WAAU;;4CAA+B,KAAK,KAAK;4CAAC;;;;;;;kDACzD,8OAAC;wCAAI,WAAU;kDACZ,KAAK,KAAK;;;;;;;+BALR;;;;;;;;;;;;;;;;0BAab,8OAAC,uKAAI;gBAAC,MAAK;0BACT,cAAA,8OAAC,qIAAM;oBACL,MAAK;oBACL,WAAU;;sCAEV,8OAAC,gNAAM;4BAAC,WAAU;;;;;;wBAAW;sCAE7B,8OAAC,gOAAU;4BAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;AAKhC"}},
    {"offset": {"line": 2125, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/components/dashboard/cooking-widget.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { DashboardCardHeader } from '@/components/dashboard/dashboard-card-header'\r\nimport { Button } from '@/components/ui/button'\r\nimport { apiGet } from '@/lib/api/client'\r\nimport type { MealPlan, Recipe } from '@/lib/types/cooking.types'\r\nimport { format } from 'date-fns'\r\nimport { ChefHat, UtensilsCrossed } from 'lucide-react'\r\nimport Link from 'next/link'\r\nimport { useEffect, useState } from 'react'\r\n\r\nexport function CookingWidget() {\r\n  const [todayMeals, setTodayMeals] = useState<{\r\n    breakfast?: string\r\n    lunch?: string\r\n    dinner?: string\r\n  }>({})\r\n  const [mealPlan, setMealPlan] = useState<MealPlan | null>(null)\r\n  const [recipes, setRecipes] = useState<Recipe[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    fetchTodayMeals()\r\n  }, [])\r\n\r\n  const fetchTodayMeals = async () => {\r\n    setLoading(true)\r\n    try {\r\n      const today = new Date()\r\n      const weekStart = new Date(today)\r\n      weekStart.setDate(today.getDate() - today.getDay() + 1) // Monday\r\n\r\n      const [mealPlanRes, recipesRes] = await Promise.all([\r\n        apiGet<MealPlan>(\r\n          `/api/cooking/meal-plans?week_start=${weekStart.toISOString()}`\r\n        ),\r\n        apiGet<Recipe[]>('/api/cooking/recipes?is_favorite=true'),\r\n      ])\r\n\r\n      if (mealPlanRes.success && mealPlanRes.data) {\r\n        setMealPlan(mealPlanRes.data)\r\n        const dayName = format(\r\n          today,\r\n          'EEEE'\r\n        ).toLowerCase() as keyof typeof mealPlanRes.data.meals\r\n        const dayMeals = mealPlanRes.data.meals[dayName]\r\n        if (dayMeals) {\r\n          setTodayMeals({\r\n            breakfast: dayMeals.breakfast,\r\n            lunch: dayMeals.lunch,\r\n            dinner: dayMeals.dinner,\r\n          })\r\n        }\r\n      }\r\n\r\n      if (recipesRes.success && recipesRes.data) {\r\n        setRecipes(recipesRes.data)\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to fetch cooking data:', error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const getRecipeName = (recipeId: string | undefined): string => {\r\n    if (!recipeId) return ''\r\n    const recipe = recipes.find(r => r.id === recipeId)\r\n    return recipe?.name || 'No recipe'\r\n  }\r\n\r\n  const hasMeals = todayMeals.breakfast || todayMeals.lunch || todayMeals.dinner\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"animate-pulse\">\r\n        <div className=\"mb-4 flex items-center gap-2\">\r\n          <div className=\"bg-muted size-5 rounded\" />\r\n          <div className=\"bg-muted h-5 w-20 rounded\" />\r\n        </div>\r\n        <div className=\"space-y-2\">\r\n          <div className=\"bg-muted h-12 rounded-lg\" />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <DashboardCardHeader\r\n        icon={<ChefHat className=\"size-5 text-orange-500\" />}\r\n        iconContainerClassName=\"bg-orange-500/10\"\r\n        title=\"Cooking\"\r\n        viewHref=\"/cooking\"\r\n        viewLabel=\"View\"\r\n      />\r\n\r\n      {/* Today's Meals */}\r\n      {hasMeals ? (\r\n        <div className=\"space-y-2\">\r\n          {todayMeals.breakfast && (\r\n            <div className=\"flex items-center gap-3 rounded-lg border border-amber-500/20 bg-amber-500/5 p-2.5\">\r\n              <UtensilsCrossed className=\"size-4 shrink-0 text-amber-500\" />\r\n              <div className=\"min-w-0 flex-1\">\r\n                <div className=\"text-muted-foreground mb-0.5 text-xs\">\r\n                  Breakfast\r\n                </div>\r\n                <div className=\"truncate text-sm font-medium\">\r\n                  {getRecipeName(todayMeals.breakfast)}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {todayMeals.lunch && (\r\n            <div className=\"flex items-center gap-3 rounded-lg border border-blue-500/20 bg-blue-500/5 p-2.5\">\r\n              <UtensilsCrossed className=\"size-4 shrink-0 text-blue-500\" />\r\n              <div className=\"min-w-0 flex-1\">\r\n                <div className=\"text-muted-foreground mb-0.5 text-xs\">\r\n                  Lunch\r\n                </div>\r\n                <div className=\"truncate text-sm font-medium\">\r\n                  {getRecipeName(todayMeals.lunch)}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {todayMeals.dinner && (\r\n            <div className=\"flex items-center gap-3 rounded-lg border border-purple-500/20 bg-purple-500/5 p-2.5\">\r\n              <UtensilsCrossed className=\"size-4 shrink-0 text-purple-500\" />\r\n              <div className=\"min-w-0 flex-1\">\r\n                <div className=\"text-muted-foreground mb-0.5 text-xs\">\r\n                  Dinner\r\n                </div>\r\n                <div className=\"truncate text-sm font-medium\">\r\n                  {getRecipeName(todayMeals.dinner)}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <div className=\"py-4 text-center\">\r\n          <p className=\"text-muted-foreground mb-2 text-sm\">\r\n            No meals planned for today\r\n          </p>\r\n          <Link href=\"/cooking\">\r\n            <Button variant=\"outline\" size=\"sm\">\r\n              Plan Meals\r\n            </Button>\r\n          </Link>\r\n        </div>\r\n      )}\r\n\r\n      {/* Quick stats */}\r\n      <div className=\"text-muted-foreground mt-4 flex items-center justify-between border-t pt-3 text-xs\">\r\n        <span>Favorites: {recipes.length}</span>\r\n        <Link\r\n          href=\"/cooking\"\r\n          className=\"hover:text-foreground transition-colors\"\r\n        >\r\n          Meal Plan →\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2462, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/components/ui/badge.tsx"],"sourcesContent":["import { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\nimport * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nconst badgeVariants = cva(\n  'focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive inline-flex w-fit shrink-0 items-center justify-center gap-1 overflow-hidden rounded-md border px-2 py-0.5 text-xs font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] [&>svg]:pointer-events-none [&>svg]:size-3',\n  {\n    variants: {\n      variant: {\n        default:\n          'bg-primary text-primary-foreground [a&]:hover:bg-primary/90 border-transparent',\n        secondary:\n          'bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90 border-transparent',\n        destructive:\n          'bg-destructive [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60 border-transparent text-white',\n        outline:\n          'text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  }\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'span'> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : 'span'\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AAGA;;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,kZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 2508, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/components/dashboard/fitness-widget.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { DashboardCardHeader } from '@/components/dashboard/dashboard-card-header'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { apiGet } from '@/lib/api/client'\r\nimport type {\r\n  ConsistencyStats,\r\n  DayOfWeek,\r\n  WeeklyRoutine,\r\n  Workout,\r\n} from '@/lib/types/fitness.types'\r\nimport { cn } from '@/lib/utils'\r\nimport {\r\n  AlertTriangle,\r\n  Check,\r\n  ChevronRight,\r\n  Dumbbell,\r\n  Flame,\r\n  Footprints,\r\n  Moon,\r\n  Sun,\r\n} from 'lucide-react'\r\nimport Link from 'next/link'\r\nimport { useEffect, useState } from 'react'\r\n\r\n/**\r\n * FitnessWidget - A compact dashboard widget showing today's fitness at a glance.\r\n *\r\n * Shows:\r\n * - Current streak\r\n * - Morning/night routine status\r\n * - Today's workout summary\r\n * - Quick link to full fitness page\r\n */\r\nexport function FitnessWidget() {\r\n  const [routine, setRoutine] = useState<WeeklyRoutine | null>(null)\r\n  const [todayWorkout, setTodayWorkout] = useState<Workout | null>(null)\r\n  const [consistencyStats, setConsistencyStats] =\r\n    useState<ConsistencyStats | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  const getCurrentDay = (): DayOfWeek => {\r\n    return new Date()\r\n      .toLocaleDateString('en-US', { weekday: 'long' })\r\n      .toLowerCase() as DayOfWeek\r\n  }\r\n\r\n  const getCurrentWeekNumber = (): number => {\r\n    const now = new Date()\r\n    const startOfYear = new Date(now.getFullYear(), 0, 1)\r\n    const days = Math.floor(\r\n      (now.getTime() - startOfYear.getTime()) / (24 * 60 * 60 * 1000)\r\n    )\r\n    return Math.ceil((days + startOfYear.getDay() + 1) / 7)\r\n  }\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const day = getCurrentDay()\r\n        const [routineRes, workoutRes, consistencyRes] = await Promise.all([\r\n          apiGet<WeeklyRoutine>('/api/fitness/routine'),\r\n          apiGet<Workout>(`/api/fitness/workout/${day}`),\r\n          apiGet<ConsistencyStats>('/api/fitness/consistency'),\r\n        ])\r\n\r\n        if (routineRes.success && routineRes.data) {\r\n          setRoutine(routineRes.data)\r\n        }\r\n\r\n        if (workoutRes.success && workoutRes.data) {\r\n          setTodayWorkout(workoutRes.data)\r\n        }\r\n\r\n        if (consistencyRes.success && consistencyRes.data) {\r\n          setConsistencyStats(consistencyRes.data)\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to fetch fitness data', error)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    fetchData()\r\n  }, [])\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"animate-pulse\">\r\n        <div className=\"mb-4 flex items-center gap-2\">\r\n          <div className=\"bg-muted size-5 rounded\" />\r\n          <div className=\"bg-muted h-5 w-20 rounded\" />\r\n        </div>\r\n        <div className=\"space-y-3\">\r\n          <div className=\"bg-muted h-12 rounded-lg\" />\r\n          <div className=\"bg-muted h-12 rounded-lg\" />\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!routine) {\r\n    return null\r\n  }\r\n\r\n  const today = getCurrentDay()\r\n  const weekNumber = getCurrentWeekNumber()\r\n  const week = routine.weeks.find(w => w.weekNumber === weekNumber)\r\n  const todayData = week?.days[today]\r\n  const scheduleInfo = routine.schedule[today]\r\n  const hasInjuryProtocol = routine.injuryProtocol?.status === 'active'\r\n  const isRestDay = scheduleInfo?.focus === 'Rest'\r\n\r\n  const morningDone = todayData?.morningRoutine?.completed || false\r\n  const nightDone = todayData?.nightRoutine?.completed || false\r\n  const workoutDone = todayData?.workout?.completed || false\r\n\r\n  // Calculate today's progress\r\n  const totalTasks = isRestDay ? 2 : 3 // morning, night, and workout (if not rest day)\r\n  const completedTasks =\r\n    (morningDone ? 1 : 0) +\r\n    (nightDone ? 1 : 0) +\r\n    (workoutDone && !isRestDay ? 1 : 0)\r\n\r\n  return (\r\n    <div>\r\n      <DashboardCardHeader\r\n        icon={<Dumbbell className=\"size-5 text-blue-500\" />}\r\n        iconContainerClassName=\"bg-blue-500/10\"\r\n        title=\"Fitness\"\r\n        badge={\r\n          hasInjuryProtocol ? (\r\n            <Badge\r\n              variant=\"destructive\"\r\n              className=\"h-4 gap-0.5 px-1.5 text-[10px]\"\r\n            >\r\n              <AlertTriangle className=\"size-2.5\" />\r\n            </Badge>\r\n          ) : undefined\r\n        }\r\n        viewHref=\"/fitness\"\r\n        viewLabel=\"View\"\r\n        rightExtra={\r\n          consistencyStats && consistencyStats.currentStreak > 0 ? (\r\n            <div className=\"flex items-center gap-1 text-orange-500\">\r\n              <Flame className=\"size-4\" />\r\n              <span className=\"text-sm font-bold\">\r\n                {consistencyStats.currentStreak}\r\n              </span>\r\n            </div>\r\n          ) : undefined\r\n        }\r\n      />\r\n\r\n      {/* Progress indicator */}\r\n      <div className=\"mb-4 flex gap-1\">\r\n        {Array.from({ length: totalTasks }).map((_, i) => (\r\n          <div\r\n            key={i}\r\n            className={cn(\r\n              'h-1 flex-1 rounded-full transition-colors',\r\n              i < completedTasks ? 'bg-green-500' : 'bg-muted'\r\n            )}\r\n          />\r\n        ))}\r\n      </div>\r\n\r\n      {/* Today's Summary */}\r\n      <div className=\"space-y-2\">\r\n        {/* Morning Routine */}\r\n        <div\r\n          className={cn(\r\n            'flex items-center gap-3 rounded-lg border p-2.5 transition-colors',\r\n            morningDone\r\n              ? 'border-green-500/20 bg-green-500/5'\r\n              : 'border-amber-500/20 bg-amber-500/5'\r\n          )}\r\n        >\r\n          <div\r\n            className={cn(\r\n              'rounded-md p-1.5',\r\n              morningDone ? 'bg-green-500/10' : 'bg-amber-500/10'\r\n            )}\r\n          >\r\n            <Sun\r\n              className={cn(\r\n                'size-4',\r\n                morningDone ? 'text-green-500' : 'text-amber-500'\r\n              )}\r\n            />\r\n          </div>\r\n          <div className=\"min-w-0 flex-1\">\r\n            <div className=\"text-sm font-medium\">\r\n              {routine.dailyRoutines.morning.name}\r\n            </div>\r\n            <div className=\"text-muted-foreground text-[11px]\">\r\n              {routine.dailyRoutines.morning.duration}m ·{' '}\r\n              {routine.dailyRoutines.morning.exercises.length} stretches\r\n            </div>\r\n          </div>\r\n          {morningDone && <Check className=\"size-4 shrink-0 text-green-500\" />}\r\n        </div>\r\n\r\n        {/* Today's Workout / Rest Day */}\r\n        {isRestDay ? (\r\n          <div className=\"flex items-center gap-3 rounded-lg border border-blue-500/20 bg-blue-500/5 p-2.5\">\r\n            <div className=\"rounded-md bg-blue-500/10 p-1.5\">\r\n              <Footprints className=\"size-4 text-blue-500\" />\r\n            </div>\r\n            <div className=\"min-w-0 flex-1\">\r\n              <div className=\"text-sm font-medium\">Rest Day</div>\r\n              <div className=\"text-muted-foreground text-[11px]\">\r\n                {scheduleInfo?.goal || '10,000 Steps'}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : todayWorkout ? (\r\n          <Link href=\"/fitness\" className=\"block\">\r\n            <div\r\n              className={cn(\r\n                'hover:bg-muted/50 flex items-center gap-3 rounded-lg border p-2.5 transition-colors',\r\n                workoutDone\r\n                  ? 'border-green-500/20 bg-green-500/5'\r\n                  : 'border-blue-500/20 bg-blue-500/5'\r\n              )}\r\n            >\r\n              <div\r\n                className={cn(\r\n                  'rounded-md p-1.5',\r\n                  workoutDone ? 'bg-green-500/10' : 'bg-blue-500/10'\r\n                )}\r\n              >\r\n                <Dumbbell\r\n                  className={cn(\r\n                    'size-4',\r\n                    workoutDone ? 'text-green-500' : 'text-blue-500'\r\n                  )}\r\n                />\r\n              </div>\r\n              <div className=\"min-w-0 flex-1\">\r\n                <div className=\"truncate text-sm font-medium\">\r\n                  {todayWorkout.name}\r\n                </div>\r\n                <div className=\"text-muted-foreground text-[11px]\">\r\n                  {scheduleInfo?.focus} · {todayWorkout.exercises.length}{' '}\r\n                  exercises\r\n                </div>\r\n              </div>\r\n              {workoutDone ? (\r\n                <Check className=\"size-4 shrink-0 text-green-500\" />\r\n              ) : (\r\n                <ChevronRight className=\"text-muted-foreground size-4 shrink-0\" />\r\n              )}\r\n            </div>\r\n          </Link>\r\n        ) : null}\r\n\r\n        {/* Night Routine */}\r\n        <div\r\n          className={cn(\r\n            'flex items-center gap-3 rounded-lg border p-2.5 transition-colors',\r\n            nightDone\r\n              ? 'border-green-500/20 bg-green-500/5'\r\n              : 'border-indigo-500/20 bg-indigo-500/5'\r\n          )}\r\n        >\r\n          <div\r\n            className={cn(\r\n              'rounded-md p-1.5',\r\n              nightDone ? 'bg-green-500/10' : 'bg-indigo-500/10'\r\n            )}\r\n          >\r\n            <Moon\r\n              className={cn(\r\n                'size-4',\r\n                nightDone ? 'text-green-500' : 'text-indigo-500'\r\n              )}\r\n            />\r\n          </div>\r\n          <div className=\"min-w-0 flex-1\">\r\n            <div className=\"text-sm font-medium\">\r\n              {routine.dailyRoutines.night.name}\r\n            </div>\r\n            <div className=\"text-muted-foreground text-[11px]\">\r\n              {routine.dailyRoutines.night.duration}m ·{' '}\r\n              {routine.dailyRoutines.night.exercises.length} stretches\r\n            </div>\r\n          </div>\r\n          {nightDone && <Check className=\"size-4 shrink-0 text-green-500\" />}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Quick Stats Footer */}\r\n      {consistencyStats && (\r\n        <div className=\"text-muted-foreground mt-4 flex items-center justify-between border-t pt-3 text-xs\">\r\n          <span>Week: {consistencyStats.weeklyCompletion}%</span>\r\n          <span>Month: {consistencyStats.monthlyCompletion}%</span>\r\n          <span>Best: {consistencyStats.longestStreak} days</span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3032, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/components/ui/slider.tsx"],"sourcesContent":["'use client'\n\nimport * as SliderPrimitive from '@radix-ui/react-slider'\nimport * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Slider({\n  className,\n  defaultValue,\n  value,\n  min = 0,\n  max = 100,\n  ...props\n}: React.ComponentProps<typeof SliderPrimitive.Root>) {\n  const _values = React.useMemo(\n    () =>\n      Array.isArray(value)\n        ? value\n        : Array.isArray(defaultValue)\n          ? defaultValue\n          : [min, max],\n    [value, defaultValue, min, max]\n  )\n\n  return (\n    <SliderPrimitive.Root\n      data-slot=\"slider\"\n      defaultValue={defaultValue}\n      value={value}\n      min={min}\n      max={max}\n      className={cn(\n        'relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col',\n        className\n      )}\n      {...props}\n    >\n      <SliderPrimitive.Track\n        data-slot=\"slider-track\"\n        className={cn(\n          'bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5'\n        )}\n      >\n        <SliderPrimitive.Range\n          data-slot=\"slider-range\"\n          className={cn(\n            'bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full'\n          )}\n        />\n      </SliderPrimitive.Track>\n      {Array.from({ length: _values.length }, (_, index) => (\n        <SliderPrimitive.Thumb\n          data-slot=\"slider-thumb\"\n          key={index}\n          className=\"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50\"\n        />\n      ))}\n    </SliderPrimitive.Root>\n  )\n}\n\nexport { Slider }\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,YAAY,EACZ,KAAK,EACL,MAAM,CAAC,EACP,MAAM,GAAG,EACT,GAAG,OAC+C;IAClD,MAAM,UAAU,gNAAa,CAC3B,IACE,MAAM,OAAO,CAAC,SACV,QACA,MAAM,OAAO,CAAC,gBACZ,eACA;YAAC;YAAK;SAAI,EAClB;QAAC;QAAO;QAAc;QAAK;KAAI;IAGjC,qBACE,8OAAC,0KAAoB;QACnB,aAAU;QACV,cAAc;QACd,OAAO;QACP,KAAK;QACL,KAAK;QACL,WAAW,IAAA,kHAAE,EACX,uOACA;QAED,GAAG,KAAK;;0BAET,8OAAC,2KAAqB;gBACpB,aAAU;gBACV,WAAW,IAAA,kHAAE,EACX;0BAGF,cAAA,8OAAC,2KAAqB;oBACpB,aAAU;oBACV,WAAW,IAAA,kHAAE,EACX;;;;;;;;;;;YAIL,MAAM,IAAI,CAAC;gBAAE,QAAQ,QAAQ,MAAM;YAAC,GAAG,CAAC,GAAG,sBAC1C,8OAAC,2KAAqB;oBACpB,aAAU;oBAEV,WAAU;mBADL;;;;;;;;;;;AAMf"}},
    {"offset": {"line": 3102, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SwitchPrimitive from \"@radix-ui/react-switch\"\nimport { motion } from \"framer-motion\"\n\nimport { cn } from \"@/lib/utils\"\nimport { transitions } from \"@/lib/animations\"\n\nfunction Switch({\n  className,\n  ...props\n}: React.ComponentProps<typeof SwitchPrimitive.Root>) {\n  return (\n    <SwitchPrimitive.Root\n      data-slot=\"switch\"\n      className={cn(\n        \"peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs outline-none transition-colors focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <SwitchPrimitive.Thumb\n        data-slot=\"switch-thumb\"\n        asChild\n      >\n        <motion.span\n          className={cn(\n            \"bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0\"\n          )}\n          layout\n          transition={transitions.spring}\n        />\n      </SwitchPrimitive.Thumb>\n    </SwitchPrimitive.Root>\n  )\n}\n\nexport { Switch }\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAEA;AACA;AAPA;;;;;;AASA,SAAS,OAAO,EACd,SAAS,EACT,GAAG,OAC+C;IAClD,qBACE,8OAAC,0KAAoB;QACnB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,gXACA;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,2KAAqB;YACpB,aAAU;YACV,OAAO;sBAEP,cAAA,8OAAC,oMAAM,CAAC,IAAI;gBACV,WAAW,IAAA,kHAAE,EACX;gBAEF,MAAM;gBACN,YAAY,gIAAW,CAAC,MAAM;;;;;;;;;;;;;;;;AAKxC"}},
    {"offset": {"line": 3150, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/components/dashboard/home-environment-card.tsx"],"sourcesContent":["'use client'\n\nimport { DashboardCardHeader } from '@/components/dashboard/dashboard-card-header'\nimport { Slider } from '@/components/ui/slider'\nimport { Switch } from '@/components/ui/switch'\nimport { apiGet, apiPost } from '@/lib/api/client'\nimport type { HueZone } from '@/lib/types/hue.types'\nimport { AlertCircle, Lightbulb, Sun } from 'lucide-react'\nimport { useEffect, useState } from 'react'\nimport { toast } from 'sonner'\n\nexport function HomeEnvironmentCard() {\n  const [zones, setZones] = useState<HueZone[]>([])\n  const [zoneBrightness, setZoneBrightness] = useState<Record<string, number>>(\n    {}\n  )\n  const [loading, setLoading] = useState(true)\n  const [lightsError, setLightsError] = useState<string | null>(null)\n\n  const fetchData = async () => {\n    setLoading(true)\n\n    // Fetch HUE zones\n    try {\n      const response = await apiGet<Record<string, HueZone>>('/api/hue/zones')\n      if (!response.success) {\n        if (response.code === 'NOT_CONFIGURED') {\n          setLightsError('HUE bridge not configured')\n        }\n      } else if (response.data) {\n        const zonesArray = Object.entries(response.data).map(([id, zone]) => ({\n          ...(zone as HueZone),\n          id,\n        }))\n        setZones(zonesArray)\n        setLightsError(null)\n\n        // Initialize brightness values\n        const brightnessMap: Record<string, number> = {}\n        zonesArray.forEach(zone => {\n          // Default to 100% if on, 50% if off\n          brightnessMap[zone.id] = zone.state?.any_on ? 100 : 50\n        })\n        setZoneBrightness(brightnessMap)\n      }\n    } catch {\n      setLightsError('Failed to load lights')\n    }\n\n    setLoading(false)\n  }\n\n  useEffect(() => {\n    fetchData()\n  }, [])\n\n  const handleToggleZone = async (zoneId: string, on: boolean) => {\n    // Optimistic update\n    setZones(prev =>\n      prev.map(z =>\n        z.id === zoneId\n          ? { ...z, state: { ...z.state, any_on: on, all_on: on } }\n          : z\n      )\n    )\n\n    try {\n      const response = await apiPost(`/api/hue/zones/${zoneId}/toggle`, { on })\n      if (!response.success) throw new Error()\n    } catch {\n      // Revert on error\n      setZones(prev =>\n        prev.map(z =>\n          z.id === zoneId\n            ? { ...z, state: { ...z.state, any_on: !on, all_on: !on } }\n            : z\n        )\n      )\n      toast.error('Failed to toggle lights')\n    }\n  }\n\n  const handleBrightnessChange = async (zoneId: string, brightness: number) => {\n    setZoneBrightness(prev => ({ ...prev, [zoneId]: brightness }))\n\n    try {\n      // Convert 0-100 to 0-254 for Hue API\n      const hueBrightness = Math.round((brightness / 100) * 254)\n      await apiPost(`/api/hue/zones/${zoneId}/brightness`, {\n        brightness: hueBrightness,\n      })\n    } catch {\n      // Silent fail for brightness - it's a frequent operation\n    }\n  }\n\n  // Count active zones\n  const activeZones = zones.filter(z => z.state?.any_on).length\n\n  return (\n    <div className=\"space-y-4\">\n      <DashboardCardHeader\n        icon={\n          <Lightbulb className=\"size-5 text-amber-500 dark:text-amber-400\" />\n        }\n        iconContainerClassName=\"bg-amber-500/10\"\n        title=\"Lights\"\n        badge={\n          zones.length > 0 ? (\n            <span className=\"bg-brand/20 text-brand rounded-full px-1.5 text-xs font-medium\">\n              {zones.length}\n            </span>\n          ) : undefined\n        }\n        viewHref=\"/lights\"\n        viewLabel=\"View\"\n        onRefresh={fetchData}\n        refreshing={loading}\n      />\n\n      {/* Lights */}\n      <div className=\"space-y-2\">\n        {lightsError ? (\n          <div className=\"bg-muted/20 flex flex-col items-center justify-center rounded-xl p-6 text-center\">\n            <AlertCircle className=\"text-muted-foreground/50 size-8\" />\n            <p className=\"text-muted-foreground mt-2 text-sm\">{lightsError}</p>\n          </div>\n        ) : zones.length === 0 ? (\n          <div className=\"bg-muted/20 flex flex-col items-center justify-center rounded-xl p-6 text-center\">\n            <Lightbulb className=\"text-muted-foreground/50 size-8\" />\n            <p className=\"text-muted-foreground mt-2 text-sm\">\n              No light zones found\n            </p>\n          </div>\n        ) : (\n          zones.map(zone => {\n            const isOn = zone.state?.any_on\n            const brightness = zoneBrightness[zone.id] ?? 50\n\n            return (\n              <div\n                key={zone.id}\n                className={`flex items-center gap-3 rounded-lg border p-3 transition-all ${\n                  isOn\n                    ? 'border-brand/30 bg-brand/5'\n                    : 'border-border bg-card/50'\n                }`}\n              >\n                {/* Toggle */}\n                <Switch\n                  checked={isOn}\n                  onCheckedChange={checked =>\n                    handleToggleZone(zone.id, checked)\n                  }\n                />\n\n                {/* Zone Name */}\n                <span\n                  className={`min-w-[80px] text-sm font-medium ${isOn ? 'text-foreground' : 'text-muted-foreground'}`}\n                >\n                  {zone.name}\n                </span>\n\n                {/* Brightness Slider */}\n                <div className=\"flex flex-1 items-center gap-2\">\n                  <Sun\n                    className={`size-3.5 ${isOn ? 'text-brand' : 'text-muted-foreground/50'}`}\n                  />\n                  <Slider\n                    value={[brightness]}\n                    onValueChange={([v]) =>\n                      handleBrightnessChange(zone.id, v ?? 50)\n                    }\n                    min={1}\n                    max={100}\n                    step={5}\n                    disabled={!isOn}\n                    className=\"flex-1\"\n                  />\n                  <span\n                    className={`w-8 text-right text-xs tabular-nums ${isOn ? 'text-muted-foreground' : 'text-muted-foreground/50'}`}\n                  >\n                    {brightness}%\n                  </span>\n                </div>\n              </div>\n            )\n          })\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3420, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/components/dashboard/spotify-widget.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { DashboardCardHeader } from '@/components/dashboard/dashboard-card-header'\r\nimport { Button } from '@/components/ui/button'\r\nimport { apiGet, apiPost, getApiBaseUrl } from '@/lib/api/client'\r\nimport type {\r\n  SpotifyListeningHistoryEntry,\r\n  SpotifyPlaybackState,\r\n  SpotifyUser,\r\n} from '@/lib/types/spotify.types'\r\nimport {\r\n  Clock,\r\n  Database,\r\n  Music,\r\n  Pause,\r\n  Play,\r\n  SkipBack,\r\n  SkipForward,\r\n} from 'lucide-react'\r\nimport Image from 'next/image'\r\nimport { useCallback, useEffect, useRef, useState } from 'react'\r\n\r\ninterface SpotifyUserResponse {\r\n  user: SpotifyUser | null\r\n  source: 'live' | 'cache' | 'none'\r\n  authenticated: boolean\r\n  authAvailable: boolean\r\n  authUrl?: string\r\n}\r\n\r\ninterface SpotifyPlaybackResponse {\r\n  playback: {\r\n    isPlaying: boolean\r\n    track: {\r\n      name: string\r\n      artist: string\r\n      album: string\r\n      imageUrl: string\r\n    } | null\r\n    progressMs: number\r\n    durationMs: number\r\n  }\r\n  source: 'live' | 'cache' | 'none'\r\n  authenticated: boolean\r\n  authAvailable: boolean\r\n  authUrl?: string\r\n}\r\n\r\n// How long to pause polling after a user action (ms)\r\nconst ACTION_DEBOUNCE_MS = 2000\r\n\r\n/**\r\n * SpotifyWidget - A compact dashboard widget showing current playback.\r\n *\r\n * Shows:\r\n * - Album art and current track info\r\n * - Play/pause and skip controls\r\n * - Progress bar\r\n * - Quick link to full music page\r\n */\r\nexport function SpotifyWidget() {\r\n  const [user, setUser] = useState<SpotifyUser | null>(null)\r\n  const [playbackState, setPlaybackState] =\r\n    useState<SpotifyPlaybackState | null>(null)\r\n  const [cachedPlayback, setCachedPlayback] = useState<\r\n    SpotifyPlaybackResponse['playback'] | null\r\n  >(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [progress, setProgress] = useState(0)\r\n  const [isSkipping, setIsSkipping] = useState<'next' | 'previous' | null>(null)\r\n  const [source, setSource] = useState<'live' | 'cache' | 'none'>('none')\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false)\r\n  const [authAvailable, setAuthAvailable] = useState(false)\r\n  const [authUrl, setAuthUrl] = useState<string | null>(null)\r\n  const [recentHistory, setRecentHistory] = useState<\r\n    SpotifyListeningHistoryEntry[]\r\n  >([])\r\n\r\n  // Track last action time to debounce polling\r\n  const lastActionTime = useRef<number>(0)\r\n\r\n  // Format relative time for recent songs\r\n  const formatRecentTime = (dateStr: string) => {\r\n    const date = new Date(dateStr)\r\n    const diffMs = Date.now() - date.getTime()\r\n    const diffMins = Math.floor(diffMs / (1000 * 60))\r\n    const diffHours = Math.floor(diffMs / (1000 * 60 * 60))\r\n    if (diffMins < 1) return 'Just now'\r\n    if (diffMins < 60) return `${diffMins}m ago`\r\n    if (diffHours < 24) return `${diffHours}h ago`\r\n    return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })\r\n  }\r\n\r\n  // Compute full auth URL based on API base (for cross-origin local mode)\r\n  // Include returnTo param so localhost knows to redirect back to pete.sh\r\n  const fullAuthUrl = authUrl\r\n    ? (() => {\r\n        const baseUrl = getApiBaseUrl()\r\n        const url = `${baseUrl}${authUrl}`\r\n        // If we're on a different origin (e.g., pete.sh hitting localhost), include returnTo\r\n        if (\r\n          typeof window !== 'undefined' &&\r\n          baseUrl &&\r\n          !window.location.origin.includes('localhost')\r\n        ) {\r\n          return `${url}?returnTo=${encodeURIComponent(window.location.origin)}`\r\n        }\r\n        return url\r\n      })()\r\n    : null\r\n\r\n  // Fetch user profile\r\n  const fetchUser = useCallback(async () => {\r\n    try {\r\n      const response = await apiGet<SpotifyUserResponse>('/api/spotify/me')\r\n      if (response.success && response.data) {\r\n        setUser(response.data.user)\r\n        setSource(response.data.source)\r\n        setIsAuthenticated(response.data.authenticated)\r\n        setAuthAvailable(response.data.authAvailable)\r\n        setAuthUrl(response.data.authUrl || null)\r\n        return response.data.authenticated || response.data.user !== null\r\n      }\r\n      setUser(null)\r\n      return false\r\n    } catch {\r\n      return false\r\n    }\r\n  }, [])\r\n\r\n  // Fetch last 3 recent songs from listening history\r\n  const fetchRecentHistory = useCallback(async () => {\r\n    try {\r\n      const response = await apiGet<{\r\n        history: SpotifyListeningHistoryEntry[]\r\n      }>('/api/spotify/history?limit=3')\r\n      if (response.success && response.data?.history) {\r\n        setRecentHistory(response.data.history)\r\n      }\r\n    } catch {\r\n      // Silent fail\r\n    }\r\n  }, [])\r\n\r\n  // Fetch playback state\r\n  const fetchPlayback = useCallback(async (force = false) => {\r\n    // Skip if a recent action was taken (unless forced)\r\n    if (!force && Date.now() - lastActionTime.current < ACTION_DEBOUNCE_MS) {\r\n      return\r\n    }\r\n\r\n    try {\r\n      const response = await apiGet<SpotifyPlaybackResponse>(\r\n        '/api/spotify/player'\r\n      )\r\n      if (response.success && response.data) {\r\n        // Double-check we're not in a debounce period\r\n        if (\r\n          !force &&\r\n          Date.now() - lastActionTime.current < ACTION_DEBOUNCE_MS\r\n        ) {\r\n          return\r\n        }\r\n        setSource(response.data.source)\r\n        setIsAuthenticated(response.data.authenticated)\r\n        setCachedPlayback(response.data.playback)\r\n\r\n        // Update progress\r\n        if (response.data.playback?.durationMs > 0) {\r\n          setProgress(\r\n            (response.data.playback.progressMs /\r\n              response.data.playback.durationMs) *\r\n              100\r\n          )\r\n        }\r\n      }\r\n    } catch {\r\n      // Silent fail\r\n    }\r\n  }, [])\r\n\r\n  // Initial load\r\n  useEffect(() => {\r\n    const init = async () => {\r\n      setLoading(true)\r\n      const isAuth = await fetchUser()\r\n      if (isAuth) {\r\n        await Promise.all([fetchPlayback(true), fetchRecentHistory()])\r\n      }\r\n      setLoading(false)\r\n    }\r\n    init()\r\n  }, [fetchUser, fetchPlayback, fetchRecentHistory])\r\n\r\n  // Poll playback state\r\n  useEffect(() => {\r\n    if (!user) return\r\n\r\n    const interval = setInterval(() => {\r\n      fetchPlayback()\r\n    }, 5000) // Slower polling for widget\r\n\r\n    return () => clearInterval(interval)\r\n  }, [user, fetchPlayback])\r\n\r\n  // Update progress bar smoothly\r\n  useEffect(() => {\r\n    if (!playbackState?.is_playing || !playbackState.item) return\r\n\r\n    const interval = setInterval(() => {\r\n      setProgress(prev => {\r\n        const duration = playbackState.item?.duration_ms || 1\r\n        const increment = (1000 / duration) * 100\r\n        return Math.min(prev + increment, 100)\r\n      })\r\n    }, 1000)\r\n\r\n    return () => clearInterval(interval)\r\n  }, [playbackState?.is_playing, playbackState?.item])\r\n\r\n  // Play/Pause\r\n  const handlePlayPause = async () => {\r\n    const endpoint = playbackState?.is_playing\r\n      ? '/api/spotify/player/pause'\r\n      : '/api/spotify/player/play'\r\n    lastActionTime.current = Date.now()\r\n    setPlaybackState(prev =>\r\n      prev ? { ...prev, is_playing: !prev.is_playing } : null\r\n    )\r\n    try {\r\n      const response = await apiPost(endpoint, {})\r\n      if (!response.success) {\r\n        setPlaybackState(prev =>\r\n          prev ? { ...prev, is_playing: !prev.is_playing } : null\r\n        )\r\n      }\r\n      setTimeout(() => fetchPlayback(true), ACTION_DEBOUNCE_MS)\r\n    } catch {\r\n      setPlaybackState(prev =>\r\n        prev ? { ...prev, is_playing: !prev.is_playing } : null\r\n      )\r\n    }\r\n  }\r\n\r\n  // Skip\r\n  const handleSkip = async (direction: 'next' | 'previous') => {\r\n    lastActionTime.current = Date.now()\r\n    setIsSkipping(direction)\r\n    try {\r\n      await apiPost(`/api/spotify/player/${direction}`, {})\r\n      setTimeout(async () => {\r\n        await fetchPlayback(true)\r\n        setIsSkipping(null)\r\n      }, 800)\r\n    } catch {\r\n      setIsSkipping(null)\r\n    }\r\n  }\r\n\r\n  // Loading state — skeleton with consistent rhythm\r\n  if (loading) {\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-2.5\">\r\n            <div className=\"bg-muted size-8 animate-pulse rounded-lg\" />\r\n            <div className=\"space-y-1.5\">\r\n              <div className=\"bg-muted h-4 w-20 animate-pulse rounded-md\" />\r\n              <div className=\"bg-muted/80 h-3 w-14 animate-pulse rounded\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex gap-3\">\r\n          <div className=\"bg-muted size-[4.25rem] animate-pulse rounded-xl\" />\r\n          <div className=\"flex-1 space-y-3\">\r\n            <div className=\"bg-muted h-4 w-4/5 animate-pulse rounded-md\" />\r\n            <div className=\"bg-muted/80 h-3.5 w-2/3 animate-pulse rounded\" />\r\n            <div className=\"bg-muted/60 mt-2 h-2 w-full max-w-32 rounded-full\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Check if we should show controls\r\n  const showControls = isAuthenticated && source === 'live'\r\n\r\n  // Get display track info from cached playback\r\n  const displayTrack = cachedPlayback?.track\r\n  const isPlaying = cachedPlayback?.isPlaying ?? false\r\n\r\n  // Not connected and no cached data state\r\n  if (!user && !displayTrack) {\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        <DashboardCardHeader\r\n          icon={<Music className=\"size-5 text-green-600 dark:text-green-400\" />}\r\n          iconContainerClassName=\"bg-green-500/10\"\r\n          title=\"Spotify\"\r\n          viewHref={fullAuthUrl ?? '/music'}\r\n          viewLabel={authAvailable ? 'Connect' : 'View'}\r\n        />\r\n        <p className=\"text-muted-foreground -mt-2 text-[11px]\">\r\n          {authAvailable ? 'Connect to control playback' : 'Music & history'}\r\n        </p>\r\n        <div className=\"border-muted-foreground/25 bg-muted/20 flex items-center gap-4 rounded-xl border border-dashed py-4 pr-4 pl-4\">\r\n          <div className=\"bg-muted/60 flex size-14 shrink-0 items-center justify-center rounded-xl\">\r\n            <Music className=\"text-muted-foreground/60 size-7\" />\r\n          </div>\r\n          <div className=\"min-w-0 flex-1\">\r\n            <p className=\"text-muted-foreground text-sm font-medium\">\r\n              {authAvailable ? 'Not connected' : 'No playback data'}\r\n            </p>\r\n            <p className=\"text-muted-foreground/70 mt-0.5 text-xs\">\r\n              {authAvailable\r\n                ? 'Link your account to see now playing and history'\r\n                : 'Play something on Spotify to see it here'}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <DashboardCardHeader\r\n        icon={\r\n          <Music\r\n            className={`size-5 transition-colors ${\r\n              isPlaying\r\n                ? 'text-green-600 dark:text-green-400'\r\n                : 'text-muted-foreground'\r\n            }`}\r\n          />\r\n        }\r\n        iconContainerClassName={isPlaying ? 'bg-green-500/15' : 'bg-muted'}\r\n        title=\"Spotify\"\r\n        badge={\r\n          source === 'cache' ? (\r\n            <span className=\"bg-muted text-muted-foreground flex items-center gap-0.5 rounded-full px-1.5 py-0.5 text-[10px]\">\r\n              <Database className=\"size-2.5\" />\r\n              Cached\r\n            </span>\r\n          ) : undefined\r\n        }\r\n        viewHref=\"/music\"\r\n        viewLabel=\"View\"\r\n      />\r\n\r\n      {/* Now Playing — elevated card, clear hierarchy */}\r\n      {displayTrack ? (\r\n        <div\r\n          className={`bg-card/80 ring-border/50 relative overflow-hidden rounded-xl border shadow-sm ring-1 transition-all duration-300 ${\r\n            isSkipping && showControls ? 'scale-[0.99]' : ''\r\n          } ${isPlaying ? 'ring-green-500/10' : ''}`}\r\n        >\r\n          {/* Skip animation overlay */}\r\n          {isSkipping && showControls && (\r\n            <div className=\"bg-background/70 absolute inset-0 z-10 flex items-center justify-center backdrop-blur-sm\">\r\n              <div className=\"text-muted-foreground flex items-center gap-2\">\r\n                {isSkipping === 'previous' && (\r\n                  <SkipBack className=\"size-4 animate-pulse\" />\r\n                )}\r\n                <span className=\"text-xs font-medium\">\r\n                  {isSkipping === 'next' ? 'Next...' : 'Previous...'}\r\n                </span>\r\n                {isSkipping === 'next' && (\r\n                  <SkipForward className=\"size-4 animate-pulse\" />\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex gap-3 p-3\">\r\n            {/* Album Art — subtle ring when playing */}\r\n            <div\r\n              className={`shrink-0 transition-all duration-300 ${\r\n                isSkipping && showControls ? 'opacity-50 blur-[1px]' : ''\r\n              }`}\r\n            >\r\n              {displayTrack.imageUrl ? (\r\n                <div\r\n                  className={`overflow-hidden rounded-lg ${\r\n                    isPlaying ? 'shadow-md ring-2 ring-green-500/20' : ''\r\n                  }`}\r\n                >\r\n                  <Image\r\n                    src={displayTrack.imageUrl}\r\n                    alt={displayTrack.album}\r\n                    width={64}\r\n                    height={64}\r\n                    className={`block size-16 object-cover transition-transform duration-300 ${\r\n                      isSkipping && showControls\r\n                        ? isSkipping === 'next'\r\n                          ? '-translate-x-0.5'\r\n                          : 'translate-x-0.5'\r\n                        : ''\r\n                    }`}\r\n                  />\r\n                </div>\r\n              ) : (\r\n                <div className=\"bg-muted flex size-16 items-center justify-center rounded-lg\">\r\n                  <Music className=\"text-muted-foreground size-7\" />\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Track Info & Controls */}\r\n            <div\r\n              className={`min-w-0 flex-1 transition-all duration-300 ${\r\n                isSkipping && showControls ? 'opacity-50' : ''\r\n              }`}\r\n            >\r\n              <div className=\"truncate text-sm font-semibold tracking-tight\">\r\n                {displayTrack.name}\r\n              </div>\r\n              <div className=\"text-muted-foreground truncate text-xs\">\r\n                {displayTrack.artist}\r\n              </div>\r\n\r\n              {showControls ? (\r\n                <div className=\"mt-2 flex items-center gap-1.5\">\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    className=\"hover:bg-muted/80 size-8\"\r\n                    onClick={() => handleSkip('previous')}\r\n                  >\r\n                    <SkipBack className=\"size-4\" />\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    className=\"bg-foreground text-background hover:bg-foreground/90 size-9 rounded-full shadow-sm transition-transform hover:scale-105\"\r\n                    onClick={handlePlayPause}\r\n                  >\r\n                    {isPlaying ? (\r\n                      <Pause className=\"size-4\" />\r\n                    ) : (\r\n                      <Play className=\"ml-0.5 size-4\" />\r\n                    )}\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"icon\"\r\n                    className=\"hover:bg-muted/80 size-8\"\r\n                    onClick={() => handleSkip('next')}\r\n                  >\r\n                    <SkipForward className=\"size-4\" />\r\n                  </Button>\r\n\r\n                  <div className=\"ml-auto max-w-20 flex-1 px-1\">\r\n                    <div className=\"bg-muted h-1.5 overflow-hidden rounded-full\">\r\n                      <div\r\n                        className=\"h-full rounded-full bg-green-500 transition-[width] duration-1000 ease-out\"\r\n                        style={{ width: `${progress}%` }}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"mt-2\">\r\n                  <div className=\"bg-muted h-1.5 overflow-hidden rounded-full\">\r\n                    <div\r\n                      className=\"h-full rounded-full bg-green-500/50 transition-[width] duration-1000\"\r\n                      style={{ width: `${progress}%` }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"bg-muted/20 flex items-center gap-4 rounded-xl border py-3 pr-4 pl-4\">\r\n          <div className=\"bg-muted/60 flex size-12 shrink-0 items-center justify-center rounded-lg\">\r\n            <Music className=\"text-muted-foreground/60 size-6\" />\r\n          </div>\r\n          <div className=\"min-w-0 flex-1\">\r\n            <p className=\"text-muted-foreground text-sm font-medium\">\r\n              No track playing\r\n            </p>\r\n            <p className=\"text-muted-foreground/70 text-xs\">\r\n              {showControls\r\n                ? 'Start playback on any device'\r\n                : 'No recent playback data'}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Recent — secondary section with thumbnails and time pills */}\r\n      {recentHistory.length > 0 && (user || displayTrack) && (\r\n        <div className=\"border-border/80 border-t pt-3\">\r\n          <div className=\"text-muted-foreground mb-2 flex items-center gap-1.5\">\r\n            <Clock className=\"size-3.5\" />\r\n            <span className=\"text-[11px] font-medium tracking-wider uppercase\">\r\n              Recently played\r\n            </span>\r\n          </div>\r\n          <ul className=\"space-y-1\">\r\n            {recentHistory.map(entry => (\r\n              <li\r\n                key={entry.id}\r\n                className=\"hover:bg-muted/50 flex items-center gap-2.5 rounded-lg px-2 py-1.5 transition-colors\"\r\n              >\r\n                {entry.album_image_url ? (\r\n                  <Image\r\n                    src={entry.album_image_url}\r\n                    alt=\"\"\r\n                    width={32}\r\n                    height={32}\r\n                    className=\"ring-border/50 size-8 shrink-0 rounded-md object-cover ring-1\"\r\n                  />\r\n                ) : (\r\n                  <div className=\"bg-muted/80 flex size-8 shrink-0 items-center justify-center rounded-md\">\r\n                    <Music className=\"text-muted-foreground size-3.5\" />\r\n                  </div>\r\n                )}\r\n                <div className=\"min-w-0 flex-1 truncate\">\r\n                  <span className=\"text-foreground/95 block truncate text-xs font-medium\">\r\n                    {entry.track_name}\r\n                  </span>\r\n                  <span className=\"text-muted-foreground block truncate text-[11px]\">\r\n                    {entry.track_artists}\r\n                  </span>\r\n                </div>\r\n                <span className=\"bg-muted/80 text-muted-foreground shrink-0 rounded-full px-2 py-0.5 text-[10px] font-medium\">\r\n                  {formatRecentTime(entry.played_at)}\r\n                </span>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AApBA;;;;;;;;AAgDA,qDAAqD;AACrD,MAAM,qBAAqB;AAWpB,SAAS;IACd,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAqB;IACrD,MAAM,CAAC,eAAe,iBAAiB,GACrC,IAAA,iNAAQ,EAA8B;IACxC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAElD;IACF,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAA6B;IACzE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAA4B;IAChE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IACvD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAC;IACnD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAgB;IACtD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAEhD,EAAE;IAEJ,6CAA6C;IAC7C,MAAM,iBAAiB,IAAA,+MAAM,EAAS;IAEtC,wCAAwC;IACxC,MAAM,mBAAmB,CAAC;QACxB,MAAM,OAAO,IAAI,KAAK;QACtB,MAAM,SAAS,KAAK,GAAG,KAAK,KAAK,OAAO;QACxC,MAAM,WAAW,KAAK,KAAK,CAAC,SAAS,CAAC,OAAO,EAAE;QAC/C,MAAM,YAAY,KAAK,KAAK,CAAC,SAAS,CAAC,OAAO,KAAK,EAAE;QACrD,IAAI,WAAW,GAAG,OAAO;QACzB,IAAI,WAAW,IAAI,OAAO,GAAG,SAAS,KAAK,CAAC;QAC5C,IAAI,YAAY,IAAI,OAAO,GAAG,UAAU,KAAK,CAAC;QAC9C,OAAO,KAAK,kBAAkB,CAAC,SAAS;YAAE,OAAO;YAAS,KAAK;QAAU;IAC3E;IAEA,wEAAwE;IACxE,wEAAwE;IACxE,MAAM,cAAc,UAChB,CAAC;QACC,MAAM,UAAU,IAAA,qIAAa;QAC7B,MAAM,MAAM,GAAG,UAAU,SAAS;QAClC,qFAAqF;QACrF,IACE,kDAAkB,eAClB,WACA,CAAC,OAAO,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC;;QAInC,OAAO;IACT,CAAC,MACD;IAEJ,qBAAqB;IACrB,MAAM,YAAY,IAAA,oNAAW,EAAC;QAC5B,IAAI;YACF,MAAM,WAAW,MAAM,IAAA,8HAAM,EAAsB;YACnD,IAAI,SAAS,OAAO,IAAI,SAAS,IAAI,EAAE;gBACrC,QAAQ,SAAS,IAAI,CAAC,IAAI;gBAC1B,UAAU,SAAS,IAAI,CAAC,MAAM;gBAC9B,mBAAmB,SAAS,IAAI,CAAC,aAAa;gBAC9C,iBAAiB,SAAS,IAAI,CAAC,aAAa;gBAC5C,WAAW,SAAS,IAAI,CAAC,OAAO,IAAI;gBACpC,OAAO,SAAS,IAAI,CAAC,aAAa,IAAI,SAAS,IAAI,CAAC,IAAI,KAAK;YAC/D;YACA,QAAQ;YACR,OAAO;QACT,EAAE,OAAM;YACN,OAAO;QACT;IACF,GAAG,EAAE;IAEL,mDAAmD;IACnD,MAAM,qBAAqB,IAAA,oNAAW,EAAC;QACrC,IAAI;YACF,MAAM,WAAW,MAAM,IAAA,8HAAM,EAE1B;YACH,IAAI,SAAS,OAAO,IAAI,SAAS,IAAI,EAAE,SAAS;gBAC9C,iBAAiB,SAAS,IAAI,CAAC,OAAO;YACxC;QACF,EAAE,OAAM;QACN,cAAc;QAChB;IACF,GAAG,EAAE;IAEL,uBAAuB;IACvB,MAAM,gBAAgB,IAAA,oNAAW,EAAC,OAAO,QAAQ,KAAK;QACpD,oDAAoD;QACpD,IAAI,CAAC,SAAS,KAAK,GAAG,KAAK,eAAe,OAAO,GAAG,oBAAoB;YACtE;QACF;QAEA,IAAI;YACF,MAAM,WAAW,MAAM,IAAA,8HAAM,EAC3B;YAEF,IAAI,SAAS,OAAO,IAAI,SAAS,IAAI,EAAE;gBACrC,8CAA8C;gBAC9C,IACE,CAAC,SACD,KAAK,GAAG,KAAK,eAAe,OAAO,GAAG,oBACtC;oBACA;gBACF;gBACA,UAAU,SAAS,IAAI,CAAC,MAAM;gBAC9B,mBAAmB,SAAS,IAAI,CAAC,aAAa;gBAC9C,kBAAkB,SAAS,IAAI,CAAC,QAAQ;gBAExC,kBAAkB;gBAClB,IAAI,SAAS,IAAI,CAAC,QAAQ,EAAE,aAAa,GAAG;oBAC1C,YACE,AAAC,SAAS,IAAI,CAAC,QAAQ,CAAC,UAAU,GAChC,SAAS,IAAI,CAAC,QAAQ,CAAC,UAAU,GACjC;gBAEN;YACF;QACF,EAAE,OAAM;QACN,cAAc;QAChB;IACF,GAAG,EAAE;IAEL,eAAe;IACf,IAAA,kNAAS,EAAC;QACR,MAAM,OAAO;YACX,WAAW;YACX,MAAM,SAAS,MAAM;YACrB,IAAI,QAAQ;gBACV,MAAM,QAAQ,GAAG,CAAC;oBAAC,cAAc;oBAAO;iBAAqB;YAC/D;YACA,WAAW;QACb;QACA;IACF,GAAG;QAAC;QAAW;QAAe;KAAmB;IAEjD,sBAAsB;IACtB,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,MAAM;QAEX,MAAM,WAAW,YAAY;YAC3B;QACF,GAAG,MAAM,4BAA4B;;QAErC,OAAO,IAAM,cAAc;IAC7B,GAAG;QAAC;QAAM;KAAc;IAExB,+BAA+B;IAC/B,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,eAAe,cAAc,CAAC,cAAc,IAAI,EAAE;QAEvD,MAAM,WAAW,YAAY;YAC3B,YAAY,CAAA;gBACV,MAAM,WAAW,cAAc,IAAI,EAAE,eAAe;gBACpD,MAAM,YAAY,AAAC,OAAO,WAAY;gBACtC,OAAO,KAAK,GAAG,CAAC,OAAO,WAAW;YACpC;QACF,GAAG;QAEH,OAAO,IAAM,cAAc;IAC7B,GAAG;QAAC,eAAe;QAAY,eAAe;KAAK;IAEnD,aAAa;IACb,MAAM,kBAAkB;QACtB,MAAM,WAAW,eAAe,aAC5B,8BACA;QACJ,eAAe,OAAO,GAAG,KAAK,GAAG;QACjC,iBAAiB,CAAA,OACf,OAAO;gBAAE,GAAG,IAAI;gBAAE,YAAY,CAAC,KAAK,UAAU;YAAC,IAAI;QAErD,IAAI;YACF,MAAM,WAAW,MAAM,IAAA,+HAAO,EAAC,UAAU,CAAC;YAC1C,IAAI,CAAC,SAAS,OAAO,EAAE;gBACrB,iBAAiB,CAAA,OACf,OAAO;wBAAE,GAAG,IAAI;wBAAE,YAAY,CAAC,KAAK,UAAU;oBAAC,IAAI;YAEvD;YACA,WAAW,IAAM,cAAc,OAAO;QACxC,EAAE,OAAM;YACN,iBAAiB,CAAA,OACf,OAAO;oBAAE,GAAG,IAAI;oBAAE,YAAY,CAAC,KAAK,UAAU;gBAAC,IAAI;QAEvD;IACF;IAEA,OAAO;IACP,MAAM,aAAa,OAAO;QACxB,eAAe,OAAO,GAAG,KAAK,GAAG;QACjC,cAAc;QACd,IAAI;YACF,MAAM,IAAA,+HAAO,EAAC,CAAC,oBAAoB,EAAE,WAAW,EAAE,CAAC;YACnD,WAAW;gBACT,MAAM,cAAc;gBACpB,cAAc;YAChB,GAAG;QACL,EAAE,OAAM;YACN,cAAc;QAChB;IACF;IAEA,kDAAkD;IAClD,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;;;;;0CACf,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;;;;;kDACf,8OAAC;wCAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;8BAIrB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;;;;;sCACf,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;;;;;8CACf,8OAAC;oCAAI,WAAU;;;;;;8CACf,8OAAC;oCAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;;IAKzB;IAEA,mCAAmC;IACnC,MAAM,eAAe,mBAAmB,WAAW;IAEnD,8CAA8C;IAC9C,MAAM,eAAe,gBAAgB;IACrC,MAAM,YAAY,gBAAgB,aAAa;IAE/C,yCAAyC;IACzC,IAAI,CAAC,QAAQ,CAAC,cAAc;QAC1B,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC,8KAAmB;oBAClB,oBAAM,8OAAC,6MAAK;wBAAC,WAAU;;;;;;oBACvB,wBAAuB;oBACvB,OAAM;oBACN,UAAU,eAAe;oBACzB,WAAW,gBAAgB,YAAY;;;;;;8BAEzC,8OAAC;oBAAE,WAAU;8BACV,gBAAgB,gCAAgC;;;;;;8BAEnD,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC,6MAAK;gCAAC,WAAU;;;;;;;;;;;sCAEnB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAE,WAAU;8CACV,gBAAgB,kBAAkB;;;;;;8CAErC,8OAAC;oCAAE,WAAU;8CACV,gBACG,qDACA;;;;;;;;;;;;;;;;;;;;;;;;IAMhB;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,8KAAmB;gBAClB,oBACE,8OAAC,6MAAK;oBACJ,WAAW,CAAC,yBAAyB,EACnC,YACI,uCACA,yBACJ;;;;;;gBAGN,wBAAwB,YAAY,oBAAoB;gBACxD,OAAM;gBACN,OACE,WAAW,wBACT,8OAAC;oBAAK,WAAU;;sCACd,8OAAC,sNAAQ;4BAAC,WAAU;;;;;;wBAAa;;;;;;6BAGjC;gBAEN,UAAS;gBACT,WAAU;;;;;;YAIX,6BACC,8OAAC;gBACC,WAAW,CAAC,kHAAkH,EAC5H,cAAc,eAAe,iBAAiB,GAC/C,CAAC,EAAE,YAAY,sBAAsB,IAAI;;oBAGzC,cAAc,8BACb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAI,WAAU;;gCACZ,eAAe,4BACd,8OAAC,0NAAQ;oCAAC,WAAU;;;;;;8CAEtB,8OAAC;oCAAK,WAAU;8CACb,eAAe,SAAS,YAAY;;;;;;gCAEtC,eAAe,wBACd,8OAAC,mOAAW;oCAAC,WAAU;;;;;;;;;;;;;;;;;kCAM/B,8OAAC;wBAAI,WAAU;;0CAEb,8OAAC;gCACC,WAAW,CAAC,qCAAqC,EAC/C,cAAc,eAAe,0BAA0B,IACvD;0CAED,aAAa,QAAQ,iBACpB,8OAAC;oCACC,WAAW,CAAC,2BAA2B,EACrC,YAAY,uCAAuC,IACnD;8CAEF,cAAA,8OAAC,wIAAK;wCACJ,KAAK,aAAa,QAAQ;wCAC1B,KAAK,aAAa,KAAK;wCACvB,OAAO;wCACP,QAAQ;wCACR,WAAW,CAAC,6DAA6D,EACvE,cAAc,eACV,eAAe,SACb,qBACA,oBACF,IACJ;;;;;;;;;;yDAIN,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC,6MAAK;wCAAC,WAAU;;;;;;;;;;;;;;;;0CAMvB,8OAAC;gCACC,WAAW,CAAC,2CAA2C,EACrD,cAAc,eAAe,eAAe,IAC5C;;kDAEF,8OAAC;wCAAI,WAAU;kDACZ,aAAa,IAAI;;;;;;kDAEpB,8OAAC;wCAAI,WAAU;kDACZ,aAAa,MAAM;;;;;;oCAGrB,6BACC,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,qIAAM;gDACL,SAAQ;gDACR,MAAK;gDACL,WAAU;gDACV,SAAS,IAAM,WAAW;0DAE1B,cAAA,8OAAC,0NAAQ;oDAAC,WAAU;;;;;;;;;;;0DAEtB,8OAAC,qIAAM;gDACL,SAAQ;gDACR,MAAK;gDACL,WAAU;gDACV,SAAS;0DAER,0BACC,8OAAC,6MAAK;oDAAC,WAAU;;;;;yEAEjB,8OAAC,0MAAI;oDAAC,WAAU;;;;;;;;;;;0DAGpB,8OAAC,qIAAM;gDACL,SAAQ;gDACR,MAAK;gDACL,WAAU;gDACV,SAAS,IAAM,WAAW;0DAE1B,cAAA,8OAAC,mOAAW;oDAAC,WAAU;;;;;;;;;;;0DAGzB,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC;oDAAI,WAAU;8DACb,cAAA,8OAAC;wDACC,WAAU;wDACV,OAAO;4DAAE,OAAO,GAAG,SAAS,CAAC,CAAC;wDAAC;;;;;;;;;;;;;;;;;;;;;6DAMvC,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC;gDACC,WAAU;gDACV,OAAO;oDAAE,OAAO,GAAG,SAAS,CAAC,CAAC;gDAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qCAS7C,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,6MAAK;4BAAC,WAAU;;;;;;;;;;;kCAEnB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,WAAU;0CAA4C;;;;;;0CAGzD,8OAAC;gCAAE,WAAU;0CACV,eACG,iCACA;;;;;;;;;;;;;;;;;;YAOX,cAAc,MAAM,GAAG,KAAK,CAAC,QAAQ,YAAY,mBAChD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,6MAAK;gCAAC,WAAU;;;;;;0CACjB,8OAAC;gCAAK,WAAU;0CAAmD;;;;;;;;;;;;kCAIrE,8OAAC;wBAAG,WAAU;kCACX,cAAc,GAAG,CAAC,CAAA,sBACjB,8OAAC;gCAEC,WAAU;;oCAET,MAAM,eAAe,iBACpB,8OAAC,wIAAK;wCACJ,KAAK,MAAM,eAAe;wCAC1B,KAAI;wCACJ,OAAO;wCACP,QAAQ;wCACR,WAAU;;;;;6DAGZ,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,6MAAK;4CAAC,WAAU;;;;;;;;;;;kDAGrB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAK,WAAU;0DACb,MAAM,UAAU;;;;;;0DAEnB,8OAAC;gDAAK,WAAU;0DACb,MAAM,aAAa;;;;;;;;;;;;kDAGxB,8OAAC;wCAAK,WAAU;kDACb,iBAAiB,MAAM,SAAS;;;;;;;+BAzB9B,MAAM,EAAE;;;;;;;;;;;;;;;;;;;;;;AAkC7B"}},
    {"offset": {"line": 4250, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/components/dashboard/office-quick-controls.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { Slider } from '@/components/ui/slider'\r\nimport { apiGet, apiPost } from '@/lib/api/client'\r\nimport type { HueScene, HueZone } from '@/lib/types/hue.types'\r\nimport { cn } from '@/lib/utils'\r\nimport { motion } from 'framer-motion'\r\nimport { Lightbulb, Power, Sun } from 'lucide-react'\r\nimport { useCallback, useEffect, useRef, useState } from 'react'\r\n\r\n// Office zone identifier - matches by name containing \"office\" (case-insensitive)\r\nconst OFFICE_ZONE_NAME = 'office'\r\n\r\n// Specific scenes to show in order (case-insensitive match)\r\nconst PREFERRED_SCENES = ['pete red', 'pete work', 'purple rain']\r\n\r\n// Display labels for scenes (lowercase key -> display label)\r\nconst SCENE_LABELS: Record<string, string> = {\r\n  'pete red': 'Red',\r\n  'pete work': 'Work',\r\n  'purple rain': 'Purple',\r\n}\r\n\r\nexport function OfficeQuickControls() {\r\n  const [zone, setZone] = useState<HueZone | null>(null)\r\n  const [scenes, setScenes] = useState<HueScene[]>([])\r\n  const [brightness, setBrightness] = useState(100)\r\n  const [isOn, setIsOn] = useState(false)\r\n  const [activeSceneId, setActiveSceneId] = useState<string | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const brightnessTimeoutRef = useRef<NodeJS.Timeout | null>(null)\r\n\r\n  // Fetch zone and scenes on mount\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        // Fetch all zones\r\n        const zonesRes = await apiGet<Record<string, HueZone>>('/api/hue/zones')\r\n        if (!zonesRes.success || !zonesRes.data) {\r\n          setError('Could not load zones')\r\n          setLoading(false)\r\n          return\r\n        }\r\n\r\n        // Find office zone\r\n        const zonesArray = Object.entries(zonesRes.data).map(([id, z]) => ({\r\n          ...z,\r\n          id,\r\n        }))\r\n        const officeZone = zonesArray.find(z =>\r\n          z.name.toLowerCase().includes(OFFICE_ZONE_NAME)\r\n        )\r\n\r\n        if (!officeZone) {\r\n          setError('Office zone not found')\r\n          setLoading(false)\r\n          return\r\n        }\r\n\r\n        setZone(officeZone)\r\n        setIsOn(officeZone.state?.any_on ?? false)\r\n\r\n        // Calculate average brightness from zone action or default\r\n        if (officeZone.action?.bri) {\r\n          setBrightness(Math.round((officeZone.action.bri / 254) * 100))\r\n        }\r\n\r\n        // Fetch scenes for this zone\r\n        const scenesRes = await apiGet<HueScene[]>(\r\n          `/api/hue/zones/${officeZone.id}/scenes`\r\n        )\r\n        if (scenesRes.success && scenesRes.data) {\r\n          // Filter to preferred scenes and maintain order\r\n          const filteredScenes = PREFERRED_SCENES.map(preferred => {\r\n            return scenesRes.data!.find(\r\n              s => s.name.toLowerCase() === preferred.toLowerCase()\r\n            )\r\n          }).filter((s): s is HueScene => s !== undefined)\r\n\r\n          setScenes(filteredScenes)\r\n        }\r\n\r\n        setLoading(false)\r\n      } catch {\r\n        setError('Failed to load')\r\n        setLoading(false)\r\n      }\r\n    }\r\n\r\n    fetchData()\r\n  }, [])\r\n\r\n  // Toggle power\r\n  const handleToggle = useCallback(async () => {\r\n    if (!zone) return\r\n\r\n    const newState = !isOn\r\n    setIsOn(newState)\r\n\r\n    try {\r\n      await apiPost(`/api/hue/zones/${zone.id}/toggle`, { on: newState })\r\n    } catch {\r\n      setIsOn(!newState) // Revert on error\r\n    }\r\n  }, [zone, isOn])\r\n\r\n  // Activate scene\r\n  const handleSceneActivate = useCallback(\r\n    async (sceneId: string) => {\r\n      if (!zone) return\r\n\r\n      setActiveSceneId(sceneId)\r\n      setIsOn(true)\r\n\r\n      try {\r\n        await apiPost(`/api/hue/zones/${zone.id}/scenes/${sceneId}`, {})\r\n      } catch {\r\n        // Scene may still have been activated, keep optimistic state\r\n      }\r\n    },\r\n    [zone]\r\n  )\r\n\r\n  // Brightness change with debounce\r\n  const handleBrightnessChange = useCallback(\r\n    (value: number[]) => {\r\n      const bri = value[0] ?? 100\r\n      setBrightness(bri)\r\n\r\n      // If lights are off and user adjusts brightness, turn them on\r\n      if (!isOn && bri > 0) {\r\n        setIsOn(true)\r\n      }\r\n\r\n      // Clear existing timeout\r\n      if (brightnessTimeoutRef.current) {\r\n        clearTimeout(brightnessTimeoutRef.current)\r\n      }\r\n\r\n      // Debounce API call\r\n      brightnessTimeoutRef.current = setTimeout(async () => {\r\n        if (!zone) return\r\n        try {\r\n          const hueBrightness = Math.round((bri / 100) * 254)\r\n          await apiPost(`/api/hue/zones/${zone.id}/brightness`, {\r\n            brightness: hueBrightness,\r\n          })\r\n        } catch {\r\n          // Silent fail for brightness\r\n        }\r\n      }, 150)\r\n    },\r\n    [zone, isOn]\r\n  )\r\n\r\n  // Cleanup timeout on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (brightnessTimeoutRef.current) {\r\n        clearTimeout(brightnessTimeoutRef.current)\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  // Don't render if loading or error\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center gap-2 rounded-xl bg-white/5 px-3 py-2 backdrop-blur-sm\">\r\n        <div className=\"size-4 animate-pulse rounded bg-white/10\" />\r\n        <div className=\"h-3 w-16 animate-pulse rounded bg-white/10\" />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (error || !zone) {\r\n    return null // Silently hide if not available\r\n  }\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"flex flex-col gap-2 rounded-xl bg-white/5 px-4 py-3 backdrop-blur-sm\"\r\n      initial={{ opacity: 0, x: 16 }}\r\n      animate={{ opacity: 1, x: 0 }}\r\n      transition={{ duration: 0.3, delay: 0.35 }}\r\n    >\r\n      {/* Header: Icon + Label + Power Toggle */}\r\n      <div className=\"flex items-center justify-between gap-3\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <div\r\n            className={cn(\r\n              'flex size-7 items-center justify-center rounded-lg transition-colors',\r\n              isOn ? 'bg-amber-500/20' : 'bg-white/10'\r\n            )}\r\n          >\r\n            <Lightbulb\r\n              className={cn(\r\n                'size-4 transition-colors',\r\n                isOn ? 'text-amber-400' : 'text-white/40'\r\n              )}\r\n            />\r\n          </div>\r\n          <span className=\"text-xs font-medium text-white/70\">Office</span>\r\n        </div>\r\n\r\n        {/* Power button */}\r\n        <button\r\n          onClick={handleToggle}\r\n          className={cn(\r\n            'flex size-7 items-center justify-center rounded-full transition-all',\r\n            'hover:scale-105 active:scale-95',\r\n            isOn\r\n              ? 'bg-amber-500/30 text-amber-300 hover:bg-amber-500/40'\r\n              : 'bg-white/10 text-white/40 hover:bg-white/20 hover:text-white/60'\r\n          )}\r\n          aria-label={isOn ? 'Turn off office lights' : 'Turn on office lights'}\r\n        >\r\n          <Power className=\"size-3.5\" />\r\n        </button>\r\n      </div>\r\n\r\n      {/* Scene Pills */}\r\n      {scenes.length > 0 && (\r\n        <div className=\"flex flex-wrap gap-1.5\">\r\n          {scenes.map(scene => {\r\n            const isActive = activeSceneId === scene.id && isOn\r\n            const label = SCENE_LABELS[scene.name.toLowerCase()] || scene.name\r\n\r\n            return (\r\n              <button\r\n                key={scene.id}\r\n                onClick={() => handleSceneActivate(scene.id)}\r\n                className={cn(\r\n                  'rounded-full px-2.5 py-1 text-[10px] font-medium transition-all',\r\n                  'hover:scale-105 active:scale-95',\r\n                  isActive\r\n                    ? 'bg-brand/30 text-brand ring-brand/40 ring-1'\r\n                    : 'bg-white/10 text-white/60 hover:bg-white/15 hover:text-white/80'\r\n                )}\r\n              >\r\n                {label}\r\n              </button>\r\n            )\r\n          })}\r\n        </div>\r\n      )}\r\n\r\n      {/* Brightness Slider */}\r\n      <div className=\"flex items-center gap-2\">\r\n        <Sun\r\n          className={cn(\r\n            'size-3 shrink-0 transition-colors',\r\n            isOn ? 'text-white/50' : 'text-white/20'\r\n          )}\r\n        />\r\n        <Slider\r\n          value={[brightness]}\r\n          onValueChange={handleBrightnessChange}\r\n          min={1}\r\n          max={100}\r\n          step={5}\r\n          disabled={!isOn}\r\n          className=\"flex-1 [&_[data-slot=slider-range]]:bg-amber-400/60 [&_[data-slot=slider-thumb]]:size-3 [&_[data-slot=slider-thumb]]:border-amber-400 [&_[data-slot=slider-track]]:h-1 [&_[data-slot=slider-track]]:bg-white/10\"\r\n        />\r\n        <span\r\n          className={cn(\r\n            'w-7 text-right text-[10px] font-medium tabular-nums',\r\n            isOn ? 'text-white/50' : 'text-white/20'\r\n          )}\r\n        >\r\n          {brightness}%\r\n        </span>\r\n      </div>\r\n    </motion.div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4578, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/components/dashboard/today-hero.tsx"],"sourcesContent":["'use client'\n\nimport { OfficeQuickControls } from '@/components/dashboard/office-quick-controls'\nimport {\n  staggerContainerVariants,\n  staggerItemVariants,\n  transitions,\n} from '@/lib/animations'\nimport { apiGet } from '@/lib/api/client'\nimport type { CalendarEvent } from '@/lib/types/calendar.types'\nimport type { WeatherObservation } from '@/lib/types/weather.types'\nimport { format, isToday, isTomorrow, parseISO } from 'date-fns'\nimport { motion } from 'framer-motion'\nimport {\n  Calendar,\n  Cloud,\n  CloudRain,\n  CloudSnow,\n  MapPin,\n  Sun,\n} from 'lucide-react'\nimport { useEffect, useState } from 'react'\n\nexport function TodayHero() {\n  const [time, setTime] = useState(new Date())\n  const [mounted, setMounted] = useState(false)\n  const [weather, setWeather] = useState<WeatherObservation | null>(null)\n  const [nextEvent, setNextEvent] = useState<CalendarEvent | null>(null)\n\n  useEffect(() => {\n    setMounted(true)\n    const timer = setInterval(() => setTime(new Date()), 1000)\n    return () => clearInterval(timer)\n  }, [])\n\n  useEffect(() => {\n    // Fetch weather\n    apiGet<WeatherObservation>('/api/weather/current')\n      .then(response => {\n        if (response?.success && response.data) {\n          setWeather(response.data)\n        }\n      })\n      .catch(() => {})\n\n    // Fetch next event (within 24 hours)\n    apiGet<{ events: CalendarEvent[] }>('/api/calendar/upcoming?maxResults=10')\n      .then(response => {\n        if (response?.success && response.data?.events) {\n          const now = new Date()\n          const twentyFourHoursLater = new Date(\n            now.getTime() + 24 * 60 * 60 * 1000\n          )\n\n          // Find first event within 24 hours\n          const eventIn24Hours = response.data.events.find(\n            (event: CalendarEvent) => {\n              const startTime = event.start.dateTime\n                ? parseISO(event.start.dateTime)\n                : event.start.date\n                  ? parseISO(event.start.date)\n                  : null\n\n              if (!startTime) return false\n              return startTime >= now && startTime <= twentyFourHoursLater\n            }\n          )\n\n          if (eventIn24Hours) {\n            setNextEvent(eventIn24Hours)\n          }\n        }\n      })\n      .catch(() => {})\n  }, [])\n\n  const getGreeting = () => {\n    const hour = time.getHours()\n    if (hour < 12) return 'Good morning'\n    if (hour < 17) return 'Good afternoon'\n    return 'Good evening'\n  }\n\n  const getWeatherIcon = () => {\n    if (!weather) return <Cloud className=\"size-8 text-slate-400\" />\n    const condition = weather.properties.textDescription?.toLowerCase() || ''\n    if (condition.includes('sun') || condition.includes('clear')) {\n      return <Sun className=\"size-8 text-amber-400\" />\n    }\n    if (condition.includes('rain') || condition.includes('drizzle')) {\n      return <CloudRain className=\"size-8 text-blue-400\" />\n    }\n    if (condition.includes('snow')) {\n      return <CloudSnow className=\"size-8 text-cyan-300\" />\n    }\n    return <Cloud className=\"size-8 text-slate-400\" />\n  }\n\n  const tempC = weather?.properties.temperature.value\n  const tempF = tempC ? Math.round((tempC * 9) / 5 + 32) : null\n\n  // Calculate \"feels like\" from heat index or wind chill\n  const heatIndexC = weather?.properties.heatIndex?.value\n  const windChillC = weather?.properties.windChill?.value\n  const feelsLikeC = heatIndexC ?? windChillC ?? null\n  const feelsLikeF =\n    feelsLikeC !== null ? Math.round((feelsLikeC * 9) / 5 + 32) : null\n  const showFeelsLike =\n    feelsLikeF !== null && tempF !== null && feelsLikeF !== tempF\n\n  if (!mounted) {\n    return (\n      <div className=\"relative overflow-hidden rounded-2xl bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-6 md:p-8\">\n        <div className=\"h-24 animate-pulse rounded-lg bg-white/5\" />\n      </div>\n    )\n  }\n\n  const timeString = format(time, 'h:mm')\n  const ampm = format(time, 'a')\n  const dateString = format(time, 'EEEE, MMMM d')\n\n  return (\n    <motion.div\n      className=\"relative overflow-hidden rounded-2xl bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-6 md:p-8\"\n      initial={{ opacity: 0, y: 12 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={transitions.smooth}\n    >\n      {/* Decorative gradient orbs - animated */}\n      <motion.div\n        className=\"bg-brand/20 pointer-events-none absolute -top-20 -right-20 size-60 rounded-full blur-3xl\"\n        initial={{ scale: 0.8, opacity: 0 }}\n        animate={{ scale: 1, opacity: 1 }}\n        transition={{ ...transitions.smooth, delay: 0.2 }}\n      />\n      <motion.div\n        className=\"pointer-events-none absolute bottom-0 -left-10 size-40 rounded-full bg-blue-500/10 blur-2xl\"\n        initial={{ scale: 0.8, opacity: 0 }}\n        animate={{ scale: 1, opacity: 1 }}\n        transition={{ ...transitions.smooth, delay: 0.3 }}\n      />\n\n      <div className=\"relative z-10\">\n        <motion.div\n          className=\"flex flex-col gap-6 md:flex-row md:items-center md:justify-between\"\n          initial=\"hidden\"\n          animate=\"visible\"\n          variants={staggerContainerVariants}\n        >\n          {/* Left: Time & Greeting */}\n          <motion.div className=\"space-y-1\" variants={staggerItemVariants}>\n            <motion.p\n              className=\"text-sm font-medium text-white/60\"\n              initial={{ opacity: 0, x: -8 }}\n              animate={{ opacity: 1, x: 0 }}\n              transition={{ ...transitions.smooth, delay: 0.1 }}\n            >\n              {getGreeting()}\n            </motion.p>\n            <motion.div\n              className=\"flex items-baseline gap-2\"\n              initial={{ opacity: 0, y: 8 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ ...transitions.smooth, delay: 0.15 }}\n            >\n              <span className=\"text-5xl font-bold tracking-tight text-white tabular-nums md:text-6xl\">\n                {timeString}\n              </span>\n              <span className=\"text-2xl font-medium text-white/50 md:text-3xl\">\n                {ampm}\n              </span>\n            </motion.div>\n            <motion.p\n              className=\"text-base text-white/70 md:text-lg\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              transition={{ ...transitions.smooth, delay: 0.2 }}\n            >\n              {dateString}\n            </motion.p>\n          </motion.div>\n\n          {/* Right: Office Controls + Weather + Next Event */}\n          <motion.div\n            className=\"flex flex-col gap-3 md:items-end\"\n            variants={staggerItemVariants}\n          >\n            {/* Top row: Office Controls + Weather side by side */}\n            <div className=\"flex flex-col gap-3 sm:flex-row sm:items-stretch\">\n              {/* Office Quick Controls */}\n              <OfficeQuickControls />\n\n              {/* Weather */}\n              {weather && (\n                <motion.div\n                  className=\"flex items-center gap-4 rounded-xl bg-white/5 px-4 py-3 backdrop-blur-sm\"\n                  initial={{ opacity: 0, x: 16 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  transition={{ ...transitions.smooth, delay: 0.25 }}\n                  whileHover={{\n                    scale: 1.02,\n                    backgroundColor: 'rgba(255,255,255,0.08)',\n                  }}\n                >\n                  <motion.span\n                    initial={{ scale: 0, rotate: -45 }}\n                    animate={{ scale: 1, rotate: 0 }}\n                    transition={{ ...transitions.springBouncy, delay: 0.35 }}\n                  >\n                    {getWeatherIcon()}\n                  </motion.span>\n                  <div className=\"text-right\">\n                    <div className=\"flex items-baseline gap-1\">\n                      <span className=\"text-3xl font-bold text-white tabular-nums md:text-4xl\">\n                        {tempF ?? '--'}\n                      </span>\n                      <span className=\"text-lg text-white/50\">°F</span>\n                    </div>\n                    {showFeelsLike && (\n                      <p className=\"text-xs text-white/50\">\n                        Feels like {feelsLikeF}°\n                      </p>\n                    )}\n                    <p className=\"text-xs font-medium text-white/60\">\n                      {weather.properties.textDescription || 'Weather'}\n                    </p>\n                  </div>\n                </motion.div>\n              )}\n            </div>\n\n            {/* Next Event */}\n            {nextEvent &&\n              (() => {\n                const startTime = nextEvent.start.dateTime\n                  ? parseISO(nextEvent.start.dateTime)\n                  : nextEvent.start.date\n                    ? parseISO(nextEvent.start.date)\n                    : null\n\n                const isAllDay =\n                  !nextEvent.start.dateTime && !!nextEvent.start.date\n                const timeDisplay = startTime\n                  ? isToday(startTime)\n                    ? `Today, ${format(startTime, 'h:mm a')}`\n                    : isTomorrow(startTime)\n                      ? `Tomorrow, ${format(startTime, 'h:mm a')}`\n                      : isAllDay\n                        ? format(startTime, 'EEE, MMM d')\n                        : `${format(startTime, 'EEE, MMM d')}, ${format(startTime, 'h:mm a')}`\n                  : 'All day'\n\n                return (\n                  <motion.div\n                    className=\"flex items-center gap-3 rounded-xl bg-white/5 px-4 py-2.5 backdrop-blur-sm\"\n                    initial={{ opacity: 0, x: 16 }}\n                    animate={{ opacity: 1, x: 0 }}\n                    transition={{ ...transitions.smooth, delay: 0.3 }}\n                    whileHover={{\n                      scale: 1.02,\n                      backgroundColor: 'rgba(255,255,255,0.08)',\n                    }}\n                  >\n                    <motion.div\n                      className=\"bg-brand/20 flex size-9 items-center justify-center rounded-lg\"\n                      whileHover={{ scale: 1.1 }}\n                      transition={transitions.spring}\n                    >\n                      <Calendar className=\"text-brand size-4\" />\n                    </motion.div>\n                    <div className=\"min-w-0\">\n                      <p className=\"truncate text-sm font-medium text-white\">\n                        {nextEvent.summary}\n                      </p>\n                      <p className=\"text-xs text-white/50\">\n                        {timeDisplay}\n                        {nextEvent.location && (\n                          <span className=\"ml-2\">\n                            <MapPin className=\"mb-0.5 inline size-3\" />{' '}\n                            {nextEvent.location.split(',')[0]}\n                          </span>\n                        )}\n                      </p>\n                    </div>\n                  </motion.div>\n                )\n              })()}\n          </motion.div>\n        </motion.div>\n      </div>\n    </motion.div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5098, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/lib/types/cta.types.ts"],"sourcesContent":["/**\n * TypeScript types for CTA Transit integration\n */\n\nexport interface CTABusPrediction {\n  tmstmp: string\n  typ: string\n  stpnm: string\n  stpid: string\n  vid: string\n  dstp: number\n  rt: string\n  rtdd: string\n  rtdir: string\n  des: string\n  prdtm: string\n  prdctdn: string\n  dly: boolean\n  tablockid: string\n  tatripid: string\n  zone: string\n}\n\nexport interface CTABusResponse {\n  \"bustime-response\": {\n    prd?: CTABusPrediction[]\n    error?: Array<{\n      rt: string\n      msg: string\n    }>\n  }\n}\n\nexport interface CTATrainPrediction {\n  tmstmp: string\n  errCd: string\n  errNm: string | null\n  eta: Array<{\n    staId: string\n    stpId: string\n    staNm: string\n    stpDe: string\n    rn: string\n    rt: string\n    destSt: number\n    destNm: string\n    trDr: number | string\n    prdt: string\n    arrT: string\n    isApp: string\n    isSch: string\n    isDly: string\n    isFlt: string\n    flags: string | null\n    lat: string\n    lon: string\n    heading: string\n  }>\n}\n\nexport interface CTATrainResponse {\n  \"ctatt\": {\n    tmst: string\n    errCd: string\n    errNm: string | null\n    eta: CTATrainPrediction[\"eta\"]\n  }\n}\n\nexport interface CTARoute {\n  route: string\n  name: string\n  type: \"bus\" | \"train\"\n  direction?: string\n  stopId?: string\n}\n\nexport interface CTABusStop {\n  stpid: string\n  stpnm: string\n  lat: string\n  lon: string\n}\n\nexport interface CTABusStopsResponse {\n  \"bustime-response\": {\n    stops?: CTABusStop[]\n    error?: Array<{\n      rt: string\n      msg: string\n    }>\n  }\n}\n\nexport interface CTARouteConfig {\n  bus: {\n    route: string\n    stopId: string\n    direction: string\n  }[]\n  train: {\n    line: string\n    stationId: string\n    direction: string\n  }[]\n}\n\n/**\n * Walking times to various CTA stops (in minutes)\n */\nexport const WALKING_TIMES = {\n  bus: {\n    \"76\": 3,    // 76 bus stop - 3 minutes walk\n    \"22\": 5,    // 22 bus stop - 5 minutes walk\n    \"36\": 5,    // 36 bus stop - 5 minutes walk\n  },\n  train: {\n    \"Brn\": 12,  // Brown Line station - 12 minutes walk\n    \"P\": 12,    // Purple Line station - 12 minutes walk\n  },\n} as const\n\n/**\n * Get walking time for a route\n */\nexport function getWalkingTime(route: string, type: \"bus\" | \"train\"): number {\n  if (type === \"bus\") {\n    return WALKING_TIMES.bus[route as keyof typeof WALKING_TIMES.bus] ?? 5\n  }\n  return WALKING_TIMES.train[route as keyof typeof WALKING_TIMES.train] ?? 12\n}\n\n/**\n * Urgency level based on time remaining vs walking time\n */\nexport type UrgencyLevel = \"missed\" | \"leave-now\" | \"prepare\" | \"upcoming\" | \"normal\"\n\n/**\n * Calculate urgency level based on arrival time and walking time\n * @param arrivalMinutes - Minutes until arrival\n * @param walkingMinutes - Minutes to walk to the stop\n * @returns Urgency level\n *\n * Logic:\n * - buffer < 0: MISSED - impossible to catch, arrival is sooner than walk time\n * - buffer 0-1: LEAVE NOW - must leave immediately to catch it\n * - buffer 2-3: PREPARE - get ready to leave in the next minute or two\n * - buffer 4-6: UPCOMING - be aware, leaving soon\n * - buffer > 6: NORMAL - plenty of time\n */\nexport function getUrgencyLevel(arrivalMinutes: number, walkingMinutes: number): UrgencyLevel {\n  const buffer = arrivalMinutes - walkingMinutes\n\n  if (buffer < 0) {\n    // Too late - can't make it even if you leave now\n    return \"missed\"\n  } else if (buffer <= 1) {\n    // 0-1 minute buffer - must leave RIGHT NOW to catch it\n    return \"leave-now\"\n  } else if (buffer <= 3) {\n    // 2-3 minute buffer - get ready to leave\n    return \"prepare\"\n  } else if (buffer <= 6) {\n    // 4-6 minute buffer - upcoming, be aware\n    return \"upcoming\"\n  }\n  return \"normal\"\n}\n"],"names":[],"mappings":"AAAA;;CAEC;;;;;;;;AA4GM,MAAM,gBAAgB;IAC3B,KAAK;QACH,MAAM;QACN,MAAM;QACN,MAAM;IACR;IACA,OAAO;QACL,OAAO;QACP,KAAK;IACP;AACF;AAKO,SAAS,eAAe,KAAa,EAAE,IAAqB;IACjE,IAAI,SAAS,OAAO;QAClB,OAAO,cAAc,GAAG,CAAC,MAAwC,IAAI;IACvE;IACA,OAAO,cAAc,KAAK,CAAC,MAA0C,IAAI;AAC3E;AAoBO,SAAS,gBAAgB,cAAsB,EAAE,cAAsB;IAC5E,MAAM,SAAS,iBAAiB;IAEhC,IAAI,SAAS,GAAG;QACd,iDAAiD;QACjD,OAAO;IACT,OAAO,IAAI,UAAU,GAAG;QACtB,uDAAuD;QACvD,OAAO;IACT,OAAO,IAAI,UAAU,GAAG;QACtB,yCAAyC;QACzC,OAAO;IACT,OAAO,IAAI,UAAU,GAAG;QACtB,yCAAyC;QACzC,OAAO;IACT;IACA,OAAO;AACT"}},
    {"offset": {"line": 5146, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,8OAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,mcACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 5171, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/components/ui/dialog.tsx"],"sourcesContent":["'use client'\n\nimport * as DialogPrimitive from '@radix-ui/react-dialog'\nimport { XIcon } from 'lucide-react'\nimport { motion, AnimatePresence } from 'framer-motion'\nimport * as React from 'react'\n\nimport { cn } from '@/lib/utils'\nimport { overlayVariants, scaleFadeVariants, transitions } from '@/lib/animations'\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nconst DialogOverlay = React.forwardRef<\n  React.ComponentRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentProps<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    data-slot=\"dialog-overlay\"\n    className={cn('fixed inset-0 z-50 bg-black/50', className)}\n    asChild\n    {...props}\n  >\n    <motion.div\n      initial=\"hidden\"\n      animate=\"visible\"\n      exit=\"exit\"\n      variants={overlayVariants}\n    />\n  </DialogPrimitive.Overlay>\n))\nDialogOverlay.displayName = 'DialogOverlay'\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          'bg-background fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-xl border p-6 shadow-xl sm:max-w-lg',\n          className\n        )}\n        asChild\n        {...props}\n      >\n        <motion.div\n          initial=\"hidden\"\n          animate=\"visible\"\n          exit=\"exit\"\n          variants={scaleFadeVariants}\n        >\n          {children}\n          {showCloseButton && (\n            <DialogPrimitive.Close\n              data-slot=\"dialog-close\"\n              className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n              asChild\n            >\n              <motion.button\n                whileHover={{ scale: 1.1 }}\n                whileTap={{ scale: 0.9 }}\n                transition={transitions.spring}\n              >\n                <XIcon />\n                <span className=\"sr-only\">Close</span>\n              </motion.button>\n            </DialogPrimitive.Close>\n          )}\n        </motion.div>\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn('text-lg leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AAEA;AACA;AARA;;;;;;;;AAUA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,8OAAC,0KAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,8OAAC,6KAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;AAEA,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,8OAAC,4KAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8OAAC,2KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,MAAM,8BAAgB,mNAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,6KAAuB;QACtB,KAAK;QACL,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,kCAAkC;QAChD,OAAO;QACN,GAAG,KAAK;kBAET,cAAA,8OAAC,oMAAM,CAAC,GAAG;YACT,SAAQ;YACR,SAAQ;YACR,MAAK;YACL,UAAU,oIAAe;;;;;;;;;;;AAI/B,cAAc,WAAW,GAAG;AAE5B,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ;IACC,qBACE,8OAAC;QAAa,aAAU;;0BACtB,8OAAC;;;;;0BACD,8OAAC,6KAAuB;gBACtB,aAAU;gBACV,WAAW,IAAA,kHAAE,EACX,6KACA;gBAEF,OAAO;gBACN,GAAG,KAAK;0BAET,cAAA,8OAAC,oMAAM,CAAC,GAAG;oBACT,SAAQ;oBACR,SAAQ;oBACR,MAAK;oBACL,UAAU,sIAAiB;;wBAE1B;wBACA,iCACC,8OAAC,2KAAqB;4BACpB,aAAU;4BACV,WAAU;4BACV,OAAO;sCAEP,cAAA,8OAAC,oMAAM,CAAC,MAAM;gCACZ,YAAY;oCAAE,OAAO;gCAAI;gCACzB,UAAU;oCAAE,OAAO;gCAAI;gCACvB,YAAY,gIAAW,CAAC,MAAM;;kDAE9B,8OAAC,yMAAK;;;;;kDACN,8OAAC;wCAAK,WAAU;kDAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ1C;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,2KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,8OAAC,iLAA2B;QAC1B,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 5395, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/components/ui/command.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport { Command as CommandPrimitive } from \"cmdk\"\r\nimport { SearchIcon } from \"lucide-react\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogDescription,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\"\r\n\r\nfunction Command({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof CommandPrimitive>) {\r\n  return (\r\n    <CommandPrimitive\r\n      data-slot=\"command\"\r\n      className={cn(\r\n        \"bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CommandDialog({\r\n  title = \"Command Palette\",\r\n  description = \"Search for a command to run...\",\r\n  children,\r\n  className,\r\n  showCloseButton = true,\r\n  ...props\r\n}: React.ComponentProps<typeof Dialog> & {\r\n  title?: string\r\n  description?: string\r\n  className?: string\r\n  showCloseButton?: boolean\r\n}) {\r\n  return (\r\n    <Dialog {...props}>\r\n      <DialogHeader className=\"sr-only\">\r\n        <DialogTitle>{title}</DialogTitle>\r\n        <DialogDescription>{description}</DialogDescription>\r\n      </DialogHeader>\r\n      <DialogContent\r\n        className={cn(\"overflow-hidden p-0\", className)}\r\n        showCloseButton={showCloseButton}\r\n      >\r\n        <Command className=\"[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\r\n          {children}\r\n        </Command>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\nfunction CommandInput({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof CommandPrimitive.Input>) {\r\n  return (\r\n    <div\r\n      data-slot=\"command-input-wrapper\"\r\n      className=\"flex h-9 items-center gap-2 border-b px-3\"\r\n    >\r\n      <SearchIcon className=\"size-4 shrink-0 opacity-50\" />\r\n      <CommandPrimitive.Input\r\n        data-slot=\"command-input\"\r\n        className={cn(\r\n          \"placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50\",\r\n          className\r\n        )}\r\n        {...props}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction CommandList({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof CommandPrimitive.List>) {\r\n  return (\r\n    <CommandPrimitive.List\r\n      data-slot=\"command-list\"\r\n      className={cn(\r\n        \"max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CommandEmpty({\r\n  ...props\r\n}: React.ComponentProps<typeof CommandPrimitive.Empty>) {\r\n  return (\r\n    <CommandPrimitive.Empty\r\n      data-slot=\"command-empty\"\r\n      className=\"py-6 text-center text-sm\"\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CommandGroup({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof CommandPrimitive.Group>) {\r\n  return (\r\n    <CommandPrimitive.Group\r\n      data-slot=\"command-group\"\r\n      className={cn(\r\n        \"text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CommandSeparator({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof CommandPrimitive.Separator>) {\r\n  return (\r\n    <CommandPrimitive.Separator\r\n      data-slot=\"command-separator\"\r\n      className={cn(\"bg-border -mx-1 h-px\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CommandItem({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof CommandPrimitive.Item>) {\r\n  return (\r\n    <CommandPrimitive.Item\r\n      data-slot=\"command-item\"\r\n      className={cn(\r\n        \"data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CommandShortcut({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"span\">) {\r\n  return (\r\n    <span\r\n      data-slot=\"command-shortcut\"\r\n      className={cn(\r\n        \"text-muted-foreground ml-auto text-xs tracking-widest\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Command,\r\n  CommandDialog,\r\n  CommandInput,\r\n  CommandList,\r\n  CommandEmpty,\r\n  CommandGroup,\r\n  CommandItem,\r\n  CommandShortcut,\r\n  CommandSeparator,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AACA;AAPA;;;;;;AAeA,SAAS,QAAQ,EACf,SAAS,EACT,GAAG,OAC2C;IAC9C,qBACE,8OAAC,iJAAgB;QACf,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,6FACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,cAAc,EACrB,QAAQ,iBAAiB,EACzB,cAAc,gCAAgC,EAC9C,QAAQ,EACR,SAAS,EACT,kBAAkB,IAAI,EACtB,GAAG,OAMJ;IACC,qBACE,8OAAC,qIAAM;QAAE,GAAG,KAAK;;0BACf,8OAAC,2IAAY;gBAAC,WAAU;;kCACtB,8OAAC,0IAAW;kCAAE;;;;;;kCACd,8OAAC,gJAAiB;kCAAE;;;;;;;;;;;;0BAEtB,8OAAC,4IAAa;gBACZ,WAAW,IAAA,kHAAE,EAAC,uBAAuB;gBACrC,iBAAiB;0BAEjB,cAAA,8OAAC;oBAAQ,WAAU;8BAChB;;;;;;;;;;;;;;;;;AAKX;AAEA,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OACiD;IACpD,qBACE,8OAAC;QACC,aAAU;QACV,WAAU;;0BAEV,8OAAC,wNAAU;gBAAC,WAAU;;;;;;0BACtB,8OAAC,iJAAgB,CAAC,KAAK;gBACrB,aAAU;gBACV,WAAW,IAAA,kHAAE,EACX,4JACA;gBAED,GAAG,KAAK;;;;;;;;;;;;AAIjB;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,iJAAgB,CAAC,IAAI;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,+DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBACE,8OAAC,iJAAgB,CAAC,KAAK;QACrB,aAAU;QACV,WAAU;QACT,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OACiD;IACpD,qBACE,8OAAC,iJAAgB,CAAC,KAAK;QACrB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0NACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,iBAAiB,EACxB,SAAS,EACT,GAAG,OACqD;IACxD,qBACE,8OAAC,iJAAgB,CAAC,SAAS;QACzB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,wBAAwB;QACrC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8OAAC,iJAAgB,CAAC,IAAI;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,uYACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EACvB,SAAS,EACT,GAAG,OAC0B;IAC7B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,yDACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 5586, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/components/ui/popover.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nfunction Popover({\r\n  ...props\r\n}: React.ComponentProps<typeof PopoverPrimitive.Root>) {\r\n  return <PopoverPrimitive.Root data-slot=\"popover\" {...props} />\r\n}\r\n\r\nfunction PopoverTrigger({\r\n  ...props\r\n}: React.ComponentProps<typeof PopoverPrimitive.Trigger>) {\r\n  return <PopoverPrimitive.Trigger data-slot=\"popover-trigger\" {...props} />\r\n}\r\n\r\nfunction PopoverContent({\r\n  className,\r\n  align = \"center\",\r\n  sideOffset = 4,\r\n  ...props\r\n}: React.ComponentProps<typeof PopoverPrimitive.Content>) {\r\n  return (\r\n    <PopoverPrimitive.Portal>\r\n      <PopoverPrimitive.Content\r\n        data-slot=\"popover-content\"\r\n        align={align}\r\n        sideOffset={sideOffset}\r\n        className={cn(\r\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden\",\r\n          className\r\n        )}\r\n        {...props}\r\n      />\r\n    </PopoverPrimitive.Portal>\r\n  )\r\n}\r\n\r\nfunction PopoverAnchor({\r\n  ...props\r\n}: React.ComponentProps<typeof PopoverPrimitive.Anchor>) {\r\n  return <PopoverPrimitive.Anchor data-slot=\"popover-anchor\" {...props} />\r\n}\r\n\r\nexport { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,QAAQ,EACf,GAAG,OACgD;IACnD,qBAAO,8OAAC,2KAAqB;QAAC,aAAU;QAAW,GAAG,KAAK;;;;;;AAC7D;AAEA,SAAS,eAAe,EACtB,GAAG,OACmD;IACtD,qBAAO,8OAAC,8KAAwB;QAAC,aAAU;QAAmB,GAAG,KAAK;;;;;;AACxE;AAEA,SAAS,eAAe,EACtB,SAAS,EACT,QAAQ,QAAQ,EAChB,aAAa,CAAC,EACd,GAAG,OACmD;IACtD,qBACE,8OAAC,6KAAuB;kBACtB,cAAA,8OAAC,8KAAwB;YACvB,aAAU;YACV,OAAO;YACP,YAAY;YACZ,WAAW,IAAA,kHAAE,EACX,keACA;YAED,GAAG,KAAK;;;;;;;;;;;AAIjB;AAEA,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,8OAAC,6KAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE"}},
    {"offset": {"line": 5657, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/lib/config.ts"],"sourcesContent":["/**\n * Configuration utility for environment variables\n * Validates and provides typed access to environment variables\n */\n\nimport { z } from 'zod'\n\n// Schema for environment variables\nconst envSchema = z.object({\n  // HUE Bridge\n  HUE_BRIDGE_IP: z.string().ip().optional(),\n  HUE_BRIDGE_USERNAME: z.string().optional(),\n  HUE_CLIENT_KEY: z.string().optional(), // Required for entertainment streaming\n\n  // Google\n  GOOGLE_CLIENT_ID: z.string().optional(),\n  GOOGLE_CLIENT_SECRET: z.string().optional(),\n  GOOGLE_API_KEY: z.string().optional(),\n  GOOGLE_CALENDAR_ID: z.string().optional(),\n\n  // Weather\n  WEATHER_LATITUDE: z\n    .string()\n    .regex(/^-?\\d+\\.?\\d*$/)\n    .optional(),\n  WEATHER_LONGITUDE: z\n    .string()\n    .regex(/^-?\\d+\\.?\\d*$/)\n    .optional(),\n\n  // CTA\n  CTA_API_KEY: z.string().optional(),\n  CTA_TRAIN_API_KEY: z.string().optional(),\n\n  // Spotify\n  NEXT_SPOTIFY_CLIENT_ID: z.string().optional(),\n  NEXT_SPOTIFY_CLIENT_SECRET: z.string().optional(),\n\n  // Desktop (local Windows features)\n  DESKTOP_ENABLED: z.string().optional(),\n})\n\n// Parse and validate environment variables\nconst parseEnv = () => {\n  const parsed = envSchema.safeParse(process.env)\n\n  if (!parsed.success) {\n    console.warn(\n      'Environment variable validation warnings:',\n      parsed.error.format()\n    )\n  }\n\n  return parsed.success ? parsed.data : {}\n}\n\nconst env = parseEnv()\n\n/**\n * Configuration object with typed environment variables\n */\nexport const config = {\n  hue: {\n    bridgeIp: env.HUE_BRIDGE_IP,\n    username: env.HUE_BRIDGE_USERNAME,\n    clientKey: env.HUE_CLIENT_KEY, // For entertainment streaming\n    isConfigured: Boolean(env.HUE_BRIDGE_IP && env.HUE_BRIDGE_USERNAME),\n    isEntertainmentConfigured: Boolean(\n      env.HUE_BRIDGE_IP && env.HUE_BRIDGE_USERNAME && env.HUE_CLIENT_KEY\n    ),\n  },\n  google: {\n    clientId: env.GOOGLE_CLIENT_ID,\n    clientSecret: env.GOOGLE_CLIENT_SECRET,\n    apiKey: env.GOOGLE_API_KEY,\n    calendarId: env.GOOGLE_CALENDAR_ID || 'primary',\n    isConfigured: Boolean(\n      env.GOOGLE_CLIENT_ID && env.GOOGLE_CLIENT_SECRET && env.GOOGLE_API_KEY\n    ),\n  },\n  weather: {\n    latitude: env.WEATHER_LATITUDE ? parseFloat(env.WEATHER_LATITUDE) : 41.8781, // Chicago default\n    longitude: env.WEATHER_LONGITUDE\n      ? parseFloat(env.WEATHER_LONGITUDE)\n      : -87.6298, // Chicago default\n  },\n  cta: {\n    apiKey: env.CTA_API_KEY,\n    trainApiKey: env.CTA_TRAIN_API_KEY,\n    isConfigured: Boolean(env.CTA_API_KEY),\n    isTrainConfigured: Boolean(env.CTA_TRAIN_API_KEY),\n  },\n  spotify: {\n    clientId: env.NEXT_SPOTIFY_CLIENT_ID,\n    clientSecret: env.NEXT_SPOTIFY_CLIENT_SECRET,\n    redirectUri: 'http://127.0.0.1:3000/spotify/callback',\n    isConfigured: Boolean(\n      env.NEXT_SPOTIFY_CLIENT_ID && env.NEXT_SPOTIFY_CLIENT_SECRET\n    ),\n    scopes: [\n      'user-read-playback-state',\n      'user-modify-playback-state',\n      'user-read-currently-playing',\n      'user-read-recently-played',\n      'user-library-read',\n      'playlist-read-private',\n      'playlist-read-collaborative',\n      'streaming',\n      'user-read-email',\n      'user-read-private',\n    ],\n  },\n  desktop: {\n    enabled: env.DESKTOP_ENABLED === 'true',\n  },\n} as const\n\n/**\n * Check if running in development mode\n */\nexport const isDev = process.env.NODE_ENV === 'development'\n\n/**\n * Check if running on localhost\n */\nexport const isLocalhost =\n  typeof window !== 'undefined' &&\n  (window.location.hostname === 'localhost' ||\n    window.location.hostname === '127.0.0.1' ||\n    window.location.hostname.startsWith('192.168.') ||\n    window.location.hostname.startsWith('10.'))\n"],"names":[],"mappings":";;;;;;;;AAAA;;;CAGC,GAED;;AAEA,mCAAmC;AACnC,MAAM,YAAY,uKAAC,CAAC,MAAM,CAAC;IACzB,aAAa;IACb,eAAe,uKAAC,CAAC,MAAM,GAAG,EAAE,GAAG,QAAQ;IACvC,qBAAqB,uKAAC,CAAC,MAAM,GAAG,QAAQ;IACxC,gBAAgB,uKAAC,CAAC,MAAM,GAAG,QAAQ;IAEnC,SAAS;IACT,kBAAkB,uKAAC,CAAC,MAAM,GAAG,QAAQ;IACrC,sBAAsB,uKAAC,CAAC,MAAM,GAAG,QAAQ;IACzC,gBAAgB,uKAAC,CAAC,MAAM,GAAG,QAAQ;IACnC,oBAAoB,uKAAC,CAAC,MAAM,GAAG,QAAQ;IAEvC,UAAU;IACV,kBAAkB,uKAAC,CAChB,MAAM,GACN,KAAK,CAAC,iBACN,QAAQ;IACX,mBAAmB,uKAAC,CACjB,MAAM,GACN,KAAK,CAAC,iBACN,QAAQ;IAEX,MAAM;IACN,aAAa,uKAAC,CAAC,MAAM,GAAG,QAAQ;IAChC,mBAAmB,uKAAC,CAAC,MAAM,GAAG,QAAQ;IAEtC,UAAU;IACV,wBAAwB,uKAAC,CAAC,MAAM,GAAG,QAAQ;IAC3C,4BAA4B,uKAAC,CAAC,MAAM,GAAG,QAAQ;IAE/C,mCAAmC;IACnC,iBAAiB,uKAAC,CAAC,MAAM,GAAG,QAAQ;AACtC;AAEA,2CAA2C;AAC3C,MAAM,WAAW;IACf,MAAM,SAAS,UAAU,SAAS,CAAC,QAAQ,GAAG;IAE9C,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,QAAQ,IAAI,CACV,6CACA,OAAO,KAAK,CAAC,MAAM;IAEvB;IAEA,OAAO,OAAO,OAAO,GAAG,OAAO,IAAI,GAAG,CAAC;AACzC;AAEA,MAAM,MAAM;AAKL,MAAM,SAAS;IACpB,KAAK;QACH,UAAU,IAAI,aAAa;QAC3B,UAAU,IAAI,mBAAmB;QACjC,WAAW,IAAI,cAAc;QAC7B,cAAc,QAAQ,IAAI,aAAa,IAAI,IAAI,mBAAmB;QAClE,2BAA2B,QACzB,IAAI,aAAa,IAAI,IAAI,mBAAmB,IAAI,IAAI,cAAc;IAEtE;IACA,QAAQ;QACN,UAAU,IAAI,gBAAgB;QAC9B,cAAc,IAAI,oBAAoB;QACtC,QAAQ,IAAI,cAAc;QAC1B,YAAY,IAAI,kBAAkB,IAAI;QACtC,cAAc,QACZ,IAAI,gBAAgB,IAAI,IAAI,oBAAoB,IAAI,IAAI,cAAc;IAE1E;IACA,SAAS;QACP,UAAU,IAAI,gBAAgB,GAAG,WAAW,IAAI,gBAAgB,IAAI;QACpE,WAAW,IAAI,iBAAiB,GAC5B,WAAW,IAAI,iBAAiB,IAChC,CAAC;IACP;IACA,KAAK;QACH,QAAQ,IAAI,WAAW;QACvB,aAAa,IAAI,iBAAiB;QAClC,cAAc,QAAQ,IAAI,WAAW;QACrC,mBAAmB,QAAQ,IAAI,iBAAiB;IAClD;IACA,SAAS;QACP,UAAU,IAAI,sBAAsB;QACpC,cAAc,IAAI,0BAA0B;QAC5C,aAAa;QACb,cAAc,QACZ,IAAI,sBAAsB,IAAI,IAAI,0BAA0B;QAE9D,QAAQ;YACN;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;SACD;IACH;IACA,SAAS;QACP,SAAS,IAAI,eAAe,KAAK;IACnC;AACF;AAKO,MAAM,QAAQ,oDAAyB;AAKvC,MAAM,cACX,kDAAkB,eAClB,CAAC,OAAO,QAAQ,CAAC,QAAQ,KAAK,eAC5B,OAAO,QAAQ,CAAC,QAAQ,KAAK,eAC7B,OAAO,QAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC,eACpC,OAAO,QAAQ,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM"}},
    {"offset": {"line": 5755, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/components/dashboard/ride-share-card.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useCallback, useRef } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandList,\n} from \"@/components/ui/command\"\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\"\nimport {\n  Car,\n  MapPin,\n  Search,\n  X,\n  ExternalLink,\n  Loader2,\n  Navigation,\n  Clock,\n} from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { apiGet } from \"@/lib/api/client\"\nimport type { MapsAutocompletePrediction, MapsPlaceDetails } from \"@/lib/types/maps.types\"\nimport { config } from \"@/lib/config\"\n\ninterface SelectedDestination {\n  name: string\n  address: string\n  lat: number\n  lng: number\n}\n\ninterface RideShareCardProps {\n  /** Compact mode for dashboard widget */\n  compact?: boolean\n}\n\nexport function RideShareCard({ compact = false }: RideShareCardProps) {\n  // Search state\n  const [searchQuery, setSearchQuery] = useState(\"\")\n  const [predictions, setPredictions] = useState<MapsAutocompletePrediction[]>([])\n  const [searchOpen, setSearchOpen] = useState(false)\n  const [isSearching, setIsSearching] = useState(false)\n  const searchDebounceRef = useRef<NodeJS.Timeout>(undefined)\n\n  // Selection state\n  const [selectedDestination, setSelectedDestination] = useState<SelectedDestination | null>(null)\n  const [isLoadingDetails, setIsLoadingDetails] = useState(false)\n\n  // Home location (from config)\n  const homeLocation = {\n    lat: config.weather.latitude,\n    lng: config.weather.longitude,\n  }\n\n  // Debounced search\n  const searchPlaces = useCallback(async (query: string) => {\n    if (!query || query.length < 2) {\n      setPredictions([])\n      return\n    }\n\n    setIsSearching(true)\n    try {\n      const response = await apiGet<MapsAutocompletePrediction[]>(`/api/maps/autocomplete?input=${encodeURIComponent(query)}`)\n      if (response.success) {\n        setPredictions(response.data || [])\n      }\n    } catch {\n      console.error(\"Failed to search places\")\n    } finally {\n      setIsSearching(false)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (searchDebounceRef.current) {\n      clearTimeout(searchDebounceRef.current)\n    }\n    searchDebounceRef.current = setTimeout(() => {\n      searchPlaces(searchQuery)\n    }, 300)\n\n    return () => {\n      if (searchDebounceRef.current) {\n        clearTimeout(searchDebounceRef.current)\n      }\n    }\n  }, [searchQuery, searchPlaces])\n\n  const handleSelectPlace = async (prediction: MapsAutocompletePrediction) => {\n    setSearchOpen(false)\n    setSearchQuery(prediction.structured_formatting.main_text)\n    setIsLoadingDetails(true)\n\n    try {\n      // Get place details for coordinates\n      const detailsResponse = await apiGet<MapsPlaceDetails>(`/api/maps/place/${prediction.place_id}`)\n      if (!detailsResponse.success || !detailsResponse.data) throw new Error(\"Failed to get place details\")\n      const place = detailsResponse.data\n\n      setSelectedDestination({\n        name: place.name || prediction.structured_formatting.main_text,\n        address: place.formatted_address,\n        lat: place.geometry.location.lat,\n        lng: place.geometry.location.lng,\n      })\n    } catch (error) {\n      console.error(\"Failed to get place details:\", error)\n    } finally {\n      setIsLoadingDetails(false)\n    }\n  }\n\n  const handleClearDestination = () => {\n    setSelectedDestination(null)\n    setSearchQuery(\"\")\n  }\n\n  // Generate Uber deep link\n  const getUberDeepLink = () => {\n    if (!selectedDestination) return \"\"\n\n    const params = new URLSearchParams({\n      action: \"setPickup\",\n      \"pickup[latitude]\": homeLocation.lat.toString(),\n      \"pickup[longitude]\": homeLocation.lng.toString(),\n      \"pickup[nickname]\": \"Home\",\n      \"dropoff[latitude]\": selectedDestination.lat.toString(),\n      \"dropoff[longitude]\": selectedDestination.lng.toString(),\n      \"dropoff[nickname]\": selectedDestination.name,\n      \"dropoff[formatted_address]\": selectedDestination.address,\n    })\n\n    return `https://m.uber.com/ul/?${params.toString()}`\n  }\n\n  // Generate Lyft deep link\n  const getLyftDeepLink = () => {\n    if (!selectedDestination) return \"\"\n\n    const params = new URLSearchParams({\n      \"pickup[latitude]\": homeLocation.lat.toString(),\n      \"pickup[longitude]\": homeLocation.lng.toString(),\n      \"destination[latitude]\": selectedDestination.lat.toString(),\n      \"destination[longitude]\": selectedDestination.lng.toString(),\n    })\n\n    return `https://lyft.com/ride?${params.toString()}`\n  }\n\n  const handleRequestUber = () => {\n    const deepLink = getUberDeepLink()\n    if (deepLink) {\n      window.open(deepLink, \"_blank\")\n    }\n  }\n\n  const handleRequestLyft = () => {\n    const deepLink = getLyftDeepLink()\n    if (deepLink) {\n      window.open(deepLink, \"_blank\")\n    }\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <h2 className=\"text-sm font-semibold text-foreground\">Rideshare</h2>\n        {selectedDestination && (\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={handleClearDestination}\n            className=\"h-7 px-2 text-xs\"\n          >\n            Clear\n          </Button>\n        )}\n      </div>\n\n      {/* Destination selected - show summary and request buttons */}\n      {selectedDestination ? (\n        <div className=\"space-y-3\">\n          {/* Route summary - more compact in compact mode */}\n          {!compact && (\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center gap-3 rounded-xl bg-background/50 p-3\">\n                <div className=\"flex size-9 items-center justify-center rounded-full bg-green-500/10\">\n                  <Navigation className=\"size-4 text-green-600\" />\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"text-xs text-muted-foreground\">From</p>\n                  <p className=\"truncate text-sm font-medium\">Home</p>\n                </div>\n              </div>\n              <div className=\"flex items-center gap-3 rounded-xl bg-background/50 p-3\">\n                <div className=\"flex size-9 items-center justify-center rounded-full bg-destructive/10\">\n                  <MapPin className=\"size-4 text-destructive\" />\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"text-xs text-muted-foreground\">To</p>\n                  <p className=\"truncate text-sm font-medium\">{selectedDestination.name}</p>\n                  <p className=\"truncate text-xs text-muted-foreground\">\n                    {selectedDestination.address}\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Compact destination display */}\n          {compact && (\n            <div className=\"flex items-center gap-2 rounded-lg bg-background/50 p-2\">\n              <MapPin className=\"size-4 shrink-0 text-destructive\" />\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"truncate text-sm font-medium\">{selectedDestination.name}</p>\n              </div>\n            </div>\n          )}\n\n          {/* Request buttons - side by side */}\n          <div className=\"grid grid-cols-2 gap-2\">\n            <Button\n              className=\"gap-2 bg-black hover:bg-black/90\"\n              size={compact ? \"default\" : \"lg\"}\n              onClick={handleRequestUber}\n            >\n              <Car className=\"size-4\" />\n              Uber\n              <ExternalLink className=\"size-3 opacity-60\" />\n            </Button>\n            <Button\n              className=\"gap-2 bg-[#FF00BF] hover:bg-[#FF00BF]/90\"\n              size={compact ? \"default\" : \"lg\"}\n              onClick={handleRequestLyft}\n            >\n              <Car className=\"size-4\" />\n              Lyft\n              <ExternalLink className=\"size-3 opacity-60\" />\n            </Button>\n          </div>\n\n          {!compact && (\n            <p className=\"text-center text-xs text-muted-foreground\">\n              Opens in app to confirm ride\n            </p>\n          )}\n        </div>\n      ) : (\n        /* Search input */\n        <Popover open={searchOpen} onOpenChange={setSearchOpen}>\n          <PopoverTrigger asChild>\n            <Button\n              variant=\"outline\"\n              role=\"combobox\"\n              aria-expanded={searchOpen}\n              className={cn(\n                \"w-full justify-start gap-3 px-4\",\n                compact ? \"h-10\" : \"h-12\"\n              )}\n            >\n              <Search className=\"size-4 text-muted-foreground\" />\n              <span className=\"text-muted-foreground\">Where to?</span>\n            </Button>\n          </PopoverTrigger>\n          <PopoverContent className=\"w-[var(--radix-popover-trigger-width)] p-0\" align=\"start\">\n            <Command shouldFilter={false}>\n              <div className=\"flex items-center border-b px-3\">\n                <Search className=\"mr-2 size-4 shrink-0 opacity-50\" />\n                <Input\n                  placeholder=\"Search for a place...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"h-11 border-0 focus-visible:ring-0\"\n                  autoFocus\n                />\n                {searchQuery && (\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8\"\n                    onClick={() => setSearchQuery(\"\")}\n                  >\n                    <X className=\"size-4\" />\n                  </Button>\n                )}\n              </div>\n              <CommandList>\n                {isSearching && (\n                  <div className=\"flex items-center justify-center py-6\">\n                    <Loader2 className=\"size-5 animate-spin text-muted-foreground\" />\n                  </div>\n                )}\n                {!isSearching && searchQuery.length >= 2 && predictions.length === 0 && (\n                  <CommandEmpty>No places found.</CommandEmpty>\n                )}\n                {!isSearching && predictions.length > 0 && (\n                  <CommandGroup>\n                    {predictions.map((prediction) => (\n                      <CommandItem\n                        key={prediction.place_id}\n                        value={prediction.place_id}\n                        onSelect={() => handleSelectPlace(prediction)}\n                        className=\"cursor-pointer gap-3 py-3\"\n                      >\n                        <MapPin className=\"size-4 shrink-0 text-muted-foreground\" />\n                        <div className=\"flex-1 min-w-0\">\n                          <p className=\"truncate font-medium\">\n                            {prediction.structured_formatting.main_text}\n                          </p>\n                          <p className=\"truncate text-xs text-muted-foreground\">\n                            {prediction.structured_formatting.secondary_text}\n                          </p>\n                        </div>\n                      </CommandItem>\n                    ))}\n                  </CommandGroup>\n                )}\n                {!isSearching && searchQuery.length < 2 && (\n                  <div className=\"px-3 py-6 text-center text-sm text-muted-foreground\">\n                    <Clock className=\"mx-auto mb-2 size-8 opacity-40\" />\n                    <p>Search for a restaurant, address, or place</p>\n                  </div>\n                )}\n              </CommandList>\n            </Command>\n          </PopoverContent>\n        </Popover>\n      )}\n\n      {/* Loading state for place details */}\n      {isLoadingDetails && (\n        <div className=\"flex items-center justify-center py-4\">\n          <Loader2 className=\"size-5 animate-spin text-muted-foreground\" />\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6382, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/components/dashboard/transportation-card.tsx"],"sourcesContent":["'use client'\n\nimport { DashboardCardHeader } from '@/components/dashboard/dashboard-card-header'\nimport { Button } from '@/components/ui/button'\nimport { apiGet } from '@/lib/api/client'\nimport type { CTABusResponse, CTATrainResponse } from '@/lib/types/cta.types'\nimport {\n  getUrgencyLevel,\n  getWalkingTime,\n  type UrgencyLevel,\n} from '@/lib/types/cta.types'\nimport { cn } from '@/lib/utils'\nimport {\n  AlertCircle,\n  AlertTriangle,\n  Bus,\n  Car,\n  PersonStanding,\n  RefreshCw,\n  Train,\n} from 'lucide-react'\nimport { useEffect, useRef, useState } from 'react'\nimport { RideShareCard } from './ride-share-card'\n\n// CTA Brand Colors\nconst CTA_COLORS = {\n  Brown: { bg: 'bg-[#62361B]', text: 'text-white', border: 'border-[#62361B]' },\n  Purple: {\n    bg: 'bg-[#522398]',\n    text: 'text-white',\n    border: 'border-[#522398]',\n  },\n  Red: { bg: 'bg-[#C60C30]', text: 'text-white', border: 'border-[#C60C30]' },\n  Blue: { bg: 'bg-[#00A1DE]', text: 'text-white', border: 'border-[#00A1DE]' },\n  Green: { bg: 'bg-[#009B3A]', text: 'text-white', border: 'border-[#009B3A]' },\n  Orange: {\n    bg: 'bg-[#F9461C]',\n    text: 'text-white',\n    border: 'border-[#F9461C]',\n  },\n  Pink: { bg: 'bg-[#E27EA6]', text: 'text-white', border: 'border-[#E27EA6]' },\n  Yellow: {\n    bg: 'bg-[#F9E300]',\n    text: 'text-black',\n    border: 'border-[#F9E300]',\n  },\n  bus: { bg: 'bg-[#565A5C]', text: 'text-white', border: 'border-[#565A5C]' },\n}\n\n// Urgency styling\nfunction getUrgencyRowStyles(urgency: UrgencyLevel) {\n  switch (urgency) {\n    case 'missed':\n      return {\n        row: 'bg-muted/30 opacity-60',\n        text: 'text-muted-foreground',\n      }\n    case 'leave-now':\n      return {\n        row: 'bg-red-50 dark:bg-red-950/40 border border-red-300 dark:border-red-800',\n        text: 'text-red-600 dark:text-red-400',\n      }\n    case 'prepare':\n      return {\n        row: 'bg-orange-50 dark:bg-orange-950/40 border border-orange-300 dark:border-orange-800',\n        text: 'text-orange-600 dark:text-orange-400',\n      }\n    case 'upcoming':\n      return {\n        row: 'bg-yellow-50 dark:bg-yellow-950/40 border border-yellow-300 dark:border-yellow-800',\n        text: 'text-yellow-600 dark:text-yellow-400',\n      }\n    default:\n      return {\n        row: 'bg-muted/30',\n        text: '',\n      }\n  }\n}\n\ninterface UrgencyBannerProps {\n  urgency: 'leave-now' | 'prepare'\n  arrivalMinutes: number\n  walkingTime: number\n}\n\n/**\n * Animated urgency banner with countdown progress bar\n * The progress bar counts down from 100% to 0% based on remaining buffer time\n */\nfunction UrgencyBanner({\n  urgency,\n  arrivalMinutes,\n  walkingTime,\n}: UrgencyBannerProps) {\n  const [progress, setProgress] = useState(100)\n  const startTimeRef = useRef<number>(Date.now())\n  const initialBufferRef = useRef<number>(arrivalMinutes - walkingTime)\n\n  // Calculate the max buffer time for each urgency level\n  // leave-now: 0-1 min buffer, prepare: 2-3 min buffer\n  const maxBuffer = urgency === 'leave-now' ? 2 : 4 // Buffer in minutes when progress starts at 100%\n\n  useEffect(() => {\n    // Reset refs when arrival time changes significantly\n    const currentBuffer = arrivalMinutes - walkingTime\n    startTimeRef.current = Date.now()\n    initialBufferRef.current = currentBuffer\n\n    const interval = setInterval(() => {\n      const elapsedSeconds = (Date.now() - startTimeRef.current) / 1000\n      const currentBufferSeconds =\n        initialBufferRef.current * 60 - elapsedSeconds\n\n      // Calculate progress: 100% at maxBuffer minutes, 0% at 0 minutes\n      const maxBufferSeconds = maxBuffer * 60\n      const newProgress = Math.max(\n        0,\n        Math.min(100, (currentBufferSeconds / maxBufferSeconds) * 100)\n      )\n\n      setProgress(newProgress)\n    }, 100) // Update every 100ms for smooth animation\n\n    return () => clearInterval(interval)\n  }, [arrivalMinutes, walkingTime, maxBuffer])\n\n  const isLeaveNow = urgency === 'leave-now'\n\n  return (\n    <div className=\"relative mb-2 overflow-hidden rounded-md\">\n      {/* Progress bar background */}\n      <div\n        className={cn(\n          'absolute inset-0 transition-all duration-100 ease-linear',\n          isLeaveNow ? 'bg-red-600/80' : 'bg-orange-500/80'\n        )}\n        style={{ width: `${progress}%` }}\n      />\n      {/* Darker background for depleted portion */}\n      <div\n        className={cn(\n          'absolute inset-0',\n          isLeaveNow ? 'bg-red-900/90' : 'bg-orange-900/90'\n        )}\n        style={{\n          left: `${progress}%`,\n          width: `${100 - progress}%`,\n        }}\n      />\n      {/* Content */}\n      <div\n        className={cn(\n          'relative flex items-center justify-center gap-2 px-2 py-1.5 text-xs font-bold text-white',\n          isLeaveNow && progress < 30 && 'animate-pulse'\n        )}\n      >\n        <AlertTriangle className=\"size-3\" />\n        {isLeaveNow ? 'LEAVE NOW!' : 'Get ready to leave'}\n        <span className=\"font-normal\">\n          ({arrivalMinutes}m arrival, {walkingTime}m walk)\n        </span>\n      </div>\n    </div>\n  )\n}\n\ninterface ArrivalBadgeProps {\n  minutes: string\n  urgency: UrgencyLevel\n  isFirst?: boolean\n}\n\nfunction ArrivalBadge({ minutes, urgency, isFirst }: ArrivalBadgeProps) {\n  const isDue = minutes === 'DUE' || minutes === '1'\n\n  // Apply urgency styling to first badge\n  const urgencyBg = isFirst\n    ? {\n        missed: 'bg-gray-400 text-white line-through',\n        'leave-now': 'bg-red-500 text-white animate-pulse',\n        prepare: 'bg-orange-500 text-white',\n        upcoming: 'bg-yellow-500 text-black',\n        normal: isDue\n          ? 'animate-pulse bg-brand text-white'\n          : 'bg-muted text-foreground',\n      }[urgency]\n    : isDue\n      ? 'animate-pulse bg-brand text-white'\n      : 'bg-muted text-foreground'\n\n  return (\n    <div\n      className={cn(\n        'flex min-w-[52px] items-center justify-center rounded-md px-2 py-1.5 font-mono text-sm font-bold tabular-nums',\n        urgencyBg\n      )}\n    >\n      {minutes === 'DUE' ? 'DUE' : `${minutes}m`}\n    </div>\n  )\n}\n\ninterface CTARouteRowProps {\n  type: 'train' | 'bus'\n  route: string\n  lineName?: string\n  destination: string\n  arrivals: string[]\n}\n\nfunction CTARouteRow({\n  type,\n  route,\n  lineName,\n  destination,\n  arrivals,\n}: CTARouteRowProps) {\n  const colors =\n    type === 'train' && lineName\n      ? CTA_COLORS[lineName as keyof typeof CTA_COLORS] || CTA_COLORS.bus\n      : CTA_COLORS.bus\n\n  // Get walking time for this route\n  const walkingTime = getWalkingTime(route, type)\n\n  // Calculate urgency based on first arrival\n  const firstArrival = arrivals[0]\n  const firstMinutes =\n    firstArrival === 'DUE' ? 0 : parseInt(firstArrival ?? '', 10)\n  const urgency = !isNaN(firstMinutes)\n    ? getUrgencyLevel(firstMinutes, walkingTime)\n    : 'normal'\n  const urgencyStyles = getUrgencyRowStyles(urgency)\n\n  // Check if any arrival is catchable\n  const hasCatchable = arrivals.some(time => {\n    const mins = time === 'DUE' ? 0 : parseInt(time, 10)\n    return !isNaN(mins) && mins >= walkingTime\n  })\n\n  return (\n    <div\n      className={cn(\n        'rounded-lg p-3 transition-all duration-300',\n        urgencyStyles.row,\n        urgency === 'normal' && 'hover:bg-muted/50'\n      )}\n    >\n      {/* Urgency Alert Banner with countdown progress */}\n      {(urgency === 'leave-now' || urgency === 'prepare') && (\n        <UrgencyBanner\n          urgency={urgency}\n          arrivalMinutes={firstMinutes}\n          walkingTime={walkingTime}\n        />\n      )}\n\n      <div className=\"flex items-center gap-3\">\n        {/* Route Badge */}\n        <div\n          className={`flex items-center justify-center rounded-lg ${colors.bg} ${colors.text} h-10 min-w-[44px] px-2`}\n        >\n          {type === 'train' ? (\n            <Train className=\"size-5\" />\n          ) : (\n            <span className=\"text-base font-bold\">{route}</span>\n          )}\n        </div>\n\n        {/* Route Info */}\n        <div className=\"min-w-0 flex-1\">\n          <div className=\"flex items-center gap-2\">\n            {type === 'train' && lineName && (\n              <span\n                className={`rounded px-1.5 py-0.5 text-xs font-bold ${colors.bg} ${colors.text}`}\n              >\n                {lineName}\n              </span>\n            )}\n            {type === 'bus' && (\n              <span className=\"text-foreground text-sm font-semibold\">\n                Bus {route}\n              </span>\n            )}\n            {/* Walking time indicator */}\n            <span className=\"text-muted-foreground flex items-center gap-0.5 text-[10px]\">\n              <PersonStanding className=\"size-3\" />\n              {walkingTime}m\n            </span>\n          </div>\n          <div className=\"mt-0.5 flex items-center gap-2\">\n            <p className=\"text-muted-foreground truncate text-xs\">\n              to {destination}\n            </p>\n            {/* Catchable indicator */}\n            {arrivals.length > 0 &&\n              (hasCatchable ? (\n                <span className=\"text-[10px] font-medium text-green-600 dark:text-green-400\">\n                  Catchable\n                </span>\n              ) : (\n                <span className=\"text-[10px] font-medium text-red-500\">\n                  Too late\n                </span>\n              ))}\n          </div>\n        </div>\n\n        {/* Arrival Times */}\n        <div className=\"flex items-center gap-1.5\">\n          {arrivals.length > 0 ? (\n            arrivals.slice(0, 2).map((time, idx) => {\n              const mins = time === 'DUE' ? 0 : parseInt(time, 10)\n              const arrivalUrgency = !isNaN(mins)\n                ? getUrgencyLevel(mins, walkingTime)\n                : 'normal'\n              return (\n                <ArrivalBadge\n                  key={idx}\n                  minutes={time}\n                  urgency={arrivalUrgency}\n                  isFirst={idx === 0}\n                />\n              )\n            })\n          ) : (\n            <span className=\"text-muted-foreground text-xs italic\">\n              No arrivals\n            </span>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport function TransportationCard() {\n  const [busData, setBusData] = useState<Record<string, CTABusResponse>>({})\n  const [trainData, setTrainData] = useState<Record<string, CTATrainResponse>>(\n    {}\n  )\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const [showRideshare, setShowRideshare] = useState(false)\n\n  const fetchTransit = async () => {\n    try {\n      setLoading(true)\n      setError(null)\n      const response = await apiGet<{\n        bus: Record<string, CTABusResponse>\n        train: Record<string, CTATrainResponse>\n      }>('/api/cta/all')\n      if (!response.success) {\n        if (response.code === 'NOT_CONFIGURED') {\n          setError('CTA API not configured')\n          return\n        }\n        throw new Error(response.error || 'Failed to fetch transit data')\n      }\n      if (response.data) {\n        setBusData(response.data.bus || {})\n        setTrainData(response.data.train || {})\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load transit')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchTransit()\n    const interval = setInterval(fetchTransit, 30000) // 30 seconds\n    return () => clearInterval(interval)\n  }, [])\n\n  // Process bus routes\n  const busRoutes = ['76', '36', '22']\n  const processedBusRoutes = busRoutes.map(route => {\n    const routeData = busData[route]\n    const predictions = routeData?.['bustime-response']?.prd || []\n    const routeError = routeData?.['bustime-response']?.error?.[0]?.msg\n\n    return {\n      route,\n      destination: predictions[0]?.stpnm || 'Downtown',\n      arrivals: predictions\n        .slice(0, 3)\n        .map(p => (p.prdctdn === 'DUE' ? 'DUE' : p.prdctdn)),\n      error: routeError,\n    }\n  })\n\n  // Process train lines\n  const trainLines = [\n    { code: 'Brn', name: 'Brown' },\n    { code: 'P', name: 'Purple' },\n  ]\n  const processedTrainLines = trainLines.map(({ code, name }) => {\n    const lineData = trainData[code]\n    const predictions =\n      lineData?.ctatt?.eta\n        ?.filter(eta => {\n          const trDr =\n            typeof eta.trDr === 'string' ? parseInt(eta.trDr, 10) : eta.trDr\n          return eta.rt === code && trDr === 5 // Southbound to Loop\n        })\n        .slice(0, 3)\n        .map(eta => {\n          const minutes = Math.round(\n            (new Date(eta.arrT).getTime() - new Date().getTime()) / 60000\n          )\n          return minutes <= 0 ? 'DUE' : minutes.toString()\n        }) || []\n\n    return {\n      code,\n      name,\n      destination: lineData?.ctatt?.eta?.[0]?.destNm || 'Loop',\n      arrivals: predictions,\n    }\n  })\n\n  if (error) {\n    return (\n      <div className=\"bg-card rounded-2xl p-5\">\n        <div className=\"text-destructive flex items-center gap-2\">\n          <AlertCircle className=\"size-5\" />\n          <p className=\"text-sm\">{error}</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <DashboardCardHeader\n        icon={<Bus className=\"size-5 text-[#00A1DE]\" />}\n        iconContainerClassName=\"bg-[#00A1DE]/10\"\n        title=\"Getting Around\"\n        badge={\n          <span className=\"rounded bg-[#00A1DE] px-1.5 py-0.5 text-[10px] font-bold text-white\">\n            CTA\n          </span>\n        }\n        viewHref=\"/transit\"\n        viewLabel=\"View\"\n        onRefresh={fetchTransit}\n        refreshing={loading}\n        rightExtra={\n          <Button\n            variant={showRideshare ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => setShowRideshare(!showRideshare)}\n            className=\"h-7 gap-1.5 px-2 text-xs\"\n          >\n            <Car className=\"size-3.5\" />\n            Rideshare\n          </Button>\n        }\n      />\n\n      {/* Rideshare Widget */}\n      {showRideshare && (\n        <div className=\"bg-background/50 rounded-xl border p-4\">\n          <RideShareCard compact />\n        </div>\n      )}\n\n      {/* Transit Arrivals */}\n      {loading && Object.keys(busData).length === 0 ? (\n        <div className=\"bg-muted/30 flex items-center gap-2 rounded-lg border p-4\">\n          <RefreshCw className=\"text-muted-foreground size-4 animate-spin\" />\n          <span className=\"text-muted-foreground text-sm\">\n            Loading arrivals...\n          </span>\n        </div>\n      ) : (\n        <div className=\"space-y-2\">\n          {/* Train Lines */}\n          {processedTrainLines.map(line => (\n            <CTARouteRow\n              key={line.code}\n              type=\"train\"\n              route={line.code}\n              lineName={line.name}\n              destination={line.destination}\n              arrivals={line.arrivals}\n            />\n          ))}\n\n          {/* Bus Routes */}\n          {processedBusRoutes.map(\n            route =>\n              !route.error && (\n                <CTARouteRow\n                  key={route.route}\n                  type=\"bus\"\n                  route={route.route}\n                  destination={route.destination}\n                  arrivals={route.arrivals}\n                />\n              )\n          )}\n        </div>\n      )}\n\n      {/* Live indicator */}\n      <div className=\"text-muted-foreground flex items-center justify-center gap-2 text-xs\">\n        <span className=\"relative flex size-2\">\n          <span className=\"absolute inline-flex h-full w-full animate-ping rounded-full bg-green-400 opacity-75\" />\n          <span className=\"relative inline-flex size-2 rounded-full bg-green-500\" />\n        </span>\n        Live updates every 30s\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7055, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/components/dashboard/weather-card.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { DashboardCardHeader } from '@/components/dashboard/dashboard-card-header'\r\nimport { apiGet } from '@/lib/api/client'\r\nimport type {\r\n  WeatherForecast,\r\n  WeatherObservation,\r\n} from '@/lib/types/weather.types'\r\nimport { format } from 'date-fns'\r\nimport {\r\n  Cloud,\r\n  CloudRain,\r\n  CloudSnow,\r\n  Cloudy,\r\n  Droplets,\r\n  Eye,\r\n  RefreshCw,\r\n  Sun,\r\n  Wind,\r\n} from 'lucide-react'\r\nimport { useEffect, useState } from 'react'\r\n\r\nexport function WeatherCard() {\r\n  const [current, setCurrent] = useState<WeatherObservation | null>(null)\r\n  const [forecast, setForecast] = useState<WeatherForecast | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  const fetchData = async () => {\r\n    setLoading(true)\r\n    try {\r\n      const [currentRes, forecastRes] = await Promise.all([\r\n        apiGet<WeatherObservation>('/api/weather/current'),\r\n        apiGet<WeatherForecast>('/api/weather/forecast'),\r\n      ])\r\n\r\n      if (currentRes.success && currentRes.data) {\r\n        setCurrent(currentRes.data)\r\n      }\r\n      if (forecastRes.success && forecastRes.data) {\r\n        setForecast(forecastRes.data)\r\n      }\r\n    } catch (err) {\r\n      console.error('Failed to fetch weather', err)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchData()\r\n    const interval = setInterval(fetchData, 600000) // 10 min\r\n    return () => clearInterval(interval)\r\n  }, [])\r\n\r\n  const getConditionIcon = (description: string, size = 'size-10') => {\r\n    const condition = description.toLowerCase()\r\n    if (condition.includes('sun') || condition.includes('clear')) {\r\n      return <Sun className={`${size} text-amber-400`} />\r\n    }\r\n    if (condition.includes('rain') || condition.includes('drizzle')) {\r\n      return <CloudRain className={`${size} text-blue-400`} />\r\n    }\r\n    if (condition.includes('snow')) {\r\n      return <CloudSnow className={`${size} text-cyan-300`} />\r\n    }\r\n    if (condition.includes('cloud') || condition.includes('overcast')) {\r\n      return <Cloudy className={`${size} text-slate-400`} />\r\n    }\r\n    return <Cloud className={`${size} text-slate-400`} />\r\n  }\r\n\r\n  if (loading && !current) {\r\n    return (\r\n      <div className=\"bg-card ring-border rounded-2xl p-5 ring-1\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <RefreshCw className=\"text-muted-foreground size-5 animate-spin\" />\r\n          <span className=\"text-muted-foreground text-sm\">\r\n            Loading weather...\r\n          </span>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const tempC = current?.properties.temperature.value\r\n  const tempF = tempC ? Math.round((tempC * 9) / 5 + 32) : null\r\n  const humidity = current?.properties.relativeHumidity?.value\r\n  const windSpeed = current?.properties.windSpeed?.value\r\n  const windMph = windSpeed ? Math.round(windSpeed * 2.237) : null\r\n  const visibility = current?.properties.visibility?.value\r\n  const visMiles = visibility ? (visibility / 1609.34).toFixed(1) : null\r\n\r\n  // Get 5-day forecast (daytime only)\r\n  const forecastDays =\r\n    forecast?.properties.periods.filter(p => p.isDaytime).slice(0, 5) || []\r\n\r\n  const isClear = current?.properties.textDescription\r\n    ?.toLowerCase()\r\n    .includes('clear')\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <DashboardCardHeader\r\n        icon={\r\n          isClear ? (\r\n            <Sun className=\"size-5 text-sky-500 dark:text-sky-400\" />\r\n          ) : (\r\n            <Cloudy className=\"size-5 text-sky-500 dark:text-sky-400\" />\r\n          )\r\n        }\r\n        iconContainerClassName=\"bg-sky-500/10\"\r\n        title=\"Weather\"\r\n        onRefresh={fetchData}\r\n        refreshing={loading}\r\n      />\r\n\r\n      {/* Current Conditions */}\r\n      {current && (\r\n        <div className=\"grid grid-cols-2 gap-3 sm:grid-cols-3\">\r\n          <div className=\"bg-muted/50 flex items-center gap-2 rounded-xl p-3\">\r\n            <Droplets className=\"size-4 text-blue-500\" />\r\n            <div>\r\n              <p className=\"text-muted-foreground text-xs\">Humidity</p>\r\n              <p className=\"font-semibold\">\r\n                {humidity ? `${Math.round(humidity)}%` : '--'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <div className=\"bg-muted/50 flex items-center gap-2 rounded-xl p-3\">\r\n            <Wind className=\"size-4 text-slate-500\" />\r\n            <div>\r\n              <p className=\"text-muted-foreground text-xs\">Wind</p>\r\n              <p className=\"font-semibold\">\r\n                {windMph ? `${windMph} mph` : '--'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <div className=\"bg-muted/50 flex items-center gap-2 rounded-xl p-3\">\r\n            <Eye className=\"size-4 text-cyan-500\" />\r\n            <div>\r\n              <p className=\"text-muted-foreground text-xs\">Visibility</p>\r\n              <p className=\"font-semibold\">\r\n                {visMiles ? `${visMiles} mi` : '--'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n          {/* <div className=\"bg-muted/50 flex items-center gap-2 rounded-xl p-3\">\r\n            <Gauge className=\"size-4 text-purple-500\" />\r\n            <div>\r\n              <p className=\"text-muted-foreground text-xs\">Condition</p>\r\n              <p className=\"truncate text-sm font-semibold\">\r\n                {current.properties.textDescription || '--'}\r\n              </p>\r\n            </div>\r\n          </div> */}\r\n        </div>\r\n      )}\r\n\r\n      {/* 5-Day Forecast */}\r\n      {forecastDays.length > 0 && (\r\n        <div className=\"grid grid-cols-5 gap-2\">\r\n          {forecastDays.map((day, idx) => (\r\n            <div\r\n              key={day.number}\r\n              className={`flex flex-col items-center rounded-xl p-3 text-center transition-colors ${\r\n                idx === 0\r\n                  ? 'bg-brand/10 border-brand/20 border-2'\r\n                  : 'bg-muted/30'\r\n              }`}\r\n            >\r\n              <p className=\"text-muted-foreground text-xs font-medium\">\r\n                {idx === 0 ? 'Today' : format(new Date(day.startTime), 'EEE')}\r\n              </p>\r\n              <div className=\"my-2\">\r\n                {getConditionIcon(day.shortForecast, 'size-6')}\r\n              </div>\r\n              <p className=\"text-lg font-bold\">{day.temperature}°</p>\r\n              <p className=\"text-muted-foreground mt-1 line-clamp-2 text-[10px] leading-tight\">\r\n                {day.shortForecast}\r\n              </p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7415, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/components/dashboard/main-dashboard.tsx"],"sourcesContent":["'use client'\n\nimport { CalendarCard } from '@/components/dashboard/calendar-card'\nimport { CoffeeCard } from '@/components/dashboard/coffee-card'\nimport { CookingWidget } from '@/components/dashboard/cooking-widget'\nimport { FitnessWidget } from '@/components/dashboard/fitness-widget'\nimport { HomeEnvironmentCard } from '@/components/dashboard/home-environment-card'\nimport { SpotifyWidget } from '@/components/dashboard/spotify-widget'\nimport { TodayHero } from '@/components/dashboard/today-hero'\nimport { TransportationCard } from '@/components/dashboard/transportation-card'\nimport { WeatherCard } from '@/components/dashboard/weather-card'\nimport { staggerContainerVariants, staggerItemVariants, transitions } from '@/lib/animations'\nimport { motion } from 'framer-motion'\nimport Masonry from 'react-masonry-css'\n\n// Animated section wrapper for dashboard cards\nfunction DashboardCard({\n  children,\n  index,\n}: {\n  children: React.ReactNode\n  index: number\n}) {\n  return (\n    <motion.section\n      variants={staggerItemVariants}\n      whileHover={{ y: -2, scale: 1.005 }}\n      transition={transitions.springGentle}\n      className=\"bg-card ring-border mb-5 rounded-2xl p-5 shadow-sm ring-1\"\n    >\n      {children}\n    </motion.section>\n  )\n}\n\nexport function MainDashboard() {\n  const breakpointColumnsObj = {\n    default: 2,\n    640: 1, // 1 column on mobile (screens < 640px)\n  }\n\n  return (\n    <motion.div\n      className=\"space-y-5\"\n      initial=\"hidden\"\n      animate=\"visible\"\n      variants={staggerContainerVariants}\n    >\n      {/* Hero: Today at a Glance */}\n      <motion.div variants={staggerItemVariants}>\n        <TodayHero />\n      </motion.div>\n\n      {/* Masonry Grid */}\n      <Masonry\n        breakpointCols={breakpointColumnsObj}\n        className=\"-ml-5 flex w-auto\"\n        columnClassName=\"pl-5 bg-clip-padding\"\n      >\n        {/* Weather */}\n        <DashboardCard index={0}>\n          <WeatherCard />\n        </DashboardCard>\n\n        {/* Transportation */}\n        <DashboardCard index={3}>\n          <TransportationCard />\n        </DashboardCard>\n\n        {/* Calendar */}\n        <DashboardCard index={4}>\n          <CalendarCard />\n        </DashboardCard>\n\n        {/* Spotify */}\n        <DashboardCard index={1}>\n          <SpotifyWidget />\n        </DashboardCard>\n\n        {/* Fitness */}\n        <DashboardCard index={2}>\n          <FitnessWidget />\n        </DashboardCard>\n        {/* Coffee */}\n        <DashboardCard index={5}>\n          <CoffeeCard />\n        </DashboardCard>\n\n        {/* Cooking */}\n        <DashboardCard index={6}>\n          <CookingWidget />\n        </DashboardCard>\n\n        {/* Home Controls */}\n        <DashboardCard index={7}>\n          <HomeEnvironmentCard />\n        </DashboardCard>\n      </Masonry>\n    </motion.div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;;;;;;;;;;;;;;AAeA,+CAA+C;AAC/C,SAAS,cAAc,EACrB,QAAQ,EACR,KAAK,EAIN;IACC,qBACE,8OAAC,oMAAM,CAAC,OAAO;QACb,UAAU,wIAAmB;QAC7B,YAAY;YAAE,GAAG,CAAC;YAAG,OAAO;QAAM;QAClC,YAAY,gIAAW,CAAC,YAAY;QACpC,WAAU;kBAET;;;;;;AAGP;AAEO,SAAS;IACd,MAAM,uBAAuB;QAC3B,SAAS;QACT,KAAK;IACP;IAEA,qBACE,8OAAC,oMAAM,CAAC,GAAG;QACT,WAAU;QACV,SAAQ;QACR,SAAQ;QACR,UAAU,6IAAwB;;0BAGlC,8OAAC,oMAAM,CAAC,GAAG;gBAAC,UAAU,wIAAmB;0BACvC,cAAA,8OAAC,sJAAS;;;;;;;;;;0BAIZ,8OAAC,+LAAO;gBACN,gBAAgB;gBAChB,WAAU;gBACV,iBAAgB;;kCAGhB,8OAAC;wBAAc,OAAO;kCACpB,cAAA,8OAAC,0JAAW;;;;;;;;;;kCAId,8OAAC;wBAAc,OAAO;kCACpB,cAAA,8OAAC,wKAAkB;;;;;;;;;;kCAIrB,8OAAC;wBAAc,OAAO;kCACpB,cAAA,8OAAC,4JAAY;;;;;;;;;;kCAIf,8OAAC;wBAAc,OAAO;kCACpB,cAAA,8OAAC,8JAAa;;;;;;;;;;kCAIhB,8OAAC;wBAAc,OAAO;kCACpB,cAAA,8OAAC,8JAAa;;;;;;;;;;kCAGhB,8OAAC;wBAAc,OAAO;kCACpB,cAAA,8OAAC,wJAAU;;;;;;;;;;kCAIb,8OAAC;wBAAc,OAAO;kCACpB,cAAA,8OAAC,8JAAa;;;;;;;;;;kCAIhB,8OAAC;wBAAc,OAAO;kCACpB,cAAA,8OAAC,8KAAmB;;;;;;;;;;;;;;;;;;;;;;AAK9B"}}]
}