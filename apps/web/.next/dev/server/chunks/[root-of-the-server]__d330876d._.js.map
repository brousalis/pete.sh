{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/lib/api/cors.ts"],"sourcesContent":["/**\r\n * CORS helper for API routes\r\n */\r\n\r\nimport { NextResponse } from 'next/server'\r\n\r\nexport const CORS_HEADERS = {\r\n  'Access-Control-Allow-Origin': '*',\r\n  'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\r\n  'Access-Control-Allow-Headers': 'Content-Type',\r\n}\r\n\r\nexport function withCors<T>(response: NextResponse<T>): NextResponse<T> {\r\n  Object.entries(CORS_HEADERS).forEach(([key, value]) => {\r\n    response.headers.set(key, value)\r\n  })\r\n  return response\r\n}\r\n\r\nexport function corsOptionsResponse() {\r\n  return NextResponse.json({}, { headers: CORS_HEADERS })\r\n}\r\n\r\nexport function corsErrorResponse(error: string, status: number = 500) {\r\n  return withCors(\r\n    NextResponse.json(\r\n      {\r\n        success: false,\r\n        error,\r\n      },\r\n      { status }\r\n    )\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;CAEC,GAED;;AAEO,MAAM,eAAe;IAC1B,+BAA+B;IAC/B,gCAAgC;IAChC,gCAAgC;AAClC;AAEO,SAAS,SAAY,QAAyB;IACnD,OAAO,OAAO,CAAC,cAAc,OAAO,CAAC,CAAC,CAAC,KAAK,MAAM;QAChD,SAAS,OAAO,CAAC,GAAG,CAAC,KAAK;IAC5B;IACA,OAAO;AACT;AAEO,SAAS;IACd,OAAO,gJAAY,CAAC,IAAI,CAAC,CAAC,GAAG;QAAE,SAAS;IAAa;AACvD;AAEO,SAAS,kBAAkB,KAAa,EAAE,SAAiB,GAAG;IACnE,OAAO,SACL,gJAAY,CAAC,IAAI,CACf;QACE,SAAS;QACT;IACF,GACA;QAAE;IAAO;AAGf"}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/lib/supabase/client.ts"],"sourcesContent":["/**\r\n * Supabase Client\r\n * Initializes and exports Supabase clients for the application\r\n */\r\n\r\nimport { createClient, SupabaseClient } from '@supabase/supabase-js'\r\nimport type { Database } from './types'\r\n\r\n// Environment variables\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\r\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY\r\n\r\n/**\r\n * Check if a string is a valid HTTP/HTTPS URL\r\n */\r\nfunction isValidUrl(urlString: string | undefined): boolean {\r\n  if (!urlString) return false\r\n  try {\r\n    const url = new URL(urlString)\r\n    return url.protocol === 'http:' || url.protocol === 'https:'\r\n  } catch {\r\n    return false\r\n  }\r\n}\r\n\r\n/**\r\n * Check if Supabase is properly configured with valid credentials\r\n */\r\nexport function isSupabaseConfigured(): boolean {\r\n  // Check that URL exists and is a valid HTTP/HTTPS URL\r\n  if (!isValidUrl(supabaseUrl)) return false\r\n  // Check that anon key exists and isn't a placeholder\r\n  if (!supabaseAnonKey || supabaseAnonKey.includes('your-') || supabaseAnonKey.length < 20) return false\r\n  return true\r\n}\r\n\r\n/**\r\n * Check if service role key is available and valid (for writes)\r\n */\r\nexport function hasServiceRoleKey(): boolean {\r\n  if (!supabaseServiceKey) return false\r\n  // Check it's not a placeholder\r\n  if (supabaseServiceKey.includes('your-') || supabaseServiceKey.length < 20) return false\r\n  return true\r\n}\r\n\r\n// Singleton instances\r\nlet anonClient: SupabaseClient<Database> | null = null\r\nlet serviceClient: SupabaseClient<Database> | null = null\r\n\r\n/**\r\n * Get the public Supabase client (anon key)\r\n * Use this for read operations and client-side queries\r\n * Returns null if not configured (call isSupabaseConfigured() first)\r\n */\r\nexport function getSupabaseClient(): SupabaseClient<Database> | null {\r\n  if (!isSupabaseConfigured()) {\r\n    return null\r\n  }\r\n\r\n  if (!anonClient) {\r\n    try {\r\n      anonClient = createClient<Database>(supabaseUrl!, supabaseAnonKey!, {\r\n        auth: {\r\n          persistSession: false,\r\n          autoRefreshToken: false,\r\n        },\r\n      })\r\n    } catch {\r\n      return null\r\n    }\r\n  }\r\n\r\n  return anonClient\r\n}\r\n\r\n/**\r\n * Get the service role Supabase client\r\n * Use this for server-side write operations (local mode only)\r\n * Returns null if not configured\r\n * WARNING: Never expose this in client-side code\r\n */\r\nexport function getSupabaseServiceClient(): SupabaseClient<Database> | null {\r\n  if (!isSupabaseConfigured()) {\r\n    return null\r\n  }\r\n\r\n  if (!hasServiceRoleKey()) {\r\n    return null\r\n  }\r\n\r\n  if (!serviceClient) {\r\n    try {\r\n      serviceClient = createClient<Database>(supabaseUrl!, supabaseServiceKey!, {\r\n        auth: {\r\n          persistSession: false,\r\n          autoRefreshToken: false,\r\n        },\r\n      })\r\n    } catch {\r\n      return null\r\n    }\r\n  }\r\n\r\n  return serviceClient\r\n}\r\n\r\n/**\r\n * Get the appropriate client based on operation type\r\n * - For reads: use anon client\r\n * - For writes: use service client (if available) or anon client\r\n * Returns null if Supabase is not configured\r\n */\r\nexport function getSupabaseClientForOperation(operation: 'read' | 'write'): SupabaseClient<Database> | null {\r\n  if (operation === 'write' && hasServiceRoleKey()) {\r\n    return getSupabaseServiceClient()\r\n  }\r\n  return getSupabaseClient()\r\n}\r\n\r\n// Export types for convenience\r\nexport type { Database }\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;;CAGC,GAED;;AAGA,wBAAwB;AACxB,MAAM;AACN,MAAM;AACN,MAAM,qBAAqB,QAAQ,GAAG,CAAC,yBAAyB;AAEhE;;CAEC,GACD,SAAS,WAAW,SAA6B;IAC/C,IAAI,CAAC,WAAW,OAAO;IACvB,IAAI;QACF,MAAM,MAAM,IAAI,IAAI;QACpB,OAAO,IAAI,QAAQ,KAAK,WAAW,IAAI,QAAQ,KAAK;IACtD,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAKO,SAAS;IACd,sDAAsD;IACtD,IAAI,CAAC,WAAW,cAAc,OAAO;IACrC,qDAAqD;IACrD,IAAI,CAAC,mBAAmB,gBAAgB,QAAQ,CAAC,YAAY,gBAAgB,MAAM,GAAG,IAAI,OAAO;IACjG,OAAO;AACT;AAKO,SAAS;IACd,IAAI,CAAC,oBAAoB,OAAO;IAChC,+BAA+B;IAC/B,IAAI,mBAAmB,QAAQ,CAAC,YAAY,mBAAmB,MAAM,GAAG,IAAI,OAAO;IACnF,OAAO;AACT;AAEA,sBAAsB;AACtB,IAAI,aAA8C;AAClD,IAAI,gBAAiD;AAO9C,SAAS;IACd,IAAI,CAAC,wBAAwB;QAC3B,OAAO;IACT;IAEA,IAAI,CAAC,YAAY;QACf,IAAI;YACF,aAAa,IAAA,gMAAY,EAAW,aAAc,iBAAkB;gBAClE,MAAM;oBACJ,gBAAgB;oBAChB,kBAAkB;gBACpB;YACF;QACF,EAAE,OAAM;YACN,OAAO;QACT;IACF;IAEA,OAAO;AACT;AAQO,SAAS;IACd,IAAI,CAAC,wBAAwB;QAC3B,OAAO;IACT;IAEA,IAAI,CAAC,qBAAqB;QACxB,OAAO;IACT;IAEA,IAAI,CAAC,eAAe;QAClB,IAAI;YACF,gBAAgB,IAAA,gMAAY,EAAW,aAAc,oBAAqB;gBACxE,MAAM;oBACJ,gBAAgB;oBAChB,kBAAkB;gBACpB;YACF;QACF,EAAE,OAAM;YACN,OAAO;QACT;IACF;IAEA,OAAO;AACT;AAQO,SAAS,8BAA8B,SAA2B;IACvE,IAAI,cAAc,WAAW,qBAAqB;QAChD,OAAO;IACT;IACA,OAAO;AACT"}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/lib/services/coffee-config.service.ts"],"sourcesContent":["/**\r\n * Coffee Config Service\r\n * Handles database operations for coffee configuration management\r\n */\r\n\r\nimport {\r\n  getSupabaseClient,\r\n  getSupabaseServiceClient,\r\n} from '@/lib/supabase/client'\r\nimport type {\r\n  BrewMethod,\r\n  CoffeeConfig,\r\n  CoffeeRecipe,\r\n  CoffeeRecommendation,\r\n  CupSize,\r\n  DbCoffeeRecipe,\r\n  DbCoffeeRecommendation,\r\n  DbGoldenRule,\r\n  DbQuickDose,\r\n  DbRoastStrategy,\r\n  GoldenRule,\r\n  QuickDose,\r\n  RoastLevel,\r\n  RoastStrategy,\r\n} from '@/lib/types/coffee.types'\r\n\r\n// Transform database row to app type\r\nfunction dbRecipeToApp(row: DbCoffeeRecipe): CoffeeRecipe {\r\n  return {\r\n    id: row.id,\r\n    method: row.method as BrewMethod,\r\n    cupSize: row.cup_size as CupSize,\r\n    cupSizeLabel: row.cup_size_label,\r\n    waterMl: row.water_ml,\r\n    roast: row.roast as RoastLevel,\r\n    ratio: row.ratio,\r\n    coffee: row.coffee,\r\n    temp: row.temp,\r\n    technique: row.technique,\r\n    switchSetting: row.switch_setting as\r\n      | 'open'\r\n      | 'closed'\r\n      | 'hybrid'\r\n      | undefined,\r\n    moccaSetting: row.mocca_setting as 'half' | 'full' | undefined,\r\n    timingCues: row.timing_cues || [],\r\n    isActive: row.is_active,\r\n    createdAt: row.created_at,\r\n    updatedAt: row.updated_at,\r\n  }\r\n}\r\n\r\nfunction dbRoastStrategyToApp(row: DbRoastStrategy): RoastStrategy {\r\n  return {\r\n    id: row.id,\r\n    roast: row.roast as RoastLevel,\r\n    goal: row.goal,\r\n    temp: row.temp,\r\n    technique: row.technique,\r\n    ratio: row.ratio,\r\n    sortOrder: row.sort_order,\r\n    createdAt: row.created_at,\r\n    updatedAt: row.updated_at,\r\n  }\r\n}\r\n\r\nfunction dbQuickDoseToApp(row: DbQuickDose): QuickDose {\r\n  return {\r\n    id: row.id,\r\n    method: row.method as BrewMethod,\r\n    label: row.label,\r\n    grams: row.grams,\r\n    note: row.note || undefined,\r\n    sortOrder: row.sort_order,\r\n    createdAt: row.created_at,\r\n    updatedAt: row.updated_at,\r\n  }\r\n}\r\n\r\nfunction dbGoldenRuleToApp(row: DbGoldenRule): GoldenRule {\r\n  return {\r\n    id: row.id,\r\n    title: row.title,\r\n    description: row.description,\r\n    sortOrder: row.sort_order,\r\n    createdAt: row.created_at,\r\n    updatedAt: row.updated_at,\r\n  }\r\n}\r\n\r\nfunction dbRecommendationToApp(\r\n  row: DbCoffeeRecommendation\r\n): CoffeeRecommendation {\r\n  return {\r\n    id: row.id,\r\n    name: row.name,\r\n    dayOfWeek: row.day_of_week,\r\n    hourStart: row.hour_start,\r\n    hourEnd: row.hour_end,\r\n    method: row.method as BrewMethod,\r\n    cupSize: row.cup_size as CupSize,\r\n    roast: row.roast as RoastLevel,\r\n    priority: row.priority,\r\n    isActive: row.is_active,\r\n    createdAt: row.created_at,\r\n    updatedAt: row.updated_at,\r\n  }\r\n}\r\n\r\nclass CoffeeConfigService {\r\n  /**\r\n   * Get the best client for reads: service role when available, otherwise anon.\r\n   * This matches the pattern used by other working services.\r\n   */\r\n  private getReadClient() {\r\n    return getSupabaseServiceClient() ?? getSupabaseClient()\r\n  }\r\n\r\n  /**\r\n   * Get the client for writes: requires service role\r\n   */\r\n  private getWriteClient() {\r\n    return getSupabaseServiceClient() ?? getSupabaseClient()\r\n  }\r\n\r\n  // ============================================\r\n  // GET ALL CONFIG\r\n  // ============================================\r\n  async getConfig(): Promise<CoffeeConfig> {\r\n    const [roastStrategies, recipes, quickDoses, goldenRules, recommendations] =\r\n      await Promise.all([\r\n        this.getRoastStrategies(),\r\n        this.getRecipes(),\r\n        this.getQuickDoses(),\r\n        this.getGoldenRules(),\r\n        this.getRecommendations(),\r\n      ])\r\n\r\n    return {\r\n      roastStrategies,\r\n      recipes,\r\n      quickDoses,\r\n      goldenRules,\r\n      recommendations,\r\n    }\r\n  }\r\n\r\n  // ============================================\r\n  // ROAST STRATEGIES\r\n  // ============================================\r\n  async getRoastStrategies(): Promise<RoastStrategy[]> {\r\n    const supabase = this.getReadClient()\r\n    if (!supabase) {\r\n      throw new Error('Supabase not configured')\r\n    }\r\n\r\n    const { data, error } = await supabase\r\n      .from('coffee_roast_strategies')\r\n      .select('*')\r\n      .order('sort_order', { ascending: true })\r\n\r\n    if (error) {\r\n      console.error('Error fetching roast strategies:', error)\r\n      throw new Error(`Failed to fetch roast strategies: ${error.message}`)\r\n    }\r\n\r\n    return (data as DbRoastStrategy[]).map(dbRoastStrategyToApp)\r\n  }\r\n\r\n  async updateRoastStrategy(\r\n    id: string,\r\n    data: Partial<RoastStrategy>\r\n  ): Promise<RoastStrategy | null> {\r\n    const supabase = this.getWriteClient()\r\n    if (!supabase) {\r\n      throw new Error('Supabase not configured')\r\n    }\r\n\r\n    const { data: updated, error } = await supabase\r\n      .from('coffee_roast_strategies')\r\n      .update({\r\n        goal: data.goal,\r\n        temp: data.temp,\r\n        technique: data.technique,\r\n        ratio: data.ratio,\r\n        sort_order: data.sortOrder,\r\n      } as never)\r\n      .eq('id', id)\r\n      .select()\r\n      .single()\r\n\r\n    if (error) {\r\n      console.error('Error updating roast strategy:', error)\r\n      throw new Error(`Failed to update roast strategy: ${error.message}`)\r\n    }\r\n\r\n    return dbRoastStrategyToApp(updated as DbRoastStrategy)\r\n  }\r\n\r\n  // ============================================\r\n  // RECIPES\r\n  // ============================================\r\n  async getRecipes(method?: BrewMethod): Promise<CoffeeRecipe[]> {\r\n    const supabase = this.getReadClient()\r\n    if (!supabase) {\r\n      throw new Error('Supabase not configured')\r\n    }\r\n\r\n    let query = supabase\r\n      .from('coffee_recipes')\r\n      .select('*')\r\n      .order('method', { ascending: true })\r\n      .order('cup_size', { ascending: true })\r\n      .order('roast', { ascending: true })\r\n\r\n    if (method) {\r\n      query = query.eq('method', method)\r\n    }\r\n\r\n    const { data, error } = await query\r\n\r\n    if (error) {\r\n      console.error('Error fetching recipes:', error)\r\n      throw new Error(`Failed to fetch recipes: ${error.message}`)\r\n    }\r\n\r\n    return (data as DbCoffeeRecipe[]).map(dbRecipeToApp)\r\n  }\r\n\r\n  async getRecipe(id: string): Promise<CoffeeRecipe | null> {\r\n    const supabase = this.getReadClient()\r\n    if (!supabase) {\r\n      throw new Error('Supabase not configured')\r\n    }\r\n\r\n    const { data, error } = await supabase\r\n      .from('coffee_recipes')\r\n      .select('*')\r\n      .eq('id', id)\r\n      .single()\r\n\r\n    if (error) {\r\n      if (error.code === 'PGRST116') {\r\n        return null // Not found\r\n      }\r\n      console.error('Error fetching recipe:', error)\r\n      throw new Error(`Failed to fetch recipe: ${error.message}`)\r\n    }\r\n\r\n    return dbRecipeToApp(data as DbCoffeeRecipe)\r\n  }\r\n\r\n  async createRecipe(\r\n    recipe: Omit<CoffeeRecipe, 'id' | 'createdAt' | 'updatedAt'>\r\n  ): Promise<CoffeeRecipe> {\r\n    const supabase = this.getWriteClient()\r\n    if (!supabase) {\r\n      throw new Error('Supabase not configured')\r\n    }\r\n\r\n    const { data, error } = await supabase\r\n      .from('coffee_recipes')\r\n      .insert({\r\n        method: recipe.method,\r\n        cup_size: recipe.cupSize,\r\n        cup_size_label: recipe.cupSizeLabel,\r\n        water_ml: recipe.waterMl,\r\n        roast: recipe.roast,\r\n        ratio: recipe.ratio,\r\n        coffee: recipe.coffee,\r\n        temp: recipe.temp,\r\n        technique: recipe.technique,\r\n        switch_setting: recipe.switchSetting || null,\r\n        mocca_setting: recipe.moccaSetting || null,\r\n        timing_cues: recipe.timingCues || [],\r\n        is_active: recipe.isActive ?? true,\r\n      } as never)\r\n      .select()\r\n      .single()\r\n\r\n    if (error) {\r\n      console.error('Error creating recipe:', error)\r\n      throw new Error(`Failed to create recipe: ${error.message}`)\r\n    }\r\n\r\n    return dbRecipeToApp(data as DbCoffeeRecipe)\r\n  }\r\n\r\n  async updateRecipe(\r\n    id: string,\r\n    recipe: Partial<CoffeeRecipe>\r\n  ): Promise<CoffeeRecipe> {\r\n    const supabase = this.getWriteClient()\r\n    if (!supabase) {\r\n      throw new Error('Supabase not configured')\r\n    }\r\n\r\n    const updateData: Record<string, unknown> = {}\r\n\r\n    if (recipe.method !== undefined) updateData.method = recipe.method\r\n    if (recipe.cupSize !== undefined) updateData.cup_size = recipe.cupSize\r\n    if (recipe.cupSizeLabel !== undefined)\r\n      updateData.cup_size_label = recipe.cupSizeLabel\r\n    if (recipe.waterMl !== undefined) updateData.water_ml = recipe.waterMl\r\n    if (recipe.roast !== undefined) updateData.roast = recipe.roast\r\n    if (recipe.ratio !== undefined) updateData.ratio = recipe.ratio\r\n    if (recipe.coffee !== undefined) updateData.coffee = recipe.coffee\r\n    if (recipe.temp !== undefined) updateData.temp = recipe.temp\r\n    if (recipe.technique !== undefined) updateData.technique = recipe.technique\r\n    if (recipe.switchSetting !== undefined)\r\n      updateData.switch_setting = recipe.switchSetting\r\n    if (recipe.moccaSetting !== undefined)\r\n      updateData.mocca_setting = recipe.moccaSetting\r\n    if (recipe.timingCues !== undefined)\r\n      updateData.timing_cues = recipe.timingCues\r\n    if (recipe.isActive !== undefined) updateData.is_active = recipe.isActive\r\n\r\n    const { data, error } = await supabase\r\n      .from('coffee_recipes')\r\n      .update(updateData as never)\r\n      .eq('id', id)\r\n      .select()\r\n      .single()\r\n\r\n    if (error) {\r\n      console.error('Error updating recipe:', error)\r\n      throw new Error(`Failed to update recipe: ${error.message}`)\r\n    }\r\n\r\n    return dbRecipeToApp(data as DbCoffeeRecipe)\r\n  }\r\n\r\n  async deleteRecipe(id: string): Promise<void> {\r\n    const supabase = this.getWriteClient()\r\n    if (!supabase) {\r\n      throw new Error('Supabase not configured')\r\n    }\r\n\r\n    const { error } = await supabase\r\n      .from('coffee_recipes')\r\n      .delete()\r\n      .eq('id', id)\r\n\r\n    if (error) {\r\n      console.error('Error deleting recipe:', error)\r\n      throw new Error(`Failed to delete recipe: ${error.message}`)\r\n    }\r\n  }\r\n\r\n  // ============================================\r\n  // QUICK DOSES\r\n  // ============================================\r\n  async getQuickDoses(method?: BrewMethod): Promise<QuickDose[]> {\r\n    const supabase = this.getReadClient()\r\n    if (!supabase) {\r\n      throw new Error('Supabase not configured')\r\n    }\r\n\r\n    let query = supabase\r\n      .from('coffee_quick_doses')\r\n      .select('*')\r\n      .order('method', { ascending: true })\r\n      .order('sort_order', { ascending: true })\r\n\r\n    if (method) {\r\n      query = query.eq('method', method)\r\n    }\r\n\r\n    const { data, error } = await query\r\n\r\n    if (error) {\r\n      console.error('Error fetching quick doses:', error)\r\n      throw new Error(`Failed to fetch quick doses: ${error.message}`)\r\n    }\r\n\r\n    return (data as DbQuickDose[]).map(dbQuickDoseToApp)\r\n  }\r\n\r\n  async createQuickDose(\r\n    dose: Omit<QuickDose, 'id' | 'createdAt' | 'updatedAt'>\r\n  ): Promise<QuickDose> {\r\n    const supabase = this.getWriteClient()\r\n    if (!supabase) {\r\n      throw new Error('Supabase not configured')\r\n    }\r\n\r\n    const { data, error } = await supabase\r\n      .from('coffee_quick_doses')\r\n      .insert({\r\n        method: dose.method,\r\n        label: dose.label,\r\n        grams: dose.grams,\r\n        note: dose.note || null,\r\n        sort_order: dose.sortOrder ?? 0,\r\n      } as never)\r\n      .select()\r\n      .single()\r\n\r\n    if (error) {\r\n      console.error('Error creating quick dose:', error)\r\n      throw new Error(`Failed to create quick dose: ${error.message}`)\r\n    }\r\n\r\n    return dbQuickDoseToApp(data as DbQuickDose)\r\n  }\r\n\r\n  async updateQuickDose(\r\n    id: string,\r\n    dose: Partial<QuickDose>\r\n  ): Promise<QuickDose> {\r\n    const supabase = this.getWriteClient()\r\n    if (!supabase) {\r\n      throw new Error('Supabase not configured')\r\n    }\r\n\r\n    const updateData: Record<string, unknown> = {}\r\n\r\n    if (dose.method !== undefined) updateData.method = dose.method\r\n    if (dose.label !== undefined) updateData.label = dose.label\r\n    if (dose.grams !== undefined) updateData.grams = dose.grams\r\n    if (dose.note !== undefined) updateData.note = dose.note\r\n    if (dose.sortOrder !== undefined) updateData.sort_order = dose.sortOrder\r\n\r\n    const { data, error } = await supabase\r\n      .from('coffee_quick_doses')\r\n      .update(updateData as never)\r\n      .eq('id', id)\r\n      .select()\r\n      .single()\r\n\r\n    if (error) {\r\n      console.error('Error updating quick dose:', error)\r\n      throw new Error(`Failed to update quick dose: ${error.message}`)\r\n    }\r\n\r\n    return dbQuickDoseToApp(data as DbQuickDose)\r\n  }\r\n\r\n  async deleteQuickDose(id: string): Promise<void> {\r\n    const supabase = this.getWriteClient()\r\n    if (!supabase) {\r\n      throw new Error('Supabase not configured')\r\n    }\r\n\r\n    const { error } = await supabase\r\n      .from('coffee_quick_doses')\r\n      .delete()\r\n      .eq('id', id)\r\n\r\n    if (error) {\r\n      console.error('Error deleting quick dose:', error)\r\n      throw new Error(`Failed to delete quick dose: ${error.message}`)\r\n    }\r\n  }\r\n\r\n  // ============================================\r\n  // GOLDEN RULES\r\n  // ============================================\r\n  async getGoldenRules(): Promise<GoldenRule[]> {\r\n    const supabase = this.getReadClient()\r\n    if (!supabase) {\r\n      throw new Error('Supabase not configured')\r\n    }\r\n\r\n    const { data, error } = await supabase\r\n      .from('coffee_golden_rules')\r\n      .select('*')\r\n      .order('sort_order', { ascending: true })\r\n\r\n    if (error) {\r\n      console.error('Error fetching golden rules:', error)\r\n      throw new Error(`Failed to fetch golden rules: ${error.message}`)\r\n    }\r\n\r\n    return (data as DbGoldenRule[]).map(dbGoldenRuleToApp)\r\n  }\r\n\r\n  async createGoldenRule(\r\n    rule: Omit<GoldenRule, 'id' | 'createdAt' | 'updatedAt'>\r\n  ): Promise<GoldenRule> {\r\n    const supabase = this.getWriteClient()\r\n    if (!supabase) {\r\n      throw new Error('Supabase not configured')\r\n    }\r\n\r\n    const { data, error } = await supabase\r\n      .from('coffee_golden_rules')\r\n      .insert({\r\n        title: rule.title,\r\n        description: rule.description,\r\n        sort_order: rule.sortOrder ?? 0,\r\n      } as never)\r\n      .select()\r\n      .single()\r\n\r\n    if (error) {\r\n      console.error('Error creating golden rule:', error)\r\n      throw new Error(`Failed to create golden rule: ${error.message}`)\r\n    }\r\n\r\n    return dbGoldenRuleToApp(data as DbGoldenRule)\r\n  }\r\n\r\n  async updateGoldenRule(\r\n    id: string,\r\n    rule: Partial<GoldenRule>\r\n  ): Promise<GoldenRule> {\r\n    const supabase = this.getWriteClient()\r\n    if (!supabase) {\r\n      throw new Error('Supabase not configured')\r\n    }\r\n\r\n    const updateData: Record<string, unknown> = {}\r\n\r\n    if (rule.title !== undefined) updateData.title = rule.title\r\n    if (rule.description !== undefined)\r\n      updateData.description = rule.description\r\n    if (rule.sortOrder !== undefined) updateData.sort_order = rule.sortOrder\r\n\r\n    const { data, error } = await supabase\r\n      .from('coffee_golden_rules')\r\n      .update(updateData as never)\r\n      .eq('id', id)\r\n      .select()\r\n      .single()\r\n\r\n    if (error) {\r\n      console.error('Error updating golden rule:', error)\r\n      throw new Error(`Failed to update golden rule: ${error.message}`)\r\n    }\r\n\r\n    return dbGoldenRuleToApp(data as DbGoldenRule)\r\n  }\r\n\r\n  async deleteGoldenRule(id: string): Promise<void> {\r\n    const supabase = this.getWriteClient()\r\n    if (!supabase) {\r\n      throw new Error('Supabase not configured')\r\n    }\r\n\r\n    const { error } = await supabase\r\n      .from('coffee_golden_rules')\r\n      .delete()\r\n      .eq('id', id)\r\n\r\n    if (error) {\r\n      console.error('Error deleting golden rule:', error)\r\n      throw new Error(`Failed to delete golden rule: ${error.message}`)\r\n    }\r\n  }\r\n\r\n  // ============================================\r\n  // RECOMMENDATIONS\r\n  // ============================================\r\n  async getRecommendations(): Promise<CoffeeRecommendation[]> {\r\n    const supabase = this.getReadClient()\r\n    if (!supabase) {\r\n      throw new Error('Supabase not configured')\r\n    }\r\n\r\n    const { data, error } = await supabase\r\n      .from('coffee_recommendations')\r\n      .select('*')\r\n      .order('priority', { ascending: false })\r\n\r\n    if (error) {\r\n      console.error('Error fetching recommendations:', error)\r\n      throw new Error(`Failed to fetch recommendations: ${error.message}`)\r\n    }\r\n\r\n    return (data as DbCoffeeRecommendation[]).map(dbRecommendationToApp)\r\n  }\r\n\r\n  async createRecommendation(\r\n    rec: Omit<CoffeeRecommendation, 'id' | 'createdAt' | 'updatedAt'>\r\n  ): Promise<CoffeeRecommendation> {\r\n    const supabase = this.getWriteClient()\r\n    if (!supabase) {\r\n      throw new Error('Supabase not configured')\r\n    }\r\n\r\n    const { data, error } = await supabase\r\n      .from('coffee_recommendations')\r\n      .insert({\r\n        name: rec.name,\r\n        day_of_week: rec.dayOfWeek,\r\n        hour_start: rec.hourStart,\r\n        hour_end: rec.hourEnd,\r\n        method: rec.method,\r\n        cup_size: rec.cupSize,\r\n        roast: rec.roast,\r\n        priority: rec.priority,\r\n        is_active: rec.isActive ?? true,\r\n      } as never)\r\n      .select()\r\n      .single()\r\n\r\n    if (error) {\r\n      console.error('Error creating recommendation:', error)\r\n      throw new Error(`Failed to create recommendation: ${error.message}`)\r\n    }\r\n\r\n    return dbRecommendationToApp(data as DbCoffeeRecommendation)\r\n  }\r\n\r\n  async updateRecommendation(\r\n    id: string,\r\n    rec: Partial<CoffeeRecommendation>\r\n  ): Promise<CoffeeRecommendation> {\r\n    const supabase = this.getWriteClient()\r\n    if (!supabase) {\r\n      throw new Error('Supabase not configured')\r\n    }\r\n\r\n    const updateData: Record<string, unknown> = {}\r\n\r\n    if (rec.name !== undefined) updateData.name = rec.name\r\n    if (rec.dayOfWeek !== undefined) updateData.day_of_week = rec.dayOfWeek\r\n    if (rec.hourStart !== undefined) updateData.hour_start = rec.hourStart\r\n    if (rec.hourEnd !== undefined) updateData.hour_end = rec.hourEnd\r\n    if (rec.method !== undefined) updateData.method = rec.method\r\n    if (rec.cupSize !== undefined) updateData.cup_size = rec.cupSize\r\n    if (rec.roast !== undefined) updateData.roast = rec.roast\r\n    if (rec.priority !== undefined) updateData.priority = rec.priority\r\n    if (rec.isActive !== undefined) updateData.is_active = rec.isActive\r\n\r\n    const { data, error } = await supabase\r\n      .from('coffee_recommendations')\r\n      .update(updateData as never)\r\n      .eq('id', id)\r\n      .select()\r\n      .single()\r\n\r\n    if (error) {\r\n      console.error('Error updating recommendation:', error)\r\n      throw new Error(`Failed to update recommendation: ${error.message}`)\r\n    }\r\n\r\n    return dbRecommendationToApp(data as DbCoffeeRecommendation)\r\n  }\r\n\r\n  async deleteRecommendation(id: string): Promise<void> {\r\n    const supabase = this.getWriteClient()\r\n    if (!supabase) {\r\n      throw new Error('Supabase not configured')\r\n    }\r\n\r\n    const { error } = await supabase\r\n      .from('coffee_recommendations')\r\n      .delete()\r\n      .eq('id', id)\r\n\r\n    if (error) {\r\n      console.error('Error deleting recommendation:', error)\r\n      throw new Error(`Failed to delete recommendation: ${error.message}`)\r\n    }\r\n  }\r\n\r\n  // ============================================\r\n  // RECOMMENDED RECIPE (Time-based)\r\n  // ============================================\r\n  async getRecommendedRecipe(): Promise<{\r\n    method: BrewMethod\r\n    cupSize: CupSize\r\n    roast: RoastLevel\r\n  } | null> {\r\n    const supabase = this.getReadClient()\r\n    if (!supabase) {\r\n      return null\r\n    }\r\n\r\n    const now = new Date()\r\n    const hour = now.getHours()\r\n    const dayOfWeek = now.getDay()\r\n\r\n    // First try to find a day-specific recommendation\r\n    const { data: specific } = await supabase\r\n      .from('coffee_recommendations')\r\n      .select('*')\r\n      .eq('is_active', true)\r\n      .eq('day_of_week', dayOfWeek)\r\n      .lte('hour_start', hour)\r\n      .gt('hour_end', hour)\r\n      .order('priority', { ascending: false })\r\n      .limit(1)\r\n\r\n    if (specific && specific.length > 0) {\r\n      const rec = specific[0] as unknown as DbCoffeeRecommendation\r\n      return {\r\n        method: rec.method as BrewMethod,\r\n        cupSize: rec.cup_size as CupSize,\r\n        roast: rec.roast as RoastLevel,\r\n      }\r\n    }\r\n\r\n    // Fall back to any-day recommendations\r\n    const { data: general } = await supabase\r\n      .from('coffee_recommendations')\r\n      .select('*')\r\n      .eq('is_active', true)\r\n      .is('day_of_week', null)\r\n      .lte('hour_start', hour)\r\n      .gt('hour_end', hour)\r\n      .order('priority', { ascending: false })\r\n      .limit(1)\r\n\r\n    if (general && general.length > 0) {\r\n      const rec = general[0] as unknown as DbCoffeeRecommendation\r\n      return {\r\n        method: rec.method as BrewMethod,\r\n        cupSize: rec.cup_size as CupSize,\r\n        roast: rec.roast as RoastLevel,\r\n      }\r\n    }\r\n\r\n    // Default fallback\r\n    return { method: 'moccamaster', cupSize: '8-cup', roast: 'medium' }\r\n  }\r\n}\r\n\r\nexport const coffeeConfigService = new CoffeeConfigService()\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 686, "column": 0}, "map": {"version":3,"sources":["file:///D:/documents/dev/petehome/apps/web/app/api/coffee/config/route.ts"],"sourcesContent":["/**\n * Coffee Config API Routes\n * GET - Get all coffee configuration\n */\n\nimport { corsOptionsResponse, withCors } from '@/lib/api/cors'\nimport { coffeeConfigService } from '@/lib/services/coffee-config.service'\nimport { NextResponse } from 'next/server'\n\n/**\n * GET /api/coffee/config\n * Get complete coffee configuration\n */\nexport async function GET() {\n  try {\n    const config = await coffeeConfigService.getConfig()\n\n    return withCors(\n      NextResponse.json({\n        success: true,\n        data: config,\n      })\n    )\n  } catch (error) {\n    console.error('Error fetching coffee config:', error)\n    return withCors(\n      NextResponse.json(\n        {\n          success: false,\n          error: error instanceof Error ? error.message : 'Unknown error',\n        },\n        { status: 500 }\n      )\n    )\n  }\n}\n\nexport async function OPTIONS() {\n  return corsOptionsResponse()\n}\n"],"names":[],"mappings":";;;;;;AAAA;;;CAGC,GAED;AACA;AACA;;;;AAMO,eAAe;IACpB,IAAI;QACF,MAAM,SAAS,MAAM,uKAAmB,CAAC,SAAS;QAElD,OAAO,IAAA,gIAAQ,EACb,gJAAY,CAAC,IAAI,CAAC;YAChB,SAAS;YACT,MAAM;QACR;IAEJ,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,OAAO,IAAA,gIAAQ,EACb,gJAAY,CAAC,IAAI,CACf;YACE,SAAS;YACT,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAClD,GACA;YAAE,QAAQ;QAAI;IAGpB;AACF;AAEO,eAAe;IACpB,OAAO,IAAA,2IAAmB;AAC5B"}}]
}